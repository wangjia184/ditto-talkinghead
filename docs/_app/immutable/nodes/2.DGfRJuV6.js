import{b as Ln,d as oa,c as In,a as k,f as yr,t as A}from"../chunks/Br85p9e0.js";import"../chunks/kj30wZif.js";import{aH as aa,b as ia,h as lr,K as ur,z as la,H as ua,aI as ca,f as Rn,O as da,P as ha,ak as pa,ae as ma,M as fa,F as je,aE as pe,t as X,aq as le,ap as wr,x as As,y as cr,A as Ss,u as ga,D as y,B as P,C as B,aG as Gn,a4 as w}from"../chunks/DE9oZSK6.js";import{s as ba}from"../chunks/Djlp6dSw.js";import{p as xa,r as ya,c as wa,s as va,i as _a,b as $a}from"../chunks/BakK40Gf.js";import{a as ka}from"../chunks/B92Os5fs.js";import{B as Aa}from"../chunks/Do3Cat1k.js";function Sa(e,t,r){lr&&ur();var s=new Aa(e),o=!aa();ia(()=>{var i=t();o&&i!==null&&typeof i=="object"&&(i={}),s.ensure(i,r)})}function qa(e,t,r=!1,s=!1,o=!1){var i=e,l="";la(()=>{var u=ua;if(l===(l=t()??"")){lr&&ur();return}if(u.nodes!==null&&(ca(u.nodes.start,u.nodes.end),u.nodes=null),l!==""){if(lr){Rn.data;for(var h=ur(),b=h;h!==null&&(h.nodeType!==da||h.data!=="");)b=h,h=ha(h);if(h===null)throw pa(),ma;Ln(Rn,b),i=fa(h);return}var _=l+"";r?_=`<svg>${_}</svg>`:s&&(_=`<math>${_}</math>`);var $=oa(_);if((r||s)&&($=je($)),Ln(je($),$.lastChild),r||s)for(;je($);)i.before(je($));else i.before($)}})}const F={string:"string",number:"number",boolean:"boolean",null:"null",undefined:"undefined",regexp:"regexp",function:"function",object:"object",array:"array",promise:"promise",unknown:"unknown"},Qt=e=>e===null?F.null:e===void 0?F.undefined:e instanceof RegExp?F.regexp:typeof e=="string"?F.string:typeof e=="number"?F.number:typeof e=="boolean"?F.boolean:Array.isArray(e)?F.array:typeof e=="function"?F.function:typeof e=="object"?F.object:F.unknown,be=e=>{if(typeof e=="string"){if(e.match(/^[\d.-]+$/))return Number.isNaN(Number.parseFloat(e))?Number.isNaN(Number.parseInt(e))?{identity:F.string,value:e}:{identity:F.number,value:Number.parseInt(e)}:{identity:F.number,value:Number.parseFloat(e)};if(!e.includes(",")&&(e.includes("&")||e.includes("="))){const t=e.split(/[&,]/),r={};for(const s of t){if(!s.includes("="))continue;const[o,i]=s.split("="),l=o.replace(/\[\d*\]$/,""),u=be(i);if(o.includes("[")){Array.isArray(r[l])||(r[l]=[]);const h=o.match(/\[(\d+)\]/)?.[1];h?(Array.isArray(r[l])||(r[l]=[]),r[l].push([parseInt(h),u.value])):r[l].push(u.value)}else r[l]=u.value}for(const[s,o]of Object.entries(r))Array.isArray(o)&&o.length>0&&Array.isArray(o[0])&&(r[s]=o.sort((i,l)=>i[0]-l[0]).map(([,i])=>i));return{identity:F.object,value:r}}else if(e.includes("&")&&e.includes("=")){const t={};for(const r of e.split("&")){if(!r.includes("="))continue;const[s,o]=r.split("=");t[s]=o}return{identity:F.object,value:t}}else if(e.match(/^[0-9a-z]+\[\d+\]=.+$/)){const[,t,r]=e.match(/^[0-9a-z]+\[(\d+)\]=(.+)$/)||[];if(t!==void 0&&r!==void 0){const s=[],o=be(r);return s[parseInt(t,10)]=o.value,{identity:F.array,value:s}}}else if(e.match(/^[0-9a-z]+\[\]$/))return{identity:F.array,value:e};return e.match(/^true$/i)?{identity:F.boolean,value:!0}:e.match(/^false$/i)?{identity:F.boolean,value:!1}:{identity:F.string,value:e}}else{if(typeof e=="number")return{identity:F.number,value:e};if(e instanceof RegExp)return{identity:F.regexp,value:e};if(typeof e=="boolean")return{identity:F.boolean,value:e};if(e===null)return{identity:F.null,value:null};if(e===void 0)return{identity:F.undefined,value:void 0};if(Array.isArray(e))return{identity:F.array,value:e};if(typeof e=="object"){const t=Object.entries(e).reduce((r,[s,o])=>(r[s]=be(o)?.value,r),{});return{identity:F.object,value:t}}else{if(typeof e=="function")return{identity:F.function,value:e};if(e instanceof Promise)return{identity:F.promise,value:e}}}throw new Error(`unable to marshal value: ${e} (it is neither a string, number, boolean, nor a regular expression)`)},er=["exact-match","base-match","default-match","permitted-no-conditions"];var Ee;(function(e){e.any={[F.string]:(t,r)=>t===r,[F.number]:(t,r)=>t===r,[F.boolean]:(t,r)=>t===r,[F.promise]:(t,r)=>t===r,[F.function]:(t,r)=>t===r,[F.null]:(t,r)=>t===r,[F.undefined]:(t,r)=>t===r,[F.unknown]:(t,r)=>t===r,[F.array]:(t,r)=>Array.isArray(t)&&Array.isArray(r)&&t.length===r.length&&t.every((s,o)=>e.any[Qt(s)](s,r[o])),[F.object]:(t,r)=>{if(typeof t!="object"||typeof r!="object")return!1;const s=Object.keys(t),o=Object.keys(r);return s.length!==o.length?!1:s.every(i=>e.any[Qt(t[i])](t[i],r[i]))},[F.regexp]:(t,r)=>{const s=t.exec(r);return s?s.groups?be(s.groups).value:s.length===1&&s[0]===s.input?!0:be(s.slice(1)[0]).value:!1}},e.valid={[F.string]:t=>t.length>0,[F.boolean]:t=>t===!1,[F.number]:t=>!isNaN(t),[F.array]:t=>Array.isArray(t)&&t.length>0,[F.object]:t=>{if(typeof t!="object"||t===null)return!0;const r=Object.keys(t);return r.length===0?!0:r.every(o=>{const i=t[o],l=Qt(i);return e.valid[l](i)})},[F.regexp]:t=>t instanceof RegExp,[F.function]:t=>typeof t=="function",[F.null]:()=>!1,[F.undefined]:()=>!1}})(Ee||(Ee={}));const Ta=(e,t)=>{const r=new URL(e,window.location.origin);t&&Object.entries(t).forEach(([s,o])=>{r.searchParams.set(s,o)}),window.history.pushState({},"",r.toString())};class Se{params={};original;constructor(t){if(typeof t=="string"&&(this.original=t),t){const r=be(t);r.value&&(this.params=r.value)}}get(t,r){return this.params[t]||r}set(t,r){}delete(t){delete this.params[t]}clear(){this.params={}}goto(t){Ta(t,this.params)}test(t){if(typeof t=="object"){const r={};for(const[s,o]of Object.entries(t.params))if(this.params[s]){const i=be(this.params[s]);if(o instanceof RegExp){const l=Ee.any[F.regexp](o,this.params[s]);if(l)r[s]=l;else return{condition:"no-match"}}else i.identity===F.number?i.value===this.params[s]&&(r[s]=i.value):i.identity===F.string?r[s]=i.value===this.params[s]:i.identity===F.boolean?r[s]=i.value===!!this.params[s]:i.identity===F.array&&(r[s]=i.value.includes(this.params[s]))}else return{condition:"no-match"};return Object.keys(r).length===Object.keys(t).length&&Ee.valid[F.object](r)?{condition:"exact-match",matches:be(r).value}:{condition:Object.keys(r).length>1&&Object.keys(t).length!==Object.keys(r).length?"exact-match":"no-match",matches:r}}}toString(){const t=r=>Array.isArray(r)?r.map(s=>t(s)).join(","):typeof r=="object"&&r!==null?Object.entries(r).map(([s,o])=>`${s}:${t(o)}`).join(","):encodeURIComponent(r);return Object.entries(this.params).map(([r,s])=>`${encodeURIComponent(r)}=${t(s)}`).join("&")}toJSON(t){return Object.fromEntries(Object.entries(this.params).map(([r,s])=>[r,s.toString()]))}}var De;(function(e){e.parse=t=>{if(t){const[r,s=""]=t.split("#"),[o,i=""]=s.split("?");return{path:o,query:new Se(i),hash:s}}}})(De||(De={}));const qe=e=>(e&&!e.startsWith("/")&&(e="/"+e),e);var Xe;(function(e){e.parse=t=>{if(t===void 0||t.length===0)throw new Error(`invalid URL: ${t}`);const r=t.startsWith("file:///");if(t.includes("://")&&!r){const[o,i]=t.split("://"),l=i.match(/^([^/:]+)(?::(\d+))?(.*)$/),[u,h,b]=l?.slice(1)??[],[_,$=""]=(b||"").split("?"),M=De.parse(t);return{protocol:o,host:u,port:h,path:qe(_)||"/",query:new Se($),hash:M}}else if(r){const[o,i]=t.split("://"),l=i.indexOf("#"),u=i.indexOf("?");let h="",b="/",_;if(l>u&&u!=-1)h=i.slice(0,u),b=qe(i.slice(u)),_=new Se(b);else{h=i.slice(0,l),b=qe(i.slice(l));const[M,N]=(b||"").split("?");_=new Se(N)}const $=De.parse(i);return{protocol:o,host:h,port:"",path:b,query:_,hash:$}}else{const[o,i=""]=t.split("?"),l=De.parse(t);return{protocol:window.location.protocol.replace(":",""),host:window.location.hostname,port:window.location.port,path:qe(o)||"/",query:new Se(i),hash:l}}},e.path=t=>t.split("?")[0]})(Xe||(Xe={}));const Ma={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Da={},de;(function(e){const t=(r,s)=>{try{let o=Ma;for(const i of r)if(o&&i in o)o=o[i];else{o=void 0;break}if(o!==void 0)return o}catch{}try{let o=Da;for(const i of r)if(o&&i in o)o=o[i];else{o=void 0;break}if(o!==void 0)return o}catch{}return s};e.config=r=>({tracing:r?.tracing??t(["SPA_ROUTER","tracing"],{enabled:!1}),logging:{level:r?.logging?.level??t(["SPA_ROUTER","logging","level"],4),console:r?.logging?.console??t(["SPA_ROUTER","logging","console"]),sink:r?.logging?.sink??t(["SPA_ROUTER","logging","sink"])}}),e.current=e.config()})(de||(de={}));var Pe;(function(e){let t;(function(r){r[r.FATAL=-1]="FATAL",r[r.ERROR=1]="ERROR",r[r.INFO=2]="INFO",r[r.DEBUG=3]="DEBUG",r[r.TRACE=4]="TRACE",r[r.DISABLED=5]="DISABLED"})(t=e.LogLevel||(e.LogLevel={})),e.info=(...r)=>{e.log(t.INFO,...r)},e.debug=(...r)=>{e.log(t.DEBUG,...r)},e.error=(...r)=>{e.log(t.ERROR,...r)},e.trace=(...r)=>{e.log(t.TRACE,...r)},e.fatal=(...r)=>{throw e.log(t.FATAL,...r),new Error("Fatal error")},e.log=(r,...s)=>{r<=de.current.logging.level&&r!==t.DISABLED&&(de.current.logging.console&&(s.some(o=>o?.toConsole)?s.forEach(o=>o?.toConsole?.(de.current.logging.level)):de.current.logging.console&&console.log(...s)),de.current.logging.sink&&de.current.logging.sink(s))}})(Pe||(Pe={}));var Je;(function(e){e.from=t=>{if(typeof t=="string")return new RegExp(t);if(t instanceof RegExp)return new RegExp(t.source);throw new Error("invalid regexp expression")},e.can=t=>/[[\]{}()*+?.,\\^$|#\s]|\\[wWdDsS]|\(\?[:!=<]?/.test(t)})(Je||(Je={}));function Oa(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}const jn=async e=>Oa(e)?await e():e();class vr extends Map{#e=pe(!1);get size(){return X(this.#e),super.size}#t(){le(this.#e,!X(this.#e))}add(t,r){if(this.has(t))throw new Error(`key ${t} already exists`);return this.set(t,r)}get(t){return X(this.#e),super.get(t)}set(t,r){const s=super.set(t,r);return this.#t(),s}delete(t){const r=super.delete(t);return r&&this.#t(),r}clear(){const t=super.clear();return this.#t(),t}keys(){return X(this.#e),super.keys()}values(){return X(this.#e),super.values()}entries(){return X(this.#e),super.entries()}forEach(t){return X(this.#e),super.forEach(t)}[Symbol.iterator](){return X(this.#e),super[Symbol.iterator]()}}let Na=class{prefix;id;date;name;description;metadata;#e=pe(wr(new vr));get traces(){return X(this.#e)}set traces(t){le(this.#e,t,!0)}constructor(t,r){this.prefix=r,this.name=t.name,this.id=t.id||Math.random().toString(36).substring(2,25),this.description=t.description,this.metadata=t.metadata,this.date=t.date||new Date}trace(t,r){const s=t.id||Math.random().toString(36).substring(2,25);return t=new Ca(t,this.traces.size+1,this,r),this.traces.set(s,t),Pe.trace(r,t),t}get(){return this.traces.values()}};class Ca{prefix;id;index;date;name;description;metadata;span;constructor(t,r,s,o){this.id=t.id||Math.random().toString(36).substring(2,25),this.index=r,this.date=t.date||new Date,this.name=t.name,this.description=t.description,this.metadata=t.metadata,this.span=s,this.prefix=t.prefix}toConsole(t){const r=["%c%s %cspan:%c%s:%ctrace:%c%s%c:%c%s %c%s","color: #505050",this.date?.toISOString(),"color: #7A7A7A","color: #915CF2; font-weight: bold",this.span?.name||this.id,"color: #7A7A7A; font-weight: bold","color: #C3F53B; font-weight: bold",this.index,"color: #7A7A7A; font-weight: bold","color: #3BAEF5; font-weight: bold",`${this.metadata?.router?`[${this.metadata.router.id}] `:""}${this.name}`,"color: #06E96C",this.description];this.prefix&&(r[0]=`${this.prefix} %c%s %cspan:%c%s:%ctrace:%c%s%c:%c%s %c%s`),de.current.tracing.level>=Pe.LogLevel.TRACE?(r[0]+=`
%c%s`,r.push("color: #6B757F",`attached trace metadata:

${JSON.stringify({span:this.span.metadata,trace:this.metadata},null,2)}`)):de.current.tracing.level>=Pe.LogLevel.DEBUG&&(this.span&&r.push(this.span.metadata),this.metadata&&r.push(this.metadata)),console.log(...r)}}const Ea=new vr,qs=(e,t)=>{if(de.current.tracing){const r=new Na({name:e,metadata:t});return Ea.set(e,r),r}};var dr;(function(e){e.base=(t,r)=>r.match(new RegExp(`^${t}(/|$)`))!==null})(dr||(dr={}));class tr{route;result;constructor(t){this.route=t.route,this.result=t.result}toString(){let t="";if(this.result.querystring.original&&typeof this.result.querystring.original=="object"){const r=new URLSearchParams;for(const[s,o]of Object.entries(this.result.querystring.original))o!=null&&r.append(s,String(o));t=r.toString()}else this.result.querystring.original&&(t=String(this.result.querystring.original));return`${this.result.path.original}${t?`?${t}`:""}`}}class Pa{name;basePath;path;querystring;component;props;hooks;children;status;constructor(t){this.name=t.name,this.basePath=t.basePath,this.path=t.path,this.querystring=t.querystring,this.component=t.component,this.props=t.props,this.hooks=t.hooks,this.status=t.status}toJSON(){return{name:this.name,basePath:this.basePath,path:this.path,props:this.props,component:this.component,querystring:this.querystring,hooks:this.hooks,children:this.children,status:this.status}}}class _r{name;basePath;path;querystring;component;props;hooks;children;status;#e=pe(wr([]));get traces(){return X(this.#e)}set traces(t){le(this.#e,t,!0)}constructor(t){this.name=t.name,this.basePath=t.basePath,this.path=typeof t.path=="string"?qe(t.path):t.path,t.querystring&&(this.querystring=new Se(t.querystring)),this.component=t.component,this.props=t.props,this.hooks=t.hooks,this.status=t.status,this.children=t.children?.map(r=>new _r(r))}test(t){const r=Xe.path(t.toString());if(typeof this.path=="string")if(Je.can(this.path)){const s=Je.from(this.path).exec(r);if(s)return{condition:"exact-match",params:s.groups}}else{if(this.path===r)return{condition:"exact-match",params:this.path};if(dr.base(this.path,r))return{condition:"base-match",params:{}}}else if(this.path instanceof RegExp){const s=Ee.any[F.regexp](this.path,r);if(s)return{condition:"exact-match",params:s}}else if(typeof this.path=="number"&&this.path===be(r).value)throw new Error("numbered route match not supported at the route.path level");return{condition:"no-match",params:{}}}absolute(){return this.basePath?`${this.basePath}${this.path}`:this.path.toString()}}class Ba{id;basePath;routes;hooks;initialPath;notFoundComponent;statuses;renavigation;constructor(t){this.id=t.id||Math.random().toString(36).substring(2,15),this.basePath=t.basePath,this.hooks=t.hooks,this.initialPath=t.initialPath,this.notFoundComponent=t.notFoundComponent,this.statuses=t.statuses,this.renavigation=t.renavigation??!0,this.routes=t.routes.map(r=>new Pa({...r,...t}))}toJSON(){return{id:this.id,basePath:this.basePath,routes:this.routes,hooks:this.hooks}}}var we;(function(e){e[e.OK=200]="OK",e[e.PermanentRedirect=301]="PermanentRedirect",e[e.TemporaryRedirect=302]="TemporaryRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.InternalServerError=500]="InternalServerError"})(we||(we={}));const Fa=["","/","/*","/^.*$/","/.*/"];class za{id;routes=new Set;handlers;config;applyFn;#e=pe(!1);get navigating(){return X(this.#e)}set navigating(t){le(this.#e,t,!0)}#t=pe();get current(){return X(this.#t)}set current(t){le(this.#t,t,!0)}constructor(t,r){this.id=t.id||Math.random().toString(36).substring(2,15),this.config=t,this.applyFn=r,this.handlers={pushStateHandler:()=>this.handleStateChange(location.toString()),replaceStateHandler:()=>this.handleStateChange(location.toString()),popStateHandler:()=>this.handleStateChange(location.toString()),hashChangeHandler:()=>this.handleStateChange(location.toString())},window.addEventListener("pushState",this.handlers.pushStateHandler),window.addEventListener("replaceState",this.handlers.replaceStateHandler),window.addEventListener("popstate",this.handlers.popStateHandler),window.addEventListener("hashchange",this.handlers.hashChangeHandler);for(let s of t.routes)this.routes.add(new _r({...s,basePath:s.basePath||this.config.basePath}))}async handleStateChange(t,r){const{path:s,query:o}=Xe.parse(t);this.navigating=!0,r||(r=qs("detected history change event")),r?.trace({prefix:"ðŸ”",name:"router-instance.handleStateChange",description:`attempting to handle a new state change for path "${s}"`,metadata:{router:{id:this.config.id,basePath:this.config.basePath},location:"/src/lib/router-instance.svelte:handleStateChange()",basePath:this.config.basePath,path:s,query:o,url:t}});const i=await this.get(s,o,r);if(i&&er.includes(i.result.path.condition)){if(r?.trace({prefix:"âœ…",name:"router-instance.handleStateChange",description:`route found for path "${s}"`,metadata:{location:"/src/lib/router-instance.svelte:handleStateChange()",router:{id:this.config.id,basePath:this.config.basePath},path:s,query:o?.params||!1,route:i,url:t}}),this.config.hooks?.pre&&!await this.evaluateHooks(i,this.config.hooks.pre)){this.navigating=!1;return}if(i.route?.hooks?.pre&&!await this.evaluateHooks(i,i.route.hooks.pre)){this.navigating=!1;return}const l=this.current&&this.current.result.path.original===i.result.path.original&&JSON.stringify(this.current.result.querystring.params)===JSON.stringify(i.result.querystring.params);if(this.config.renavigation!==!1?(this.current=void 0,r?.trace({prefix:l?"ðŸ”„":"âœ…",name:"router-instance.applyRoute",description:l?`re-mounting same route "${i.result.path.original}" (renavigation enabled)`:`applying new route "${i.result.path.original}"`,metadata:{location:"/src/lib/router-instance.svelte:handleStateChange()",router:{id:this.config.id,basePath:this.config.basePath},isSameRoute:l,renavigation:this.config.renavigation,result:i}}),this.applyFn(i,r),this.current=i):(r?.trace({prefix:"â­ï¸",name:"router-instance.skipRenavigation",description:`skipping same route "${i.result.path.original}" (renavigation disabled)`,metadata:{location:"/src/lib/router-instance.svelte:handleStateChange()",router:{id:this.config.id,basePath:this.config.basePath},isSameRoute:l,renavigation:this.config.renavigation,result:i}}),this.current=i),i&&i.route?.hooks?.post&&!await this.evaluateHooks(i,i.route.hooks.post)){this.navigating=!1;return}this.config.hooks?.post&&await this.evaluateHooks(i,this.config.hooks.post),this.current=i}this.navigating=!1}async evaluateHooks(t,r){if(Array.isArray(r))for(const s of r){if(!await jn(()=>s(t)))return!1;await new Promise(o=>setTimeout(o,50))}else if(!await jn(()=>r(t)))return!1;return!0}async get(t,r,s){t=t.replace("/#","");const o=qe(t.replace(this.config.basePath||"/","")),i=u=>{let h;for(const b of this.routes)if(!b.path||Fa.includes(b.path.toString())){h=b;break}if(s?.trace({prefix:h?"âœ…":"âŒ",name:"router-instance.getDefaultRoute",description:`get default route because "${u}"`,metadata:{location:"/src/lib/router-instance.svelte:get()",router:{id:this.config.id,basePath:this.config.basePath},path:t,query:r,normalized:o,route:h}}),h)return new tr({route:h,result:{path:{condition:"default-match",original:t},querystring:{condition:"permitted-no-conditions",original:r?.toJSON(),params:r?.toJSON()},component:h.component,status:we.OK}})};if(s?.trace({prefix:"ðŸ”",name:"router-instance.get",description:`${this.config.id} with base path "${this.config.basePath||"/"}" is attempting to get a route for path "${t}"`,metadata:{location:"/src/lib/router-instance.svelte:get()",router:{id:this.config.id,basePath:this.config.basePath},path:t,query:r,normalized:o}}),this.config.basePath===t)return i("base path is the same as the path");let l;for(const u of this.routes){const h=u.test(o);if(h&&er.includes(h.condition))if(s?.trace({prefix:"âœ…",name:"router-instance.get:routesloop",description:`${h.condition} for inbound path "${t}"${u.name?` (named: "${u.name}")`:""}`,metadata:{location:"/src/lib/router-instance.svelte:get():forloop",router:{id:this.config.id,basePath:this.config.basePath},path:t,query:r,normalized:o,route:u,evaluation:{path:h}}}),u.querystring&&r){const b=r.test(u.querystring);er.includes(b?.condition)&&(s?.trace({prefix:"âœ…",name:"router-instance.get.evaluateQuery",description:`${b?.condition} evaluating querystring "${r?.toString()}" for the route "${t}"${u.name?` (named: "${u.name}")`:""}`,metadata:{location:"/src/lib/router-instance.svelte:get()",router:{id:this.config.id,basePath:this.config.basePath},path:t,query:r,normalized:o,evaluation:{path:h,querystring:b}}}),l=new tr({route:u,result:{path:{...h,original:o},querystring:{...b,original:r.toJSON()},component:u.component,status:we.OK}}))}else l=new tr({route:u,result:{path:{...h,original:o},querystring:{condition:"permitted-no-conditions",original:r?.toJSON(),params:r?.toJSON()},component:u.component,status:we.OK}})}if(t==="/")return i("no routes match, last resort is to find a default route");if(!l&&this.config.statuses?.[404]){const u=this.config.statuses[404];return typeof u=="function"?{result:{...u({result:{path:{condition:"permitted-no-conditions",original:t},querystring:{condition:"permitted-no-conditions",original:r?.toJSON(),params:r?.toJSON()},status:we.NotFound}},s),path:{condition:"permitted-no-conditions",original:t},querystring:{condition:"permitted-no-conditions",original:r?.toJSON(),params:r?.toJSON()},status:we.NotFound}}:{result:{...u,path:{condition:"permitted-no-conditions",original:t},querystring:{condition:"permitted-no-conditions",original:r?.toJSON(),params:r?.toJSON()},status:we.NotFound}}}return l}deregister(t){window.removeEventListener("pushState",this.handlers.pushStateHandler),window.removeEventListener("replaceState",this.handlers.replaceStateHandler),window.removeEventListener("popstate",this.handlers.popStateHandler),window.removeEventListener("hashchange",this.handlers.hashChangeHandler),Ts.deregister(this.config.id,t)}get routesArray(){return Array.from(this.routes)}toJSON(){return{id:this.id,config:this.config}}}class La{instances=new vr;constructor(){if(window.__SVELTE_SPA_ROUTER_REGISTERED__)return window.__SVELTE_SPA_ROUTER_REGISTERED__;window.__SVELTE_SPA_ROUTER_REGISTERED__=this;const{pushState:t,replaceState:r}=window.history;window.history.pushState=function(...s){t.apply(window.history,s),window.dispatchEvent(new Event("pushState"))},window.history.replaceState=function(...s){r.apply(window.history,s),window.dispatchEvent(new Event("replaceState"))}}register(t,r,s){if(this.instances.has(t.id))throw new Error(`router instance with id ${t.id} already registered`);const o=new za(t,r);return s&&s.trace({prefix:"ðŸ”",name:"registry.register",description:"registering a new router instance",metadata:{router:{id:t.id,basePath:t.basePath},location:"/src/lib/registry.svelte:register()",config:t}}),this.instances.set(t.id,o),o}deregister(t,r){const s=this.instances.get(t);if(r&&r.trace({prefix:s?"âœ…":"âŒ",name:"registry.deregister",description:"deregistering a router instance",metadata:{router:{id:t,basePath:s.config.basePath},location:"/src/lib/registry.svelte:deregister()",config:s.config}}),s)this.instances.delete(t);else throw new Error(`router instance with id ${t} not found`)}get(t){return this.instances.get(t)}}const Ts=window.__SVELTE_SPA_ROUTER_REGISTRY__||new La;function Ia(e,t){As(t,!0);let r=xa(t,"instance",15),s=ya(t,["$$slots","$$events","$$legacy","instance"]);const o=qs(t.id?`[${t.id}]`:"router");let i=pe(null),l,u=pe(void 0),h=pe(wr({}));const b=async(j,z)=>{if(le(u,j,!0),z?.trace({prefix:"âœ…",name:"apply",description:`<Router${l.config.id?` id="${l.config.id}"`:""}/> applying route ${j.result.path.original} (${j.result.path.condition})`,metadata:{location:"/src/lib/router.svelte:apply()",router:{id:l.config.id,basePath:l.config.basePath},result:j}}),typeof j.result.component=="function"&&j.result.component.constructor.name==="AsyncFunction"){const L=await j.result.component();le(i,L.default||L,!0)}else le(i,j.result.component,!0);le(u,{...j},!0),le(h,X(u).route?.props,!0)};l=Ts.register(new Ba(s),b,o),o?.trace({prefix:"âœ…",name:"<Router/> Component",description:"new component mounted",metadata:{router:{id:l.config.id,basePath:l.config.basePath},location:"/src/lib/router.svelte:mount()"}}),r(l),o&&(o.metadata={router:l.config.id}),l.handleStateChange(location.toString(),o),ka(()=>{l.deregister(o)});const{routes:_,basePath:$,...M}=s;var N=In(),G=cr(N);Sa(G,()=>X(u)?.result?.path?.original||Math.random(),j=>{var z=In(),L=cr(z);wa(L,()=>X(i),(U,oe)=>{oe(U,va({get route(){return X(u)}},()=>X(h),()=>M))}),k(j,z)}),k(e,N),Ss()}class D{constructor(t,r){let s=" "+t,o;const i=r&&r.loc;if(i&&i.start<=i.end){const u=i.lexer.input;o=i.start;const h=i.end;o===u.length?s+=" at end of input: ":s+=" at position "+(o+1)+`: 
`;const b=u.slice(o,h).replace(/[^]/g,"$&Ì²");let _;o>15?_="â€¦"+u.slice(o-15,o):_=u.slice(0,o);let $;h+15<u.length?$=u.slice(h,h+15)+"â€¦":$=u.slice(h),s+=_+b+$}const l=new Error(s);return l.name="ParseError",l.__proto__=D.prototype,l.position=o,l}}D.prototype.__proto__=Error.prototype;const Ra=function(e,t){return e===void 0?t:e},Ga=/([A-Z])/g,ja=function(e){return e.replace(Ga,"-$1").toLowerCase()},Va={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ua=/[&><"']/g;function Ha(e){return String(e).replace(Ua,t=>Va[t])}const Oe=function(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?Oe(e.body[0]):e:e.type==="font"?Oe(e.body):e},Wa=function(e){const t=Oe(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Za=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Xa=function(e){const t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},Ja=function(e){return+e.toFixed(4)};var H={deflt:Ra,escape:Ha,hyphenate:ja,getBaseElem:Oe,isCharacterBox:Wa,protocolFromUrl:Xa,round:Ja};class $r{constructor(t){t=t||{},this.displayMode=H.deflt(t.displayMode,!1),this.annotate=H.deflt(t.annotate,!1),this.leqno=H.deflt(t.leqno,!1),this.throwOnError=H.deflt(t.throwOnError,!1),this.errorColor=H.deflt(t.errorColor,"#b22222"),this.macros=t.macros||{},this.wrap=H.deflt(t.wrap,"tex"),this.xml=H.deflt(t.xml,!1),this.colorIsTextColor=H.deflt(t.colorIsTextColor,!1),this.strict=H.deflt(t.strict,!1),this.trust=H.deflt(t.trust,!1),this.maxSize=t.maxSize===void 0?[1/0,1/0]:Array.isArray(t.maxSize)?t.maxSize:[1/0,1/0],this.maxExpand=Math.max(0,H.deflt(t.maxExpand,1e3))}isTrusted(t){if(t.url&&!t.protocol){const s=H.protocolFromUrl(t.url);if(s==null)return!1;t.protocol=s}return!!(typeof this.trust=="function"?this.trust(t):this.trust)}}const Ms={},Ke={};function C({type:e,names:t,props:r,handler:s,mathmlBuilder:o}){const i={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:s};for(let l=0;l<t.length;++l)Ms[t[l]]=i;e&&o&&(Ke[e]=o)}function $e({type:e,mathmlBuilder:t}){C({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},mathmlBuilder:t})}const Be=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},te=function(e){return e.type==="ordgroup"?e.body:[e]};class kr{constructor(t){this.children=t,this.classes=[],this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){const t=document.createDocumentFragment();for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){let t="";for(let r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){const t=r=>r.toText();return this.children.map(t).join("")}}const Te=function(e){return e.filter(t=>t).join(" ")},Ka=function(e,t){this.classes=e||[],this.attributes={},this.style=t||{}},Ya=function(e){const t=document.createElement(e);t.className=Te(this.classes);for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(t.style[r]=this.style[r]);for(const r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},Qa=function(e){let t=`<${e}`;this.classes.length&&(t+=` class="${H.escape(Te(this.classes))}"`);let r="";for(const s in this.style)Object.prototype.hasOwnProperty.call(this.style,s)&&(r+=`${H.hyphenate(s)}:${this.style[s]};`);r&&(t+=` style="${r}"`);for(const s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&(t+=` ${s}="${H.escape(this.attributes[s])}"`);t+=">";for(let s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+=`</${e}>`,t};class Ds{constructor(t,r,s){Ka.call(this,t,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}toNode(){return Ya.call(this,"span")}toMarkup(){return Qa.call(this,"span")}}let ei=class{constructor(t){this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return H.escape(this.text)}};class Os{constructor(t,r,s){this.href=t,this.classes=r,this.children=s||[]}toNode(){const t=document.createElement("a");t.setAttribute("href",this.href),this.classes.length>0&&(t.className=Te(this.classes));for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){let t=`<a href='${H.escape(this.href)}'`;this.classes.length>0&&(t+=` class="${H.escape(Te(this.classes))}"`),t+=">";for(let r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+="</a>",t}}class ti{constructor(t,r,s){this.alt=r,this.src=t,this.classes=["mord"],this.style=s}hasClass(t){return this.classes.includes(t)}toNode(){const t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(t.style[r]=this.style[r]);return t}toMarkup(){let t=`<img src='${this.src}' alt='${this.alt}'`,r="";for(const s in this.style)Object.prototype.hasOwnProperty.call(this.style,s)&&(r+=`${H.hyphenate(s)}:${this.style[s]};`);return r&&(t+=` style="${H.escape(r)}"`),t+=">",t}}function ri(e){return new kr(e)}class se{constructor(t,r,s,o){this.type=t,this.attributes={},this.children=r||[],this.classes=s||[],this.style=o||{},this.label=""}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}setLabel(t){this.label=t}toNode(){const t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Te(this.classes));for(const r in this.style)Object.prototype.hasOwnProperty.call(this.style,r)&&(t.style[r]=this.style[r]);for(let r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){let t="<"+this.type;for(const s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&(t+=" "+s+'="',t+=H.escape(this.attributes[s]),t+='"');this.classes.length>0&&(t+=` class="${H.escape(Te(this.classes))}"`);let r="";for(const s in this.style)Object.prototype.hasOwnProperty.call(this.style,s)&&(r+=`${H.hyphenate(s)}:${this.style[s]};`);r&&(t+=` style="${r}"`),t+=">";for(let s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Ne{constructor(t){this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return H.escape(this.toText())}toText(){return this.text}}const Ar=e=>{let t;return e.length===1&&e[0].type==="mrow"?(t=e.pop(),t.type="mstyle"):t=new se("mstyle",e),t};var g={MathNode:se,TextNode:Ne,newDocumentFragment:ri};const Ae=e=>{let t=0;if(e.body&&Array.isArray(e.body))for(const r of e.body)t+=Ae(r);else if(e.body)t+=Ae(e.body);else if(e.type==="supsub")t+=Ae(e.base),e.sub&&(t+=.7*Ae(e.sub)),e.sup&&(t+=.7*Ae(e.sup));else if(e.type==="mathord"||e.type==="textord")for(const r of e.text.split("")){const s=r.codePointAt(0);96<s&&s<123||944<s&&s<970?t+=.56:47<s&&s<58?t+=.5:t+=.92}else t+=1;return t},ni={widehat:"^",widecheck:"Ë‡",widetilde:"~",wideparen:"âœ",utilde:"~",overleftarrow:"â†",underleftarrow:"â†",xleftarrow:"â†",overrightarrow:"â†’",underrightarrow:"â†’",xrightarrow:"â†’",underbrace:"âŸ",overbrace:"âž",overgroup:"â ",overparen:"âœ",undergroup:"â¡",underparen:"â",overleftrightarrow:"â†”",underleftrightarrow:"â†”",xleftrightarrow:"â†”",Overrightarrow:"â‡’",xRightarrow:"â‡’",overleftharpoon:"â†¼",xleftharpoonup:"â†¼",overrightharpoon:"â‡€",xrightharpoonup:"â‡€",xLeftarrow:"â‡",xLeftrightarrow:"â‡”",xhookleftarrow:"â†©",xhookrightarrow:"â†ª",xmapsto:"â†¦",xrightharpoondown:"â‡",xleftharpoondown:"â†½",xtwoheadleftarrow:"â†ž",xtwoheadrightarrow:"â† ",xlongequal:"=",xrightleftarrows:"â‡„",xtofrom:"â‡„",xleftrightharpoons:"â‡‹",xrightleftharpoons:"â‡Œ",yields:"â†’",yieldsLeft:"â†",mesomerism:"â†”",longrightharpoonup:"â‡€",longleftharpoondown:"â†½",eqrightharpoonup:"â‡€",eqleftharpoondown:"â†½","\\cdrightarrow":"â†’","\\cdleftarrow":"â†","\\cdlongequal":"=",yieldsLeftRight:"â‡„",chemequilibrium:"â‡Œ"},Ns=function(e){const t=new g.TextNode(ni[e.slice(1)]),r=new g.MathNode("mo",[t]);return r.setAttribute("stretchy","true"),r},si=["\\widetilde","\\widehat","\\widecheck","\\utilde"],oi=e=>{const t=Ns(e.label);if(si.includes(e.label)){const r=Ae(e.base);1<r&&r<1.6?t.classes.push("tml-crooked-2"):1.6<=r&&r<2.5?t.classes.push("tml-crooked-3"):2.5<=r&&t.classes.push("tml-crooked-4")}return t};var et={mathMLnode:Ns,accentNode:oi};const ai={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ii={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Q={math:{},text:{}};function n(e,t,r,s,o){Q[e][s]={group:t,replace:r},o&&r&&(Q[e][r]=Q[e][s])}const a="math",x="text",V="accent-token",v="bin",J="close",ke="inner",O="mathord",R="op-token",ee="open",Le="punct",m="rel",xe="spacing",p="textord";n(a,m,"â‰¡","\\equiv",!0);n(a,m,"â‰º","\\prec",!0);n(a,m,"â‰»","\\succ",!0);n(a,m,"âˆ¼","\\sim",!0);n(a,m,"âŸ‚","\\perp",!0);n(a,m,"âª¯","\\preceq",!0);n(a,m,"âª°","\\succeq",!0);n(a,m,"â‰ƒ","\\simeq",!0);n(a,m,"â‰Œ","\\backcong",!0);n(a,m,"|","\\mid",!0);n(a,m,"â‰ª","\\ll",!0);n(a,m,"â‰«","\\gg",!0);n(a,m,"â‰","\\asymp",!0);n(a,m,"âˆ¥","\\parallel");n(a,m,"âŒ£","\\smile",!0);n(a,m,"âŠ‘","\\sqsubseteq",!0);n(a,m,"âŠ’","\\sqsupseteq",!0);n(a,m,"â‰","\\doteq",!0);n(a,m,"âŒ¢","\\frown",!0);n(a,m,"âˆ‹","\\ni",!0);n(a,m,"âˆŒ","\\notni",!0);n(a,m,"âˆ","\\propto",!0);n(a,m,"âŠ¢","\\vdash",!0);n(a,m,"âŠ£","\\dashv",!0);n(a,m,"âˆ‹","\\owns");n(a,m,"â‰˜","\\arceq",!0);n(a,m,"â‰™","\\wedgeq",!0);n(a,m,"â‰š","\\veeeq",!0);n(a,m,"â‰›","\\stareq",!0);n(a,m,"â‰","\\eqdef",!0);n(a,m,"â‰ž","\\measeq",!0);n(a,m,"â‰Ÿ","\\questeq",!0);n(a,m,"â‰ ","\\ne",!0);n(a,m,"â‰ ","\\neq");n(a,m,"â©µ","\\eqeq",!0);n(a,m,"â©¶","\\eqeqeq",!0);n(a,m,"âˆ·","\\dblcolon",!0);n(a,m,"â‰”","\\coloneqq",!0);n(a,m,"â‰•","\\eqqcolon",!0);n(a,m,"âˆ¹","\\eqcolon",!0);n(a,m,"â©´","\\Coloneqq",!0);n(a,Le,".","\\ldotp");n(a,Le,"Â·","\\cdotp");n(a,p,"#","\\#");n(x,p,"#","\\#");n(a,p,"&","\\&");n(x,p,"&","\\&");n(a,p,"â„µ","\\aleph",!0);n(a,p,"âˆ€","\\forall",!0);n(a,p,"â„","\\hbar",!0);n(a,p,"âˆƒ","\\exists",!0);n(a,v,"âˆ‡","\\nabla",!0);n(a,p,"â™­","\\flat",!0);n(a,p,"â„“","\\ell",!0);n(a,p,"â™®","\\natural",!0);n(a,p,"â„«","\\Angstrom",!0);n(x,p,"â„«","\\Angstrom",!0);n(a,p,"â™£","\\clubsuit",!0);n(a,p,"â™§","\\varclubsuit",!0);n(a,p,"â„˜","\\wp",!0);n(a,p,"â™¯","\\sharp",!0);n(a,p,"â™¢","\\diamondsuit",!0);n(a,p,"â™¦","\\vardiamondsuit",!0);n(a,p,"â„œ","\\Re",!0);n(a,p,"â™¡","\\heartsuit",!0);n(a,p,"â™¥","\\varheartsuit",!0);n(a,p,"â„‘","\\Im",!0);n(a,p,"â™ ","\\spadesuit",!0);n(a,p,"â™¤","\\varspadesuit",!0);n(a,p,"â™€","\\female",!0);n(a,p,"â™‚","\\male",!0);n(a,p,"Â§","\\S",!0);n(x,p,"Â§","\\S");n(a,p,"Â¶","\\P",!0);n(x,p,"Â¶","\\P");n(x,p,"â˜º","\\smiley",!0);n(a,p,"â˜º","\\smiley",!0);n(a,p,"â€ ","\\dag");n(x,p,"â€ ","\\dag");n(x,p,"â€ ","\\textdagger");n(a,p,"â€¡","\\ddag");n(x,p,"â€¡","\\ddag");n(x,p,"â€¡","\\textdaggerdbl");n(a,J,"âŽ±","\\rmoustache",!0);n(a,ee,"âŽ°","\\lmoustache",!0);n(a,J,"âŸ¯","\\rgroup",!0);n(a,ee,"âŸ®","\\lgroup",!0);n(a,v,"âˆ“","\\mp",!0);n(a,v,"âŠ–","\\ominus",!0);n(a,v,"âŠŽ","\\uplus",!0);n(a,v,"âŠ“","\\sqcap",!0);n(a,v,"âˆ—","\\ast");n(a,v,"âŠ”","\\sqcup",!0);n(a,v,"â—¯","\\bigcirc",!0);n(a,v,"âˆ™","\\bullet",!0);n(a,v,"â€¡","\\ddagger");n(a,v,"â‰€","\\wr",!0);n(a,v,"â¨¿","\\amalg");n(a,v,"&","\\And");n(a,v,"â«½","\\sslash",!0);n(a,m,"âŸµ","\\longleftarrow",!0);n(a,m,"â‡","\\Leftarrow",!0);n(a,m,"âŸ¸","\\Longleftarrow",!0);n(a,m,"âŸ¶","\\longrightarrow",!0);n(a,m,"â‡’","\\Rightarrow",!0);n(a,m,"âŸ¹","\\Longrightarrow",!0);n(a,m,"â†”","\\leftrightarrow",!0);n(a,m,"âŸ·","\\longleftrightarrow",!0);n(a,m,"â‡”","\\Leftrightarrow",!0);n(a,m,"âŸº","\\Longleftrightarrow",!0);n(a,m,"â†¤","\\mapsfrom",!0);n(a,m,"â†¦","\\mapsto",!0);n(a,m,"âŸ¼","\\longmapsto",!0);n(a,m,"â†—","\\nearrow",!0);n(a,m,"â†©","\\hookleftarrow",!0);n(a,m,"â†ª","\\hookrightarrow",!0);n(a,m,"â†˜","\\searrow",!0);n(a,m,"â†¼","\\leftharpoonup",!0);n(a,m,"â‡€","\\rightharpoonup",!0);n(a,m,"â†™","\\swarrow",!0);n(a,m,"â†½","\\leftharpoondown",!0);n(a,m,"â‡","\\rightharpoondown",!0);n(a,m,"â†–","\\nwarrow",!0);n(a,m,"â‡Œ","\\rightleftharpoons",!0);n(a,O,"â†¯","\\lightning",!0);n(a,O,"âˆŽ","\\QED",!0);n(a,O,"â€°","\\permil",!0);n(x,p,"â€°","\\permil");n(a,O,"â˜‰","\\astrosun",!0);n(a,O,"â˜¼","\\sun",!0);n(a,O,"â˜¾","\\leftmoon",!0);n(a,O,"â˜½","\\rightmoon",!0);n(a,O,"âŠ•","\\Earth");n(a,m,"â‰®","\\nless",!0);n(a,m,"âª‡","\\lneq",!0);n(a,m,"â‰¨","\\lneqq",!0);n(a,m,"â‰¨ï¸€","\\lvertneqq");n(a,m,"â‹¦","\\lnsim",!0);n(a,m,"âª‰","\\lnapprox",!0);n(a,m,"âŠ€","\\nprec",!0);n(a,m,"â‹ ","\\npreceq",!0);n(a,m,"â‹¨","\\precnsim",!0);n(a,m,"âª¹","\\precnapprox",!0);n(a,m,"â‰","\\nsim",!0);n(a,m,"âˆ¤","\\nmid",!0);n(a,m,"âˆ¤","\\nshortmid");n(a,m,"âŠ¬","\\nvdash",!0);n(a,m,"âŠ­","\\nvDash",!0);n(a,m,"â‹ª","\\ntriangleleft");n(a,m,"â‹¬","\\ntrianglelefteq",!0);n(a,m,"âŠ„","\\nsubset",!0);n(a,m,"âŠ…","\\nsupset",!0);n(a,m,"âŠŠ","\\subsetneq",!0);n(a,m,"âŠŠï¸€","\\varsubsetneq");n(a,m,"â«‹","\\subsetneqq",!0);n(a,m,"â«‹ï¸€","\\varsubsetneqq");n(a,m,"â‰¯","\\ngtr",!0);n(a,m,"âªˆ","\\gneq",!0);n(a,m,"â‰©","\\gneqq",!0);n(a,m,"â‰©ï¸€","\\gvertneqq");n(a,m,"â‹§","\\gnsim",!0);n(a,m,"âªŠ","\\gnapprox",!0);n(a,m,"âŠ","\\nsucc",!0);n(a,m,"â‹¡","\\nsucceq",!0);n(a,m,"â‹©","\\succnsim",!0);n(a,m,"âªº","\\succnapprox",!0);n(a,m,"â‰†","\\ncong",!0);n(a,m,"âˆ¦","\\nparallel",!0);n(a,m,"âˆ¦","\\nshortparallel");n(a,m,"âŠ¯","\\nVDash",!0);n(a,m,"â‹«","\\ntriangleright");n(a,m,"â‹­","\\ntrianglerighteq",!0);n(a,m,"âŠ‹","\\supsetneq",!0);n(a,m,"âŠ‹","\\varsupsetneq");n(a,m,"â«Œ","\\supsetneqq",!0);n(a,m,"â«Œï¸€","\\varsupsetneqq");n(a,m,"âŠ®","\\nVdash",!0);n(a,m,"âªµ","\\precneqq",!0);n(a,m,"âª¶","\\succneqq",!0);n(a,v,"âŠ´","\\unlhd");n(a,v,"âŠµ","\\unrhd");n(a,m,"â†š","\\nleftarrow",!0);n(a,m,"â†›","\\nrightarrow",!0);n(a,m,"â‡","\\nLeftarrow",!0);n(a,m,"â‡","\\nRightarrow",!0);n(a,m,"â†®","\\nleftrightarrow",!0);n(a,m,"â‡Ž","\\nLeftrightarrow",!0);n(a,m,"â–³","\\vartriangle");n(a,p,"â„","\\hslash");n(a,p,"â–½","\\triangledown");n(a,p,"â—Š","\\lozenge");n(a,p,"â“ˆ","\\circledS");n(a,p,"Â®","\\circledR",!0);n(x,p,"Â®","\\circledR");n(x,p,"Â®","\\textregistered");n(a,p,"âˆ¡","\\measuredangle",!0);n(a,p,"âˆ„","\\nexists");n(a,p,"â„§","\\mho");n(a,p,"â„²","\\Finv",!0);n(a,p,"â…","\\Game",!0);n(a,p,"â€µ","\\backprime");n(a,p,"â€¶","\\backdprime");n(a,p,"â€·","\\backtrprime");n(a,p,"â–²","\\blacktriangle");n(a,p,"â–¼","\\blacktriangledown");n(a,p,"â– ","\\blacksquare");n(a,p,"â§«","\\blacklozenge");n(a,p,"â˜…","\\bigstar");n(a,p,"âˆ¢","\\sphericalangle",!0);n(a,p,"âˆ","\\complement",!0);n(a,p,"â•±","\\diagup");n(a,p,"â•²","\\diagdown");n(a,p,"â–¡","\\square");n(a,p,"â–¡","\\Box");n(a,p,"â—Š","\\Diamond");n(a,p,"Â¥","\\yen",!0);n(x,p,"Â¥","\\yen",!0);n(a,p,"âœ“","\\checkmark",!0);n(x,p,"âœ“","\\checkmark");n(a,p,"âœ—","\\ballotx",!0);n(x,p,"âœ—","\\ballotx");n(x,p,"â€¢","\\textbullet");n(a,p,"â„¶","\\beth",!0);n(a,p,"â„¸","\\daleth",!0);n(a,p,"â„·","\\gimel",!0);n(a,p,"Ï","\\digamma",!0);n(a,p,"Ï°","\\varkappa");n(a,ee,"âŒœ","\\ulcorner",!0);n(a,J,"âŒ","\\urcorner",!0);n(a,ee,"âŒž","\\llcorner",!0);n(a,J,"âŒŸ","\\lrcorner",!0);n(a,m,"â‰¦","\\leqq",!0);n(a,m,"â©½","\\leqslant",!0);n(a,m,"âª•","\\eqslantless",!0);n(a,m,"â‰²","\\lesssim",!0);n(a,m,"âª…","\\lessapprox",!0);n(a,m,"â‰Š","\\approxeq",!0);n(a,v,"â‹–","\\lessdot");n(a,m,"â‹˜","\\lll",!0);n(a,m,"â‰¶","\\lessgtr",!0);n(a,m,"â‹š","\\lesseqgtr",!0);n(a,m,"âª‹","\\lesseqqgtr",!0);n(a,m,"â‰‘","\\doteqdot");n(a,m,"â‰“","\\risingdotseq",!0);n(a,m,"â‰’","\\fallingdotseq",!0);n(a,m,"âˆ½","\\backsim",!0);n(a,m,"â‹","\\backsimeq",!0);n(a,m,"â«…","\\subseteqq",!0);n(a,m,"â‹","\\Subset",!0);n(a,m,"âŠ","\\sqsubset",!0);n(a,m,"â‰¼","\\preccurlyeq",!0);n(a,m,"â‹ž","\\curlyeqprec",!0);n(a,m,"â‰¾","\\precsim",!0);n(a,m,"âª·","\\precapprox",!0);n(a,m,"âŠ²","\\vartriangleleft");n(a,m,"âŠ´","\\trianglelefteq");n(a,m,"âŠ¨","\\vDash",!0);n(a,m,"âŠ«","\\VDash",!0);n(a,m,"âŠª","\\Vvdash",!0);n(a,m,"âŒ£","\\smallsmile");n(a,m,"âŒ¢","\\smallfrown");n(a,m,"â‰","\\bumpeq",!0);n(a,m,"â‰Ž","\\Bumpeq",!0);n(a,m,"â‰§","\\geqq",!0);n(a,m,"â©¾","\\geqslant",!0);n(a,m,"âª–","\\eqslantgtr",!0);n(a,m,"â‰³","\\gtrsim",!0);n(a,m,"âª†","\\gtrapprox",!0);n(a,v,"â‹—","\\gtrdot");n(a,m,"â‹™","\\ggg",!0);n(a,m,"â‰·","\\gtrless",!0);n(a,m,"â‹›","\\gtreqless",!0);n(a,m,"âªŒ","\\gtreqqless",!0);n(a,m,"â‰–","\\eqcirc",!0);n(a,m,"â‰—","\\circeq",!0);n(a,m,"â‰œ","\\triangleq",!0);n(a,m,"âˆ¼","\\thicksim");n(a,m,"â‰ˆ","\\thickapprox");n(a,m,"â«†","\\supseteqq",!0);n(a,m,"â‹‘","\\Supset",!0);n(a,m,"âŠ","\\sqsupset",!0);n(a,m,"â‰½","\\succcurlyeq",!0);n(a,m,"â‹Ÿ","\\curlyeqsucc",!0);n(a,m,"â‰¿","\\succsim",!0);n(a,m,"âª¸","\\succapprox",!0);n(a,m,"âŠ³","\\vartriangleright");n(a,m,"âŠµ","\\trianglerighteq");n(a,m,"âŠ©","\\Vdash",!0);n(a,m,"âˆ£","\\shortmid");n(a,m,"âˆ¥","\\shortparallel");n(a,m,"â‰¬","\\between",!0);n(a,m,"â‹”","\\pitchfork",!0);n(a,m,"âˆ","\\varpropto");n(a,m,"â—€","\\blacktriangleleft");n(a,m,"âˆ´","\\therefore",!0);n(a,m,"âˆ","\\backepsilon");n(a,m,"â–¶","\\blacktriangleright");n(a,m,"âˆµ","\\because",!0);n(a,m,"â‹˜","\\llless");n(a,m,"â‹™","\\gggtr");n(a,v,"âŠ²","\\lhd");n(a,v,"âŠ³","\\rhd");n(a,m,"â‰‚","\\eqsim",!0);n(a,m,"â‰‘","\\Doteq",!0);n(a,m,"â¥½","\\strictif",!0);n(a,m,"â¥¼","\\strictfi",!0);n(a,v,"âˆ”","\\dotplus",!0);n(a,v,"âˆ–","\\smallsetminus");n(a,v,"â‹’","\\Cap",!0);n(a,v,"â‹“","\\Cup",!0);n(a,v,"â©ž","\\doublebarwedge",!0);n(a,v,"âŠŸ","\\boxminus",!0);n(a,v,"âŠž","\\boxplus",!0);n(a,v,"â§„","\\boxslash",!0);n(a,v,"â‹‡","\\divideontimes",!0);n(a,v,"â‹‰","\\ltimes",!0);n(a,v,"â‹Š","\\rtimes",!0);n(a,v,"â‹‹","\\leftthreetimes",!0);n(a,v,"â‹Œ","\\rightthreetimes",!0);n(a,v,"â‹","\\curlywedge",!0);n(a,v,"â‹Ž","\\curlyvee",!0);n(a,v,"âŠ","\\circleddash",!0);n(a,v,"âŠ›","\\circledast",!0);n(a,v,"âŠº","\\intercal",!0);n(a,v,"â‹’","\\doublecap");n(a,v,"â‹“","\\doublecup");n(a,v,"âŠ ","\\boxtimes",!0);n(a,v,"â‹ˆ","\\bowtie",!0);n(a,v,"â‹ˆ","\\Join");n(a,v,"âŸ•","\\leftouterjoin",!0);n(a,v,"âŸ–","\\rightouterjoin",!0);n(a,v,"âŸ—","\\fullouterjoin",!0);n(a,v,"âˆ¸","\\dotminus",!0);n(a,v,"âŸ‘","\\wedgedot",!0);n(a,v,"âŸ‡","\\veedot",!0);n(a,v,"â©¢","\\doublebarvee",!0);n(a,v,"â©£","\\veedoublebar",!0);n(a,v,"â©Ÿ","\\wedgebar",!0);n(a,v,"â© ","\\wedgedoublebar",!0);n(a,v,"â©”","\\Vee",!0);n(a,v,"â©“","\\Wedge",!0);n(a,v,"â©ƒ","\\barcap",!0);n(a,v,"â©‚","\\barcup",!0);n(a,v,"â©ˆ","\\capbarcup",!0);n(a,v,"â©€","\\capdot",!0);n(a,v,"â©‡","\\capovercup",!0);n(a,v,"â©†","\\cupovercap",!0);n(a,v,"â©","\\closedvarcap",!0);n(a,v,"â©Œ","\\closedvarcup",!0);n(a,v,"â¨ª","\\minusdot",!0);n(a,v,"â¨«","\\minusfdots",!0);n(a,v,"â¨¬","\\minusrdots",!0);n(a,v,"âŠ»","\\Xor",!0);n(a,v,"âŠ¼","\\Nand",!0);n(a,v,"âŠ½","\\Nor",!0);n(a,v,"âŠ½","\\barvee");n(a,v,"â«´","\\interleave",!0);n(a,v,"â§¢","\\shuffle",!0);n(a,v,"â«¶","\\threedotcolon",!0);n(a,v,"â¦‚","\\typecolon",!0);n(a,v,"âˆ¾","\\invlazys",!0);n(a,v,"â©‹","\\twocaps",!0);n(a,v,"â©Š","\\twocups",!0);n(a,v,"â©Ž","\\Sqcap",!0);n(a,v,"â©","\\Sqcup",!0);n(a,v,"â©–","\\veeonvee",!0);n(a,v,"â©•","\\wedgeonwedge",!0);n(a,v,"â§—","\\blackhourglass",!0);n(a,v,"â§†","\\boxast",!0);n(a,v,"â§ˆ","\\boxbox",!0);n(a,v,"â§‡","\\boxcircle",!0);n(a,v,"âŠœ","\\circledequal",!0);n(a,v,"â¦·","\\circledparallel",!0);n(a,v,"â¦¶","\\circledvert",!0);n(a,v,"â¦µ","\\circlehbar",!0);n(a,v,"âŸ¡","\\concavediamond",!0);n(a,v,"âŸ¢","\\concavediamondtickleft",!0);n(a,v,"âŸ£","\\concavediamondtickright",!0);n(a,v,"â‹„","\\diamond",!0);n(a,v,"â§–","\\hourglass",!0);n(a,v,"âŸ ","\\lozengeminus",!0);n(a,v,"âŒ½","\\obar",!0);n(a,v,"â¦¸","\\obslash",!0);n(a,v,"â¨¸","\\odiv",!0);n(a,v,"â§","\\ogreaterthan",!0);n(a,v,"â§€","\\olessthan",!0);n(a,v,"â¦¹","\\operp",!0);n(a,v,"â¨·","\\Otimes",!0);n(a,v,"â¨¶","\\otimeshat",!0);n(a,v,"â‹†","\\star",!0);n(a,v,"â–³","\\triangle",!0);n(a,v,"â¨º","\\triangleminus",!0);n(a,v,"â¨¹","\\triangleplus",!0);n(a,v,"â¨»","\\triangletimes",!0);n(a,v,"âŸ¤","\\whitesquaretickleft",!0);n(a,v,"âŸ¥","\\whitesquaretickright",!0);n(a,v,"â¨³","\\smashtimes",!0);n(a,m,"â‡¢","\\dashrightarrow",!0);n(a,m,"â‡ ","\\dashleftarrow",!0);n(a,m,"â‡‡","\\leftleftarrows",!0);n(a,m,"â‡†","\\leftrightarrows",!0);n(a,m,"â‡š","\\Lleftarrow",!0);n(a,m,"â†ž","\\twoheadleftarrow",!0);n(a,m,"â†¢","\\leftarrowtail",!0);n(a,m,"â†«","\\looparrowleft",!0);n(a,m,"â‡‹","\\leftrightharpoons",!0);n(a,m,"â†¶","\\curvearrowleft",!0);n(a,m,"â†º","\\circlearrowleft",!0);n(a,m,"â†°","\\Lsh",!0);n(a,m,"â‡ˆ","\\upuparrows",!0);n(a,m,"â†¿","\\upharpoonleft",!0);n(a,m,"â‡ƒ","\\downharpoonleft",!0);n(a,m,"âŠ¶","\\origof",!0);n(a,m,"âŠ·","\\imageof",!0);n(a,m,"âŠ¸","\\multimap",!0);n(a,m,"â†­","\\leftrightsquigarrow",!0);n(a,m,"â‡‰","\\rightrightarrows",!0);n(a,m,"â‡„","\\rightleftarrows",!0);n(a,m,"â† ","\\twoheadrightarrow",!0);n(a,m,"â†£","\\rightarrowtail",!0);n(a,m,"â†¬","\\looparrowright",!0);n(a,m,"â†·","\\curvearrowright",!0);n(a,m,"â†»","\\circlearrowright",!0);n(a,m,"â†±","\\Rsh",!0);n(a,m,"â‡Š","\\downdownarrows",!0);n(a,m,"â†¾","\\upharpoonright",!0);n(a,m,"â‡‚","\\downharpoonright",!0);n(a,m,"â‡","\\rightsquigarrow",!0);n(a,m,"â‡","\\leadsto");n(a,m,"â‡›","\\Rrightarrow",!0);n(a,m,"â†¾","\\restriction");n(a,p,"â€˜","`");n(a,p,"$","\\$");n(x,p,"$","\\$");n(x,p,"$","\\textdollar");n(a,p,"Â¢","\\cent");n(x,p,"Â¢","\\cent");n(a,p,"%","\\%");n(x,p,"%","\\%");n(a,p,"_","\\_");n(x,p,"_","\\_");n(x,p,"_","\\textunderscore");n(x,p,"â£","\\textvisiblespace",!0);n(a,p,"âˆ ","\\angle",!0);n(a,p,"âˆž","\\infty",!0);n(a,p,"â€²","\\prime");n(a,p,"â€³","\\dprime");n(a,p,"â€´","\\trprime");n(a,p,"â—","\\qprime");n(a,p,"â–³","\\triangle");n(x,p,"Î‘","\\Alpha",!0);n(x,p,"Î’","\\Beta",!0);n(x,p,"Î“","\\Gamma",!0);n(x,p,"Î”","\\Delta",!0);n(x,p,"Î•","\\Epsilon",!0);n(x,p,"Î–","\\Zeta",!0);n(x,p,"Î—","\\Eta",!0);n(x,p,"Î˜","\\Theta",!0);n(x,p,"Î™","\\Iota",!0);n(x,p,"Îš","\\Kappa",!0);n(x,p,"Î›","\\Lambda",!0);n(x,p,"Îœ","\\Mu",!0);n(x,p,"Î","\\Nu",!0);n(x,p,"Îž","\\Xi",!0);n(x,p,"ÎŸ","\\Omicron",!0);n(x,p,"Î ","\\Pi",!0);n(x,p,"Î¡","\\Rho",!0);n(x,p,"Î£","\\Sigma",!0);n(x,p,"Î¤","\\Tau",!0);n(x,p,"Î¥","\\Upsilon",!0);n(x,p,"Î¦","\\Phi",!0);n(x,p,"Î§","\\Chi",!0);n(x,p,"Î¨","\\Psi",!0);n(x,p,"Î©","\\Omega",!0);n(a,O,"Î‘","\\Alpha",!0);n(a,O,"Î’","\\Beta",!0);n(a,O,"Î“","\\Gamma",!0);n(a,O,"Î”","\\Delta",!0);n(a,O,"Î•","\\Epsilon",!0);n(a,O,"Î–","\\Zeta",!0);n(a,O,"Î—","\\Eta",!0);n(a,O,"Î˜","\\Theta",!0);n(a,O,"Î™","\\Iota",!0);n(a,O,"Îš","\\Kappa",!0);n(a,O,"Î›","\\Lambda",!0);n(a,O,"Îœ","\\Mu",!0);n(a,O,"Î","\\Nu",!0);n(a,O,"Îž","\\Xi",!0);n(a,O,"ÎŸ","\\Omicron",!0);n(a,O,"Î ","\\Pi",!0);n(a,O,"Î¡","\\Rho",!0);n(a,O,"Î£","\\Sigma",!0);n(a,O,"Î¤","\\Tau",!0);n(a,O,"Î¥","\\Upsilon",!0);n(a,O,"Î¦","\\Phi",!0);n(a,O,"Î§","\\Chi",!0);n(a,O,"Î¨","\\Psi",!0);n(a,O,"Î©","\\Omega",!0);n(a,ee,"Â¬","\\neg",!0);n(a,ee,"Â¬","\\lnot");n(a,p,"âŠ¤","\\top");n(a,p,"âŠ¥","\\bot");n(a,p,"âˆ…","\\emptyset");n(a,p,"âŒ€","\\varnothing");n(a,O,"Î±","\\alpha",!0);n(a,O,"Î²","\\beta",!0);n(a,O,"Î³","\\gamma",!0);n(a,O,"Î´","\\delta",!0);n(a,O,"Ïµ","\\epsilon",!0);n(a,O,"Î¶","\\zeta",!0);n(a,O,"Î·","\\eta",!0);n(a,O,"Î¸","\\theta",!0);n(a,O,"Î¹","\\iota",!0);n(a,O,"Îº","\\kappa",!0);n(a,O,"Î»","\\lambda",!0);n(a,O,"Î¼","\\mu",!0);n(a,O,"Î½","\\nu",!0);n(a,O,"Î¾","\\xi",!0);n(a,O,"Î¿","\\omicron",!0);n(a,O,"Ï€","\\pi",!0);n(a,O,"Ï","\\rho",!0);n(a,O,"Ïƒ","\\sigma",!0);n(a,O,"Ï„","\\tau",!0);n(a,O,"Ï…","\\upsilon",!0);n(a,O,"Ï•","\\phi",!0);n(a,O,"Ï‡","\\chi",!0);n(a,O,"Ïˆ","\\psi",!0);n(a,O,"Ï‰","\\omega",!0);n(a,O,"Îµ","\\varepsilon",!0);n(a,O,"Ï‘","\\vartheta",!0);n(a,O,"Ï–","\\varpi",!0);n(a,O,"Ï±","\\varrho",!0);n(a,O,"Ï‚","\\varsigma",!0);n(a,O,"Ï†","\\varphi",!0);n(a,O,"Ï˜","\\Coppa",!0);n(a,O,"Ï™","\\coppa",!0);n(a,O,"Ï™","\\varcoppa",!0);n(a,O,"Ïž","\\Koppa",!0);n(a,O,"ÏŸ","\\koppa",!0);n(a,O,"Ï ","\\Sampi",!0);n(a,O,"Ï¡","\\sampi",!0);n(a,O,"Ïš","\\Stigma",!0);n(a,O,"Ï›","\\stigma",!0);n(a,O,"â««","\\Bot");n(a,p,"Ã°","\\eth",!0);n(x,p,"Ã°","Ã°");n(a,p,"Ã…","\\AA");n(x,p,"Ã…","\\AA",!0);n(a,p,"Ã†","\\AE",!0);n(x,p,"Ã†","\\AE",!0);n(a,p,"Ã","\\DH",!0);n(x,p,"Ã","\\DH",!0);n(a,p,"Ãž","\\TH",!0);n(x,p,"Ãž","\\TH",!0);n(a,p,"ÃŸ","\\ss",!0);n(x,p,"ÃŸ","\\ss",!0);n(a,p,"Ã¥","\\aa");n(x,p,"Ã¥","\\aa",!0);n(a,p,"Ã¦","\\ae",!0);n(x,p,"Ã¦","\\ae",!0);n(a,p,"Ã°","\\dh");n(x,p,"Ã°","\\dh",!0);n(a,p,"Ã¾","\\th",!0);n(x,p,"Ã¾","\\th",!0);n(a,p,"Ä","\\DJ",!0);n(x,p,"Ä","\\DJ",!0);n(a,p,"Ä‘","\\dj",!0);n(x,p,"Ä‘","\\dj",!0);n(a,p,"Å","\\L",!0);n(x,p,"Å","\\L",!0);n(a,p,"Å","\\l",!0);n(x,p,"Å","\\l",!0);n(a,p,"ÅŠ","\\NG",!0);n(x,p,"ÅŠ","\\NG",!0);n(a,p,"Å‹","\\ng",!0);n(x,p,"Å‹","\\ng",!0);n(a,p,"Å’","\\OE",!0);n(x,p,"Å’","\\OE",!0);n(a,p,"Å“","\\oe",!0);n(x,p,"Å“","\\oe",!0);n(a,v,"âˆ—","âˆ—",!0);n(a,v,"+","+");n(a,v,"âˆ—","*");n(a,v,"â„","/",!0);n(a,v,"â„","â„");n(a,v,"âˆ’","-",!0);n(a,v,"â‹…","\\cdot",!0);n(a,v,"âˆ˜","\\circ",!0);n(a,v,"Ã·","\\div",!0);n(a,v,"Â±","\\pm",!0);n(a,v,"Ã—","\\times",!0);n(a,v,"âˆ©","\\cap",!0);n(a,v,"âˆª","\\cup",!0);n(a,v,"âˆ–","\\setminus",!0);n(a,v,"âˆ§","\\land");n(a,v,"âˆ¨","\\lor");n(a,v,"âˆ§","\\wedge",!0);n(a,v,"âˆ¨","\\vee",!0);n(a,ee,"âŸ¦","\\llbracket",!0);n(a,J,"âŸ§","\\rrbracket",!0);n(a,ee,"âŸ¨","\\langle",!0);n(a,ee,"âŸª","\\lAngle",!0);n(a,ee,"â¦‰","\\llangle",!0);n(a,ee,"|","\\lvert");n(a,ee,"â€–","\\lVert",!0);n(a,p,"!","\\oc");n(a,p,"?","\\wn");n(a,p,"â†“","\\shpos");n(a,p,"â†•","\\shift");n(a,p,"â†‘","\\shneg");n(a,J,"?","?");n(a,J,"!","!");n(a,J,"â€¼","â€¼");n(a,J,"âŸ©","\\rangle",!0);n(a,J,"âŸ«","\\rAngle",!0);n(a,J,"â¦Š","\\rrangle",!0);n(a,J,"|","\\rvert");n(a,J,"â€–","\\rVert");n(a,ee,"â¦ƒ","\\lBrace",!0);n(a,J,"â¦„","\\rBrace",!0);n(a,m,"=","\\equal",!0);n(a,m,":",":");n(a,m,"â‰ˆ","\\approx",!0);n(a,m,"â‰…","\\cong",!0);n(a,m,"â‰¥","\\ge");n(a,m,"â‰¥","\\geq",!0);n(a,m,"â†","\\gets");n(a,m,">","\\gt",!0);n(a,m,"âˆˆ","\\in",!0);n(a,m,"âˆ‰","\\notin",!0);n(a,m,"î€ ","\\@not");n(a,m,"âŠ‚","\\subset",!0);n(a,m,"âŠƒ","\\supset",!0);n(a,m,"âŠ†","\\subseteq",!0);n(a,m,"âŠ‡","\\supseteq",!0);n(a,m,"âŠˆ","\\nsubseteq",!0);n(a,m,"âŠˆ","\\nsubseteqq");n(a,m,"âŠ‰","\\nsupseteq",!0);n(a,m,"âŠ‰","\\nsupseteqq");n(a,m,"âŠ¨","\\models");n(a,m,"â†","\\leftarrow",!0);n(a,m,"â‰¤","\\le");n(a,m,"â‰¤","\\leq",!0);n(a,m,"<","\\lt",!0);n(a,m,"â†’","\\rightarrow",!0);n(a,m,"â†’","\\to");n(a,m,"â‰±","\\ngeq",!0);n(a,m,"â‰±","\\ngeqq");n(a,m,"â‰±","\\ngeqslant");n(a,m,"â‰°","\\nleq",!0);n(a,m,"â‰°","\\nleqq");n(a,m,"â‰°","\\nleqslant");n(a,m,"â««","\\Perp",!0);n(a,xe,"Â ","\\ ");n(a,xe,"Â ","\\space");n(a,xe,"Â ","\\nobreakspace");n(x,xe,"Â ","\\ ");n(x,xe,"Â "," ");n(x,xe,"Â ","\\space");n(x,xe,"Â ","\\nobreakspace");n(a,xe,null,"\\nobreak");n(a,xe,null,"\\allowbreak");n(a,Le,",",",");n(x,Le,":",":");n(a,Le,";",";");n(a,v,"âŠ¼","\\barwedge");n(a,v,"âŠ»","\\veebar");n(a,v,"âŠ™","\\odot",!0);n(a,v,"âŠ•ï¸Ž","\\oplus");n(a,v,"âŠ—","\\otimes",!0);n(a,p,"âˆ‚","\\partial",!0);n(a,v,"âŠ˜","\\oslash",!0);n(a,v,"âŠš","\\circledcirc",!0);n(a,v,"âŠ¡","\\boxdot",!0);n(a,v,"â–³","\\bigtriangleup");n(a,v,"â–½","\\bigtriangledown");n(a,v,"â€ ","\\dagger");n(a,v,"â‹„","\\diamond");n(a,v,"â—ƒ","\\triangleleft");n(a,v,"â–¹","\\triangleright");n(a,ee,"{","\\{");n(x,p,"{","\\{");n(x,p,"{","\\textbraceleft");n(a,J,"}","\\}");n(x,p,"}","\\}");n(x,p,"}","\\textbraceright");n(a,ee,"{","\\lbrace");n(a,J,"}","\\rbrace");n(a,ee,"[","\\lbrack",!0);n(x,p,"[","\\lbrack",!0);n(a,J,"]","\\rbrack",!0);n(x,p,"]","\\rbrack",!0);n(a,ee,"(","\\lparen",!0);n(a,J,")","\\rparen",!0);n(a,ee,"â¦‡","\\llparenthesis",!0);n(a,J,"â¦ˆ","\\rrparenthesis",!0);n(x,p,"<","\\textless",!0);n(x,p,">","\\textgreater",!0);n(a,ee,"âŒŠ","\\lfloor",!0);n(a,J,"âŒ‹","\\rfloor",!0);n(a,ee,"âŒˆ","\\lceil",!0);n(a,J,"âŒ‰","\\rceil",!0);n(a,p,"\\","\\backslash");n(a,p,"|","|");n(a,p,"|","\\vert");n(x,p,"|","\\textbar",!0);n(a,p,"â€–","\\|");n(a,p,"â€–","\\Vert");n(x,p,"â€–","\\textbardbl");n(x,p,"~","\\textasciitilde");n(x,p,"\\","\\textbackslash");n(x,p,"^","\\textasciicircum");n(a,m,"â†‘","\\uparrow",!0);n(a,m,"â‡‘","\\Uparrow",!0);n(a,m,"â†“","\\downarrow",!0);n(a,m,"â‡“","\\Downarrow",!0);n(a,m,"â†•","\\updownarrow",!0);n(a,m,"â‡•","\\Updownarrow",!0);n(a,R,"âˆ","\\coprod");n(a,R,"â‹","\\bigvee");n(a,R,"â‹€","\\bigwedge");n(a,R,"â¨„","\\biguplus");n(a,R,"â¨„","\\bigcupplus");n(a,R,"â¨ƒ","\\bigcupdot");n(a,R,"â¨‡","\\bigdoublevee");n(a,R,"â¨ˆ","\\bigdoublewedge");n(a,R,"â‹‚","\\bigcap");n(a,R,"â‹ƒ","\\bigcup");n(a,R,"âˆ«","\\int");n(a,R,"âˆ«","\\intop");n(a,R,"âˆ¬","\\iint");n(a,R,"âˆ­","\\iiint");n(a,R,"âˆ","\\prod");n(a,R,"âˆ‘","\\sum");n(a,R,"â¨‚","\\bigotimes");n(a,R,"â¨","\\bigoplus");n(a,R,"â¨€","\\bigodot");n(a,R,"â¨‰","\\bigtimes");n(a,R,"âˆ®","\\oint");n(a,R,"âˆ¯","\\oiint");n(a,R,"âˆ°","\\oiiint");n(a,R,"âˆ±","\\intclockwise");n(a,R,"âˆ²","\\varointclockwise");n(a,R,"â¨Œ","\\iiiint");n(a,R,"â¨","\\intbar");n(a,R,"â¨Ž","\\intBar");n(a,R,"â¨","\\fint");n(a,R,"â¨’","\\rppolint");n(a,R,"â¨“","\\scpolint");n(a,R,"â¨•","\\pointint");n(a,R,"â¨–","\\sqint");n(a,R,"â¨—","\\intlarhk");n(a,R,"â¨˜","\\intx");n(a,R,"â¨™","\\intcap");n(a,R,"â¨š","\\intcup");n(a,R,"â¨…","\\bigsqcap");n(a,R,"â¨†","\\bigsqcup");n(a,R,"âˆ«","\\smallint");n(x,ke,"â€¦","\\textellipsis");n(a,ke,"â€¦","\\mathellipsis");n(x,ke,"â€¦","\\ldots",!0);n(a,ke,"â€¦","\\ldots",!0);n(a,ke,"â‹°","\\iddots",!0);n(a,ke,"â‹¯","\\@cdots",!0);n(a,ke,"â‹±","\\ddots",!0);n(a,p,"â‹®","\\varvdots");n(x,p,"â‹®","\\varvdots");n(a,V,"Â´","\\acute");n(a,V,"`","\\grave");n(a,V,"Â¨","\\ddot");n(a,V,"â€¦","\\dddot");n(a,V,"â€¦.","\\ddddot");n(a,V,"~","\\tilde");n(a,V,"â€¾","\\bar");n(a,V,"Ë˜","\\breve");n(a,V,"Ë‡","\\check");n(a,V,"^","\\hat");n(a,V,"â†’","\\vec");n(a,V,"Ë™","\\dot");n(a,V,"Ëš","\\mathring");n(a,O,"Ä±","\\imath",!0);n(a,O,"È·","\\jmath",!0);n(a,p,"Ä±","Ä±");n(a,p,"È·","È·");n(x,p,"Ä±","\\i",!0);n(x,p,"È·","\\j",!0);n(x,p,"Ã¸","\\o",!0);n(a,O,"Ã¸","\\o",!0);n(x,p,"Ã˜","\\O",!0);n(a,O,"Ã˜","\\O",!0);n(x,V,"ËŠ","\\'");n(x,V,"Ë‹","\\`");n(x,V,"Ë†","\\^");n(x,V,"~","\\~");n(x,V,"Ë‰","\\=");n(x,V,"Ë˜","\\u");n(x,V,"Ë™","\\.");n(x,V,"Â¸","\\c");n(x,V,"Ëš","\\r");n(x,V,"Ë‡","\\v");n(x,V,"Â¨",'\\"');n(x,V,"Ë","\\H");n(a,V,"ËŠ","\\'");n(a,V,"Ë‹","\\`");n(a,V,"Ë†","\\^");n(a,V,"~","\\~");n(a,V,"Ë‰","\\=");n(a,V,"Ë˜","\\u");n(a,V,"Ë™","\\.");n(a,V,"Â¸","\\c");n(a,V,"Ëš","\\r");n(a,V,"Ë‡","\\v");n(a,V,"Â¨",'\\"');n(a,V,"Ë","\\H");const li={"--":!0,"---":!0,"``":!0,"''":!0};n(x,p,"â€“","--",!0);n(x,p,"â€“","\\textendash");n(x,p,"â€”","---",!0);n(x,p,"â€”","\\textemdash");n(x,p,"â€˜","`",!0);n(x,p,"â€˜","\\textquoteleft");n(x,p,"â€™","'",!0);n(x,p,"â€™","\\textquoteright");n(x,p,"â€œ","``",!0);n(x,p,"â€œ","\\textquotedblleft");n(x,p,"â€","''",!0);n(x,p,"â€","\\textquotedblright");n(a,p,"Â°","\\degree",!0);n(x,p,"Â°","\\degree");n(x,p,"Â°","\\textdegree",!0);n(a,p,"Â£","\\pounds");n(a,p,"Â£","\\mathsterling",!0);n(x,p,"Â£","\\pounds");n(x,p,"Â£","\\textsterling",!0);n(a,p,"âœ ","\\maltese");n(x,p,"âœ ","\\maltese");n(a,p,"â‚¬","\\euro",!0);n(x,p,"â‚¬","\\euro",!0);n(x,p,"â‚¬","\\texteuro");n(a,p,"Â©","\\copyright",!0);n(x,p,"Â©","\\textcopyright");n(a,p,"âŒ€","\\diameter",!0);n(x,p,"âŒ€","\\diameter");n(a,p,"ð›¤","\\varGamma");n(a,p,"ð›¥","\\varDelta");n(a,p,"ð›©","\\varTheta");n(a,p,"ð›¬","\\varLambda");n(a,p,"ð›¯","\\varXi");n(a,p,"ð›±","\\varPi");n(a,p,"ð›´","\\varSigma");n(a,p,"ð›¶","\\varUpsilon");n(a,p,"ð›·","\\varPhi");n(a,p,"ð›¹","\\varPsi");n(a,p,"ð›º","\\varOmega");n(x,p,"ð›¤","\\varGamma");n(x,p,"ð›¥","\\varDelta");n(x,p,"ð›©","\\varTheta");n(x,p,"ð›¬","\\varLambda");n(x,p,"ð›¯","\\varXi");n(x,p,"ð›±","\\varPi");n(x,p,"ð›´","\\varSigma");n(x,p,"ð›¶","\\varUpsilon");n(x,p,"ð›·","\\varPhi");n(x,p,"ð›¹","\\varPsi");n(x,p,"ð›º","\\varOmega");const Vn='0123456789/@."';for(let e=0;e<Vn.length;e++){const t=Vn.charAt(e);n(a,p,t,t)}const Un='0123456789!@*()-=+";:?/.,';for(let e=0;e<Un.length;e++){const t=Un.charAt(e);n(x,p,t,t)}const Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let e=0;e<Ye.length;e++){const t=Ye.charAt(e);n(a,O,t,t),n(x,p,t,t)}const Hn="Ã‡ÃÃžÃ§Ã¾â„‚â„â„•â„™â„šâ„â„¤â„Žâ„â„Šâ„‹â„Œâ„â„‘â„’â„“â„˜â„›â„œâ„¬â„°â„±â„³â„­â„¨";for(let e=0;e<Hn.length;e++){const t=Hn.charAt(e);n(a,O,t,t),n(x,p,t,t)}let E="";for(let e=0;e<Ye.length;e++){E=String.fromCharCode(55349,56320+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56372+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56424+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56580+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56736+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56788+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56840+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56944+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,56632+e),n(a,O,E,E),n(x,p,E,E);const t=Ye.charAt(e);E=String.fromCharCode(55349,56476+e),n(a,O,t,E),n(x,p,t,E)}for(let e=0;e<10;e++)E=String.fromCharCode(55349,57294+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,57314+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,57324+e),n(a,O,E,E),n(x,p,E,E),E=String.fromCharCode(55349,57334+e),n(a,O,E,E),n(x,p,E,E);const ui="([{âŒŠâŒˆâŸ¨âŸ®âŽ°âŸ¦â¦ƒ",ci=")]}âŒ‹âŒ‰âŸ©âŸ¯âŽ±âŸ¦â¦„";function di(e,t,r){const s=[];let o=[],i=[],l=0,u=0,h=0;for(;u<e.length;){for(;e[u]instanceof kr;)e.splice(u,1,...e[u].children);const b=e[u];if(b.attributes&&b.attributes.linebreak&&b.attributes.linebreak==="newline"){i.length>0&&o.push(new g.MathNode("mrow",i)),o.push(b),i=[];const _=new g.MathNode("mtd",o);_.style.textAlign="left",s.push(new g.MathNode("mtr",[_])),o=[],u+=1;continue}if(i.push(b),b.type&&b.type==="mo"&&b.children.length===1&&!Object.prototype.hasOwnProperty.call(b.attributes,"movablelimits")){const _=b.children[0].text;if(ui.indexOf(_)>-1)h+=1;else if(ci.indexOf(_)>-1)h-=1;else if(h===0&&t==="="&&_==="="){if(l+=1,l>1){i.pop();const $=new g.MathNode("mrow",i);o.push($),i=[b]}}else if(h===0&&t==="tex"&&_!=="âˆ‡"){const $=u<e.length-1?e[u+1]:null;let M=!0;if(!($&&$.type==="mtext"&&$.attributes.linebreak&&$.attributes.linebreak==="nobreak"))for(let N=u+1;N<e.length;N++){const G=e[N];if(G.type&&G.type==="mspace"&&!(G.attributes.linebreak&&G.attributes.linebreak==="newline"))i.push(G),u+=1,G.attributes&&G.attributes.linebreak&&G.attributes.linebreak==="nobreak"&&(M=!1);else break}if(M){const N=new g.MathNode("mrow",i);o.push(N),i=[]}}}u+=1}if(i.length>0){const b=new g.MathNode("mrow",i);o.push(b)}if(s.length>0){const b=new g.MathNode("mtd",o);b.style.textAlign="left";const _=new g.MathNode("mtr",[b]);s.push(_);const $=new g.MathNode("mtable",s);return r||($.setAttribute("columnalign","left"),$.setAttribute("rowspacing","0em")),$}return g.newDocumentFragment(o)}const ie=function(e,t,r){return Q[t][e]&&Q[t][e].replace&&e.charCodeAt(0)!==55349&&!(Object.prototype.hasOwnProperty.call(li,e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=Q[t][e].replace),new g.TextNode(e)},Wn=(e,t)=>{if(e.children.length===0||e.children[e.children.length-1].type!=="mtext"){const r=new g.MathNode("mtext",[new g.TextNode(t.children[0].text)]);e.children.push(r)}else e.children[e.children.length-1].children[0].text+=t.children[0].text},tt=e=>{if(e.type!=="mrow"&&e.type!=="mstyle"||e.children.length===0)return e;const t=new g.MathNode("mrow");for(let r=0;r<e.children.length;r++){const s=e.children[r];if(s.type==="mtext"&&Object.keys(s.attributes).length===0)Wn(t,s);else if(s.type==="mrow"){let o=!0;for(let i=0;i<s.children.length;i++)if(s.children[i].type!=="mtext"||Object.keys(s.attributes).length!==0){o=!1;break}if(o)for(let i=0;i<s.children.length;i++){const l=s.children[i];Wn(t,l)}else t.children.push(s)}else t.children.push(s)}for(let r=0;r<t.children.length;r++)if(t.children[r].type==="mtext"){const s=t.children[r];s.children[0].text.charAt(0)===" "&&(s.children[0].text="Â "+s.children[0].text.slice(1));const o=s.children[0].text.length;o>0&&s.children[0].text.charAt(o-1)===" "&&(s.children[0].text=s.children[0].text.slice(0,-1)+"Â ");for(const[i,l]of Object.entries(e.attributes))s.attributes[i]=l}return t.children.length===1&&t.children[0].type==="mtext"?t.children[0]:t},Sr=function(e,t=!1){if(e.length===1&&!(e[0]instanceof kr))return e[0];if(!t){e[0]instanceof se&&e[0].type==="mo"&&!e[0].attributes.fence&&(e[0].attributes.lspace="0em",e[0].attributes.rspace="0em");const r=e.length-1;e[r]instanceof se&&e[r].type==="mo"&&!e[r].attributes.fence&&(e[r].attributes.lspace="0em",e[r].attributes.rspace="0em")}return new g.MathNode("mrow",e)};function rr(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){const t=e.children[0];return t instanceof Ne&&t.text==="."}else if(e.type==="mtext"&&e.children.length===1){const t=e.children[0];return t instanceof Ne&&t.text==="â€ˆ"}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){const t=e.children[0];return t instanceof Ne&&t.text===","}else return!1}const hi=(e,t)=>{const r=e[t],s=e[t+1];return r.type==="atom"&&r.text===","&&r.loc&&s.loc&&r.loc.end===s.loc.start},Ve=e=>e.type==="atom"&&e.family==="rel"||e.type==="mclass"&&e.mclass==="mrel",re=function(e,t,r=!1){if(!r&&e.length===1){const l=W(e[0],t);return l instanceof se&&l.type==="mo"&&(l.setAttribute("lspace","0em"),l.setAttribute("rspace","0em")),[l]}const s=[],o=[];let i;for(let l=0;l<e.length;l++)o.push(W(e[l],t));for(let l=0;l<o.length;l++){const u=o[l];if(l<e.length-1&&Ve(e[l])&&Ve(e[l+1])&&u.setAttribute("rspace","0em"),l>0&&Ve(e[l])&&Ve(e[l-1])&&u.setAttribute("lspace","0em"),u.type==="mn"&&i&&i.type==="mn"){i.children.push(...u.children);continue}else if(rr(u)&&i&&i.type==="mn"){i.children.push(...u.children);continue}else if(i&&i.type==="mn"&&l<o.length-1&&o[l+1].type==="mn"&&hi(e,l)){i.children.push(...u.children);continue}else if(u.type==="mn"&&rr(i))u.children=[...i.children,...u.children],s.pop();else if((u.type==="msup"||u.type==="msub")&&u.children.length>=1&&i&&(i.type==="mn"||rr(i))){const h=u.children[0];h instanceof se&&h.type==="mn"&&i&&(h.children=[...i.children,...h.children],s.pop())}s.push(u),i=u}return s},ve=function(e,t,r=!1){return Sr(re(e,t,r),r)},W=function(e,t){if(!e)return new g.MathNode("mrow");if(Ke[e.type])return Ke[e.type](e,t);throw new D("Got group of unknown type: '"+e.type+"'")},Zn=e=>new g.MathNode("mtd",[],[],{padding:"0",width:"50%"}),pi=["mrow","mtd","mtable","mtr"],hr=e=>{for(const t of e.children)if(t.type&&pi.includes(t.type)){if(t.classes&&t.classes[0]==="tml-label")return t.label;{const r=hr(t);if(r)return r}}else if(!t.type){const r=hr(t);if(r)return r}},mi=(e,t,r,s)=>{t=ve(t[0].body,r),t=tt(t),t.classes.push("tml-tag");const o=hr(e);e=new g.MathNode("mtd",[e]);const i=[Zn(),e,Zn()];i[s?0:2].children.push(t);const l=new g.MathNode("mtr",i,["tml-tageqn"]);o&&l.setAttribute("id",o);const u=new g.MathNode("mtable",[l]);return u.style.width="100%",u.setAttribute("displaystyle","true"),u};function fi(e,t,r,s){let o=null;e.length===1&&e[0].type==="tag"&&(o=e[0].tag,e=e[0].body);const i=re(e,r);if(i.length===1&&i[0]instanceof Os)return i[0];const l=s.displayMode||s.annotate?"none":s.wrap,u=i.length===0?null:i[0];let h=i.length===1&&o===null&&u instanceof se?i[0]:di(i,l,s.displayMode);if(o&&(h=mi(h,o,r,s.leqno)),s.annotate){const _=new g.MathNode("annotation",[new g.TextNode(t)]);_.setAttribute("encoding","application/x-tex"),h=new g.MathNode("semantics",[h,_])}const b=new g.MathNode("math",[h]);return s.xml&&b.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),s.displayMode&&(b.setAttribute("display","block"),b.style.display="block math",b.classes=["tml-display"]),b}const gi="acegÄ±È·mnopqrsuvwxyzÎ±Î³ÎµÎ·Î¹ÎºÎ¼Î½Î¿Ï€ÏÏ‚ÏƒÏ„Ï…Ï‡Ï‰Ï•ðšðœðžð ð¦ð§ð¨ð©ðªð«ð¬ð®ð¯ð°ð±ð²ð³",bi="DHKLUcegorsuvxyzÎ Î¥Î¨Î±Î´Î·Î¹Î¼Î½Î¿Ï„Ï…Ï‡Ïµ",xi="BCEGIMNOPQRSTXZlpqtwÎ“Î˜ÎžÎ£Î¦Î©Î²ÎµÎ¶Î¸Î¾ÏÏ‚Ï†ÏˆÏ‘Ï•Ï±",yi="AFJdfÎ”Î›",Cs=(e,t)=>{const r=e.isStretchy?et.accentNode(e):new g.MathNode("mo",[ie(e.label,e.mode)]);e.isStretchy||r.setAttribute("stretchy","false"),e.label!=="\\vec"&&(r.style.mathDepth="0");const s=e.label==="\\c"?"munder":"mover",o=vi.has(e.label);if(s==="mover"&&e.mode==="math"&&!e.isStretchy&&e.base.text&&e.base.text.length===1){const l=e.base.text,u=e.label==="\\vec",h=u==="\\vec"?"-vec":"";u&&r.classes.push("tml-vec");const b=u?"-vec":o?"-acc":"";bi.indexOf(l)>-1?(r.classes.push(`chr-sml${h}`),r.classes.push(`wbk-sml${b}`)):xi.indexOf(l)>-1?(r.classes.push(`chr-med${h}`),r.classes.push(`wbk-med${b}`)):yi.indexOf(l)>-1?(r.classes.push(`chr-lrg${h}`),r.classes.push(`wbk-lrg${b}`)):u?r.classes.push("wbk-vec"):o&&r.classes.push("wbk-acc")}else o&&r.classes.push("wbk-acc");return new g.MathNode(s,[W(e.base,t),r])},wi=new Set(["\\acute","\\check","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"]),vi=new Set(["\\acute","\\bar","\\breve","\\check","\\dot","\\ddot","\\grave","\\hat","\\mathring","\\`","\\'","\\^","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v"]),Xn={"\\`":"Ì€","\\'":"Ì","\\^":"Ì‚","\\~":"Ìƒ","\\=":"Ì„","\\u":"Ì†","\\.":"Ì‡",'\\"':"Ìˆ","\\r":"ÌŠ","\\H":"Ì‹","\\v":"ÌŒ","\\c":"Ì§"};C({type:"accent",names:["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\overparen","\\widecheck","\\widehat","\\wideparen","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{const r=Be(t[0]),s=!wi.has(e.funcName);return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:s,base:r}},mathmlBuilder:Cs});C({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\c","\\u","\\.",'\\"',"\\r","\\H","\\v"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{const r=Be(t[0]),s=e.parser.mode;return s==="math"&&e.parser.settings.strict&&console.log(`Temml parse error: Command ${e.funcName} is invalid in math mode.`),s==="text"&&r.text&&r.text.length===1&&e.funcName in Xn&&gi.indexOf(r.text)>-1?{type:"textord",mode:"text",text:r.text+Xn[e.funcName]}:e.funcName==="\\c"&&s==="text"&&r.text&&r.text.length===1?{type:"textord",mode:"text",text:r.text+"Ì§"}:{type:"accent",mode:s,label:e.funcName,isStretchy:!1,base:r}},mathmlBuilder:Cs});C({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underparen","\\utilde"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>{const s=r[0];return{type:"accentUnder",mode:e.mode,label:t,base:s}},mathmlBuilder:(e,t)=>{const r=et.accentNode(e);return r.style["math-depth"]=0,new g.MathNode("munder",[W(e.base,t),r])}});const Jn={pt:800/803,pc:12*800/803,dd:1238/1157*800/803,cc:14856/1157*800/803,nd:685/642*800/803,nc:1370/107*800/803,sp:1/65536*800/803,mm:25.4/72,cm:2.54/72,in:1/72,px:96/72},_i=["em","ex","mu","pt","mm","cm","in","px","bp","pc","dd","cc","nd","nc","sp"],Es=function(e){return typeof e!="string"&&(e=e.unit),_i.indexOf(e)>-1},Ps=e=>{const t=Math.max(e-1,0);return[1,.7,.5][t]},me=function(e,t){let r=e.number;if(t.maxSize[0]<0&&r>0)return{number:0,unit:"em"};const s=e.unit;switch(s){case"mm":case"cm":case"in":case"px":return r*Jn[s]>t.maxSize[1]?{number:t.maxSize[1],unit:"pt"}:{number:r,unit:s};case"em":case"ex":return s==="ex"&&(r*=.431),r=Math.min(r/Ps(t.level),t.maxSize[0]),{number:H.round(r),unit:"em"};case"bp":return r>t.maxSize[1]&&(r=t.maxSize[1]),{number:r,unit:"pt"};case"pt":case"pc":case"dd":case"cc":case"nd":case"nc":case"sp":return r=Math.min(r*Jn[s],t.maxSize[1]),{number:H.round(r),unit:"pt"};case"mu":return r=Math.min(r/18,t.maxSize[0]),{number:H.round(r),unit:"em"};default:throw new D("Invalid unit: '"+s+"'")}},K=e=>{const t=new g.MathNode("mspace");return t.setAttribute("width",e+"em"),t},Ue=(e,t=.3,r=0,s=!1)=>{if(e==null&&r===0)return K(t);const o=e?[e]:[];if(t!==0&&o.unshift(K(t)),r>0&&o.push(K(r)),s){const i=new g.MathNode("mpadded",o);return i.setAttribute("height","0.1px"),i}else return new g.MathNode("mrow",o)},nr=(e,t)=>Number(e)/Ps(t),pr=(e,t,r,s)=>{const o=et.mathMLnode(e),i=e.slice(1,3)==="eq",l=e.charAt(1)==="x"?"1.75":e.slice(2,4)==="cd"?"3.0":i?"1.0":"2.0";o.setAttribute("lspace","0"),o.setAttribute("rspace",i?"0.5em":"0");const u=s.withLevel(s.level<2?2:3),h=nr(l,u.level),b=nr(l,3),_=Ue(null,h.toFixed(4),0),$=Ue(null,b.toFixed(4),0),M=nr(i?0:.3,u.level).toFixed(4);let N,G;const j=t&&t.body&&(t.body.body||t.body.length>0);if(j){let U=W(t,u);U=Ue(U,M,M,e==="\\\\cdrightarrow"||e==="\\\\cdleftarrow"),N=new g.MathNode("mover",[U,$])}const z=r&&r.body&&(r.body.body||r.body.length>0);if(z){let U=W(r,u);U=Ue(U,M,M),G=new g.MathNode("munder",[U,$])}let L;return!j&&!z?L=new g.MathNode("mover",[o,_]):j&&z?L=new g.MathNode("munderover",[o,G,N]):j?L=new g.MathNode("mover",[o,N]):L=new g.MathNode("munder",[o,G]),l==="3.0"&&(L.style.height="1em"),L.setAttribute("accent","false"),L};C({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xleftrightharpoons","\\xrightleftharpoons","\\yields","\\yieldsLeft","\\mesomerism","\\longrightharpoonup","\\longleftharpoondown","\\yieldsLeftRight","\\chemequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,s){return{type:"xArrow",mode:e.mode,name:t,body:r[0],below:s[0]}},mathmlBuilder(e,t){const s=[pr(e.name,e.body,e.below,t)];return s.unshift(K(.2778)),s.push(K(.2778)),new g.MathNode("mrow",s)}});const Kn={"\\equilibriumRight":["\\longrightharpoonup","\\eqleftharpoondown"],"\\equilibriumLeft":["\\eqrightharpoonup","\\longleftharpoondown"]};C({type:"stackedArrow",names:["\\equilibriumRight","\\equilibriumLeft"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,s){const o=r[0]?{type:"hphantom",mode:e.mode,body:r[0]}:null,i=s[0]?{type:"hphantom",mode:e.mode,body:s[0]}:null;return{type:"stackedArrow",mode:e.mode,name:t,body:r[0],upperArrowBelow:i,lowerArrowBody:o,below:s[0]}},mathmlBuilder(e,t){const r=Kn[e.name][0],s=Kn[e.name][1],o=pr(r,e.body,e.upperArrowBelow,t),i=pr(s,e.lowerArrowBody,e.below,t);let l;const u=new g.MathNode("mpadded",[o]);if(u.setAttribute("voffset","0.3em"),u.setAttribute("height","+0.3em"),u.setAttribute("depth","-0.3em"),e.name==="\\equilibriumLeft"){const h=new g.MathNode("mpadded",[i]);h.setAttribute("width","0.5em"),l=new g.MathNode("mpadded",[K(.2778),h,u,K(.2778)])}else u.setAttribute("width",e.name==="\\equilibriumRight"?"0.5em":"0"),l=new g.MathNode("mpadded",[K(.2778),u,i,K(.2778)]);return l.setAttribute("voffset","-0.18em"),l.setAttribute("height","-0.18em"),l.setAttribute("depth","+0.18em"),l}});const Bs={};function ue({type:e,names:t,props:r,handler:s,mathmlBuilder:o}){const i={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s};for(let l=0;l<t.length;++l)Bs[t[l]]=i;o&&(Ke[e]=o)}function I(e,t){if(!e||e.type!==t)throw new Error(`Expected node of type ${t}, but got `+(e?`node of type ${e.type}`:String(e)));return e}function qr(e){const t=rt(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?`node of type ${e.type}`:String(e)));return t}function rt(e){return e&&(e.type==="atom"||Object.prototype.hasOwnProperty.call(ii,e.type))?e:null}const $i={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Yn=()=>({type:"styling",body:[],mode:"math",scriptLevel:"display"}),Qn=e=>e.type==="textord"&&e.text==="@",ki=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function Ai(e,t,r){const s=$i[e];switch(s){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(s,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{const o=r.callFunction("\\\\cdleft",[t[0]],[]),i={type:"atom",text:s,mode:"math",family:"rel"},l=r.callFunction("\\Big",[i],[]),u=r.callFunction("\\\\cdright",[t[1]],[]),h={type:"ordgroup",mode:"math",body:[o,l,u],semisimple:!0};return r.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const o={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[o],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Si(e){const t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();const o=e.fetch().text;if(o==="&"||o==="\\\\")e.consume();else if(o==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new D("Expected \\\\ or \\cr or \\end",e.nextToken)}let r=[];const s=[r];for(let o=0;o<t.length;o++){const i=t[o];let l=Yn();for(let u=0;u<i.length;u++)if(!Qn(i[u]))l.body.push(i[u]);else{r.push(l),u+=1;const h=qr(i[u]).text,b=new Array(2);if(b[0]={type:"ordgroup",mode:"math",body:[]},b[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(let $=0;$<2;$++){let M=!0;for(let N=u+1;N<i.length;N++){if(ki(i[N],h)){M=!1,u=N;break}if(Qn(i[N]))throw new D("Missing a "+h+" character to complete a CD arrow.",i[N]);b[$].body.push(i[N])}if(M)throw new D("Missing a "+h+" character to complete a CD arrow.",i[u])}else throw new D('Expected one of "<>AV=|." after @.');const _=Ai(h,b,e);r.push(_),l=Yn()}o%2===0?r.push(l):r.shift(),r=[],s.push(r)}return s.pop(),e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:s,tags:null,labels:new Array(s.length+1).fill(""),envClasses:["jot","cd"],cols:[],hLinesBeforeRow:new Array(s.length+1).fill([])}}C({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler({parser:e,funcName:t},r){return{type:"cdlabel",mode:e.mode,side:t.slice(4),label:r[0]}},mathmlBuilder(e,t){if(e.label.body.length===0)return new g.MathNode("mrow",t);const r=W(e.label,t);e.side==="left"&&r.classes.push("tml-shift-left");const s=new g.MathNode("mtd",[r]);s.style.padding="0";const o=new g.MathNode("mtr",[s]),i=new g.MathNode("mtable",[o]),l=new g.MathNode("mpadded",[i]);return l.setAttribute("width","0.1px"),l.setAttribute("displaystyle","false"),l.setAttribute("scriptlevel","1"),l}});C({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler({parser:e},t){return{type:"cdlabelparent",mode:e.mode,fragment:t[0]}},mathmlBuilder(e,t){return new g.MathNode("mrow",[W(e.fragment,t)])}});const Fs=e=>({type:"ordgroup",mode:"math",body:e,semisimple:!0}),sr=(e,t)=>({type:t,mode:"math",body:Fs(e)}),qi=(e,t)=>{const r=e.body;r[0].shift();const s=new Array(r.length-1).fill().map(()=>[]);for(let $=1;$<r.length;$++){s[$-1].push(r[$].shift());const M=[];for(let N=0;N<r[$].length;N++)M.push(r[$][N]);s[$-1].push(sr(M,"vphantom"))}const o=new Array(r.length).fill().map(()=>[]);for(let $=0;$<r[0].length;$++)o[0].push(r[0][$]);for(let $=1;$<r.length;$++)for(let M=0;M<r[0].length;M++)o[$].push(sr(r[$][M].body,"hphantom"));for(let $=0;$<r[0].length;$++)r[0][$]=sr(r[0][$].body,"hphantom");const i={type:"array",mode:"math",body:s,cols:[{type:"align",align:"c"}],rowGaps:new Array(s.length-1).fill(null),hLinesBeforeRow:new Array(s.length+1).fill().map(()=>[]),envClasses:[],scriptLevel:"text",arraystretch:1,labels:new Array(s.length).fill(""),arraycolsep:{number:.04,unit:"em"}},u={type:"styling",mode:"math",scriptLevel:"text",body:[{type:"array",mode:"math",body:o,cols:new Array(o.length).fill({type:"align",align:"c"}),rowGaps:new Array(o.length-1).fill(null),hLinesBeforeRow:new Array(o.length+1).fill().map(()=>[]),envClasses:[],scriptLevel:"text",arraystretch:1,labels:new Array(o.length).fill(""),arraycolsep:null}]},_={type:"supsub",mode:"math",stack:!0,base:{type:"op",mode:"math",limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!0,symbol:!1,suppressBaseShift:!0,body:[{type:"leftright",mode:"math",body:[e],left:t?t[0]:"(",right:t?t[1]:")",rightColor:void 0}]},sup:u,sub:null};return Fs([i,_])};class ae{constructor(t,r,s){this.lexer=t,this.start=r,this.end=s}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new ae(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class he{constructor(t,r){this.text=t,this.loc=r}range(t,r){return new he(r,ae.range(this,t))}}const Y={DISPLAY:0,TEXT:1,SCRIPT:2,SCRIPTSCRIPT:3},zs={};function c(e,t){zs[e]=t}const Ti=zs;c("\\noexpand",function(e){const t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});c("\\expandafter",function(e){const t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});c("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}});c("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}});c("\\@ifnextchar",function(e){const t=e.consumeArgs(3);e.consumeSpaces();const r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});c("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");c("\\TextOrMath",function(e){const t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});const mr=e=>{let t="";for(let r=e.length-1;r>-1;r--)t+=e[r].text;return t},Tr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},es=e=>{const t=e.future().text;return t==="EOF"?[null,""]:[Tr[t.charAt(0)],t]},ts=(e,t,r)=>{for(let s=1;s<t.length;s++){const o=Tr[t.charAt(s)];e*=r,e+=o}return e};c("\\char",function(e){let t=e.popToken(),r,s="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")s=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new D("\\char` missing argument");s=t.text.charCodeAt(0)}else r=10;if(r){let o=t.text;if(s=Tr[o.charAt(0)],s==null||s>=r)throw new D(`Invalid base-${r} digit ${t.text}`);s=ts(s,o,r);let i;for([i,o]=es(e);i!=null&&i<r;)s*=r,s+=i,s=ts(s,o,r),e.popToken(),[i,o]=es(e)}return`\\@char{${s}}`});function Mr(e){const t=e.consumeArgs(1)[0];let r="",s=t[t.length-1].loc.start;for(let o=t.length-1;o>=0;o--){const i=t[o].loc.start;i>s&&(r+=" ",s=i),r+=t[o].text,s+=t[o].text.length}return r}c("\\surd","\\sqrt{\\vphantom{|}}");c("âŠ•","\\oplus");c("\\long","");c("\\bgroup","{");c("\\egroup","}");c("~","\\nobreakspace");c("\\lq","`");c("\\rq","'");c("\\aa","\\r a");c("\\Bbbk","\\Bbb{k}");c("\\mathstrut","\\vphantom{(}");c("\\underbar","\\underline{\\text{#1}}");c("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");c("â‹®","\\vdots");c("\\arraystretch","1");c("\\arraycolsep","6pt");c("\\substack","\\begin{subarray}{c}#1\\end{subarray}");c("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");c("\\implies","\\DOTSB\\;\\Longrightarrow\\;");c("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");const rs={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcap":"\\dotsb","\\bigsqcup":"\\dotsb","\\bigtimes":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};c("\\dots",function(e){let t="\\dotso";const r=e.expandAfterFuture().text;return r in rs?t=rs[r]:(r.slice(0,4)==="\\not"||r in Q.math&&["bin","rel"].includes(Q.math[r].group))&&(t="\\dotsb"),t});const Dr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};c("\\dotso",function(e){return e.future().text in Dr?"\\ldots\\,":"\\ldots"});c("\\dotsc",function(e){const t=e.future().text;return t in Dr&&t!==","?"\\ldots\\,":"\\ldots"});c("\\cdots",function(e){return e.future().text in Dr?"\\@cdots\\,":"\\@cdots"});c("\\dotsb","\\cdots");c("\\dotsm","\\cdots");c("\\dotsi","\\!\\cdots");c("\\idotsint","\\dotsi");c("\\dotsx","\\ldots\\,");c("\\DOTSI","\\relax");c("\\DOTSB","\\relax");c("\\DOTSX","\\relax");c("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");c("\\,","{\\tmspace+{3mu}{.1667em}}");c("\\thinspace","\\,");c("\\>","\\mskip{4mu}");c("\\:","{\\tmspace+{4mu}{.2222em}}");c("\\medspace","\\:");c("\\;","{\\tmspace+{5mu}{.2777em}}");c("\\thickspace","\\;");c("\\!","{\\tmspace-{3mu}{.1667em}}");c("\\negthinspace","\\!");c("\\negmedspace","{\\tmspace-{4mu}{.2222em}}");c("\\negthickspace","{\\tmspace-{5mu}{.277em}}");c("\\enspace","\\kern.5em ");c("\\enskip","\\hskip.5em\\relax");c("\\quad","\\hskip1em\\relax");c("\\qquad","\\hskip2em\\relax");c("\\AA","\\TextOrMath{\\Angstrom}{\\mathring{A}}\\relax");c("\\tag","\\@ifstar\\tag@literal\\tag@paren");c("\\tag@paren","\\tag@literal{({#1})}");c("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new D("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});c("\\notag","\\nonumber");c("\\nonumber","\\gdef\\@eqnsw{0}");c("\\bmod","\\mathbin{\\text{mod}}");c("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");c("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");c("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");c("\\newline","\\\\\\relax");c("\\TeX","\\textrm{T}\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125em\\textrm{X}");c("\\LaTeX","\\textrm{L}\\kern-.35em\\raisebox{0.2em}{\\scriptstyle A}\\kern-.15em\\TeX");c("\\Temml","\\textrm{T}\\kern-0.2em\\lower{0.2em}{\\textrm{E}}\\kern-0.08em{\\textrm{M}\\kern-0.08em\\raise{0.2em}\\textrm{M}\\kern-0.08em\\textrm{L}}");c("\\hspace","\\@ifstar\\@hspacer\\@hspace");c("\\@hspace","\\hskip #1\\relax");c("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");c("\\colon",'\\mathpunct{\\char"3a}');c("\\prescript","\\pres@cript{_{#1}^{#2}}{}{#3}");c("\\ordinarycolon",'\\char"3a');c("\\vcentcolon","\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}}");c("\\coloneq",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2212}');c("\\Coloneq",'\\mathrel{\\char"2237\\char"2212}');c("\\Eqqcolon",'\\mathrel{\\char"3d\\char"2237}');c("\\Eqcolon",'\\mathrel{\\char"2212\\char"2237}');c("\\colonapprox",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2248}');c("\\Colonapprox",'\\mathrel{\\char"2237\\char"2248}');c("\\colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}');c("\\Colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}');c("\\ratio","\\vcentcolon");c("\\coloncolon","\\dblcolon");c("\\colonequals","\\coloneqq");c("\\coloncolonequals","\\Coloneqq");c("\\equalscolon","\\eqqcolon");c("\\equalscoloncolon","\\Eqqcolon");c("\\colonminus","\\coloneq");c("\\coloncolonminus","\\Coloneq");c("\\minuscolon","\\eqcolon");c("\\minuscoloncolon","\\Eqcolon");c("\\coloncolonapprox","\\Colonapprox");c("\\coloncolonsim","\\Colonsim");c("\\notni","\\mathrel{\\char`âˆŒ}");c("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");c("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");c("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");c("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");c("\\varlimsup","\\DOTSB\\operatorname*{\\overline{\\text{lim}}}");c("\\varliminf","\\DOTSB\\operatorname*{\\underline{\\text{lim}}}");c("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{\\text{lim}}}");c("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{\\text{lim}}}");c("\\centerdot","{\\medspace\\rule{0.167em}{0.189em}\\medspace}");c("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");c("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");c("\\plim","\\DOTSB\\operatorname*{plim}");c("\\leftmodels","\\mathop{\\reflectbox{$\\models$}}");c("\\bra","\\mathinner{\\langle{#1}|}");c("\\ket","\\mathinner{|{#1}\\rangle}");c("\\braket","\\mathinner{\\langle{#1}\\rangle}");c("\\Bra","\\left\\langle#1\\right|");c("\\Ket","\\left|#1\\right\\rangle");const Ls=(e,t)=>{const s=`}\\,\\middle${t[0]==="|"?"\\vert":"\\Vert"}\\,{`;return e.slice(0,t.index)+s+e.slice(t.index+t[0].length)};c("\\Braket",function(e){let t=Mr(e);const r=/\|\||\||\\\|/g;let s;for(;(s=r.exec(t))!==null;)t=Ls(t,s);return"\\left\\langle{"+t+"}\\right\\rangle"});c("\\Set",function(e){let t=Mr(e);const r=/\|\||\||\\\|/.exec(t);return r&&(t=Ls(t,r)),"\\left\\{\\:{"+t+"}\\:\\right\\}"});c("\\set",function(e){return"\\{{"+Mr(e).replace(/\|/,"}\\mid{")+"}\\}"});c("\\angln","{\\angl n}");c("\\odv","\\@ifstar\\odv@next\\odv@numerator");c("\\odv@numerator","\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}");c("\\odv@next","\\frac{\\mathrm{d}}{\\mathrm{d}#2}#1");c("\\pdv","\\@ifstar\\pdv@next\\pdv@numerator");const Is=e=>{const t=e[0][0].text,r=mr(e[1]).split(","),s=String(r.length),o=s==="1"?"\\partial":`\\partial^${s}`;let i="";return r.map(l=>{i+="\\partial "+l.trim()+"\\,"}),[t,o,i.replace(/\\,$/,"")]};c("\\pdv@numerator",function(e){const[t,r,s]=Is(e.consumeArgs(2));return`\\frac{${r} ${t}}{${s}}`});c("\\pdv@next",function(e){const[t,r,s]=Is(e.consumeArgs(2));return`\\frac{${r}}{${s}} ${t}`});c("\\upalpha","\\up@greek{\\alpha}");c("\\upbeta","\\up@greek{\\beta}");c("\\upgamma","\\up@greek{\\gamma}");c("\\updelta","\\up@greek{\\delta}");c("\\upepsilon","\\up@greek{\\epsilon}");c("\\upzeta","\\up@greek{\\zeta}");c("\\upeta","\\up@greek{\\eta}");c("\\uptheta","\\up@greek{\\theta}");c("\\upiota","\\up@greek{\\iota}");c("\\upkappa","\\up@greek{\\kappa}");c("\\uplambda","\\up@greek{\\lambda}");c("\\upmu","\\up@greek{\\mu}");c("\\upnu","\\up@greek{\\nu}");c("\\upxi","\\up@greek{\\xi}");c("\\upomicron","\\up@greek{\\omicron}");c("\\uppi","\\up@greek{\\pi}");c("\\upalpha","\\up@greek{\\alpha}");c("\\uprho","\\up@greek{\\rho}");c("\\upsigma","\\up@greek{\\sigma}");c("\\uptau","\\up@greek{\\tau}");c("\\upupsilon","\\up@greek{\\upsilon}");c("\\upphi","\\up@greek{\\phi}");c("\\upchi","\\up@greek{\\chi}");c("\\uppsi","\\up@greek{\\psi}");c("\\upomega","\\up@greek{\\omega}");c("\\invamp",'\\mathbin{\\char"214b}');c("\\parr",'\\mathbin{\\char"214b}');c("\\with",'\\mathbin{\\char"26}');c("\\multimapinv",'\\mathrel{\\char"27dc}');c("\\multimapboth",'\\mathrel{\\char"29df}');c("\\scoh",'{\\mkern5mu\\char"2322\\mkern5mu}');c("\\sincoh",'{\\mkern5mu\\char"2323\\mkern5mu}');c("\\coh",`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2322}}}
{\\smash{\\lower4mu{\\char"2323}}}\\mkern5mu}`);c("\\incoh",`{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2323}}}
{\\smash{\\lower4mu{\\char"2322}}}\\mkern5mu}`);c("\\standardstate","\\text{\\tiny\\char`â¦µ}");c("\\ce",function(e){return Rs(e.consumeArgs(1)[0],"ce")});c("\\pu",function(e){return Rs(e.consumeArgs(1)[0],"pu")});c("\\uniDash","{\\rule{0.672em}{0.06em}}");c("\\triDash","{\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}}");c("\\tripleDash","\\kern0.075em\\raise0.25em{\\triDash}\\kern0.075em");c("\\tripleDashOverLine","\\kern0.075em\\mathrlap{\\raise0.125em{\\uniDash}}\\raise0.34em{\\triDash}\\kern0.075em");c("\\tripleDashOverDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\triDash}}\\raise0.27em{\\uniDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");c("\\tripleDashBetweenDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\uniDash}}\\raise0.27em{\\triDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");var Rs=function(e,t){for(var r="",s=e.length&&e[e.length-1].loc.start,o=e.length-1;o>=0;o--)e[o].loc.start>s&&(r+=" ",s=e[o].loc.start),r+=e[o].text,s+=e[o].text.length;var i=Z.go(T.go(r,t));return i},T={go:function(e,t){if(!e)return[];t===void 0&&(t="ce");var r="0",s={};s.parenthesisLevel=0,e=e.replace(/\n/g," "),e=e.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),e=e.replace(/[\u2026]/g,"...");for(var o,i=10,l=[];;){o!==e?(i=10,o=e):i--;var u=T.stateMachines[t],h=u.transitions[r]||u.transitions["*"];e:for(var b=0;b<h.length;b++){var _=T.patterns.match_(h[b].pattern,e);if(_){for(var $=h[b].task,M=0;M<$.action_.length;M++){var N;if(u.actions[$.action_[M].type_])N=u.actions[$.action_[M].type_](s,_.match_,$.action_[M].option);else if(T.actions[$.action_[M].type_])N=T.actions[$.action_[M].type_](s,_.match_,$.action_[M].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+$.action_[M].type_+")"];T.concatArray(l,N)}if(r=$.nextState||r,e.length>0){if($.revisit||(e=_.remainder),!$.toContinue)break e}else return l}}if(i<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,t){if(t)if(Array.isArray(t))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"(-)(9)^(-9)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"state of aggregation $":function(e){var t=T.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(t&&t.remainder.match(/^($|[\s,;\)\]\}])/))return t;var r=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:e.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return T.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return T.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return T.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return T.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return T.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return T.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return T.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return T.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return T.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return T.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return T.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return T.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return T.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return T.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return T.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return T.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return T.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return T.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return T.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return T.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return T.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return T.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return T.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return T.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return T.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){var t;if(t=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),t)return{match_:t[0],remainder:e.substr(t[0].length)};var r=T.patterns.findObserveGroups(e,"","$","$","");return r&&(t=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),t)?{match_:t[0],remainder:e.substr(t[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var t=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return t?{match_:t[0],remainder:e.substr(t[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,t,r,s,o,i,l,u,h,b){var _=function(L,U){if(typeof U=="string")return L.indexOf(U)!==0?null:U;var oe=L.match(U);return oe?oe[0]:null},$=function(L,U,oe){for(var ne=0;U<L.length;){var ge=L.charAt(U),ye=_(L.substr(U),oe);if(ye!==null&&ne===0)return{endMatchBegin:U,endMatchEnd:U+ye.length};if(ge==="{")ne++;else if(ge==="}"){if(ne===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];ne--}U++}return ne>0,null},M=_(e,t);if(M===null||(e=e.substr(M.length),M=_(e,r),M===null))return null;var N=$(e,M.length,s||o);if(N===null)return null;var G=e.substring(0,s?N.endMatchEnd:N.endMatchBegin);if(i||l){var j=this.findObserveGroups(e.substr(N.endMatchEnd),i,l,u,h);if(j===null)return null;var z=[G,j.match_];return{match_:b?z.join(""):z,remainder:j.remainder}}else return{match_:G,remainder:e.substr(N.endMatchEnd)}},match_:function(e,t){var r=T.patterns.patterns[e];if(r===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if(typeof r=="function")return T.patterns.patterns[e](t);var s=t.match(r);if(s){var o;return s[2]?o=[s[1],s[2]]:s[1]?o=s[1]:o=s[0],{match_:o,remainder:t.substr(s[0].length)}}return null}},actions:{"a=":function(e,t){e.a=(e.a||"")+t},"b=":function(e,t){e.b=(e.b||"")+t},"p=":function(e,t){e.p=(e.p||"")+t},"o=":function(e,t){e.o=(e.o||"")+t},"q=":function(e,t){e.q=(e.q||"")+t},"d=":function(e,t){e.d=(e.d||"")+t},"rm=":function(e,t){e.rm=(e.rm||"")+t},"text=":function(e,t){e.text_=(e.text_||"")+t},insert:function(e,t,r){return{type_:r}},"insert+p1":function(e,t,r){return{type_:r,p1:t}},"insert+p1+p2":function(e,t,r){return{type_:r,p1:t[0],p2:t[1]}},copy:function(e,t){return t},rm:function(e,t){return{type_:"rm",p1:t||""}},text:function(e,t){return T.go(t,"text")},"{text}":function(e,t){var r=["{"];return T.concatArray(r,T.go(t,"text")),r.push("}"),r},"tex-math":function(e,t){return T.go(t,"tex-math")},"tex-math tight":function(e,t){return T.go(t,"tex-math tight")},bond:function(e,t,r){return{type_:"bond",kind_:r||t}},"color0-output":function(e,t){return{type_:"color0",color:t[0]}},ce:function(e,t){return T.go(t)},"1/2":function(e,t){var r=[];t.match(/^[+\-]/)&&(r.push(t.substr(0,1)),t=t.substr(1));var s=t.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return s[1]=s[1].replace(/\$/g,""),r.push({type_:"frac",p1:s[1],p2:s[2]}),s[3]&&(s[3]=s[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:s[3]})),r},"9,9":function(e,t){return T.go(t,"9,9")}},createTransitions:function(e){var t,r,s,o,i={};for(t in e)for(r in e[t])for(s=r.split("|"),e[t][r].stateArray=s,o=0;o<s.length;o++)i[s[o]]=[];for(t in e)for(r in e[t])for(s=e[t][r].stateArray||[],o=0;o<s.length;o++){var l=e[t][r];if(l.action_){l.action_=[].concat(l.action_);for(var u=0;u<l.action_.length;u++)typeof l.action_[u]=="string"&&(l.action_[u]={type_:l.action_[u]})}else l.action_=[];for(var h=t.split("|"),b=0;b<h.length;b++)if(s[o]==="*")for(var _ in i)i[_].push({pattern:h[b],task:l});else i[s[o]].push({pattern:h[b],task:l})}return i},stateMachines:{}};T.stateMachines={ce:{transitions:T.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,t){var r;if((e.d||"").match(/^[0-9]+$/)){var s=e.d;e.d=void 0,r=this.output(e),e.b=s}else r=this.output(e);return T.actions["o="](e,t),r},"d= kv":function(e,t){e.d=t,e.dType="kv"},"charge or bond":function(e,t){if(e.beginsWithBond){var r=[];return T.concatArray(r,this.output(e)),T.concatArray(r,T.actions.bond(e,t,"-")),r}else e.d=t},"- after o/d":function(e,t,r){var s=T.patterns.match_("orbital",e.o||""),o=T.patterns.match_("one lowercase greek letter $",e.o||""),i=T.patterns.match_("one lowercase latin letter $",e.o||""),l=T.patterns.match_("$one lowercase latin letter$ $",e.o||""),u=t==="-"&&(s&&s.remainder===""||o||i||l);u&&!e.a&&!e.b&&!e.p&&!e.d&&!e.q&&!s&&i&&(e.o="$"+e.o+"$");var h=[];return u?(T.concatArray(h,this.output(e)),h.push({type_:"hyphen"})):(s=T.patterns.match_("digits",e.d||""),r&&s&&s.remainder===""?(T.concatArray(h,T.actions["d="](e,t)),T.concatArray(h,this.output(e))):(T.concatArray(h,this.output(e)),T.concatArray(h,T.actions.bond(e,t,"-")))),h},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,t){return{type_:"state of aggregation",p1:T.go(t,"o")}},comma:function(e,t){var r=t.replace(/\s*$/,""),s=r!==t;return s&&e.parenthesisLevel===0?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(e,t,r){var s;if(!e.r)s=[],!e.a&&!e.b&&!e.p&&!e.o&&!e.q&&!e.d&&!r||(e.sb&&s.push({type_:"entitySkip"}),!e.o&&!e.q&&!e.d&&!e.b&&!e.p&&r!==2?(e.o=e.a,e.a=void 0):!e.o&&!e.q&&!e.d&&(e.b||e.p)?(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):e.o&&e.dType==="kv"&&T.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&e.dType==="kv"&&!e.q&&(e.dType=void 0),s.push({type_:"chemfive",a:T.go(e.a,"a"),b:T.go(e.b,"bd"),p:T.go(e.p,"pq"),o:T.go(e.o,"o"),q:T.go(e.q,"pq"),d:T.go(e.d,e.dType==="oxidation"?"oxidation":"bd"),dType:e.dType}));else{var o;e.rdt==="M"?o=T.go(e.rd,"tex-math"):e.rdt==="T"?o=[{type_:"text",p1:e.rd||""}]:o=T.go(e.rd);var i;e.rqt==="M"?i=T.go(e.rq,"tex-math"):e.rqt==="T"?i=[{type_:"text",p1:e.rq||""}]:i=T.go(e.rq),s={type_:"arrow",r:e.r,rd:o,rq:i}}for(var l in e)l!=="parenthesisLevel"&&l!=="beginsWithBond"&&delete e[l];return s},"oxidation-output":function(e,t){var r=["{"];return T.concatArray(r,T.go(t,"oxidation")),r.push("}"),r},"frac-output":function(e,t){return{type_:"frac-ce",p1:T.go(t[0]),p2:T.go(t[1])}},"overset-output":function(e,t){return{type_:"overset",p1:T.go(t[0]),p2:T.go(t[1])}},"underset-output":function(e,t){return{type_:"underset",p1:T.go(t[0]),p2:T.go(t[1])}},"underbrace-output":function(e,t){return{type_:"underbrace",p1:T.go(t[0]),p2:T.go(t[1])}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:T.go(t[1])}},"r=":function(e,t){e.r=t},"rdt=":function(e,t){e.rdt=t},"rd=":function(e,t){e.rd=t},"rqt=":function(e,t){e.rqt=t},"rq=":function(e,t){e.rq=t},operator:function(e,t,r){return{type_:"operator",kind_:r||t}}}},a:{transitions:T.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:T.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var t={type_:"text",p1:e.text_};for(var r in e)delete e[r];return t}}}},pq:{transitions:T.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,t){return{type_:"state of aggregation subscript",p1:T.go(t,"o")}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:T.go(t[1],"pq")}}}},bd:{transitions:T.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,t){return{type_:"color",color1:t[0],color2:T.go(t[1],"bd")}}}},oxidation:{transitions:T.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,t){return{type_:"roman numeral",p1:t||""}}}},"tex-math":{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"tex-math tight":{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,t){e.o=(e.o||"")+"{"+t+"}"},output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"9,9":{transitions:T.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:T.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,t){var r=[];return t[0]==="+-"||t[0]==="+/-"?r.push("\\pm "):t[0]&&r.push(t[0]),t[1]&&(T.concatArray(r,T.go(t[1],"pu-9,9")),t[2]&&(t[2].match(/[,.]/)?T.concatArray(r,T.go(t[2],"pu-9,9")):r.push(t[2])),t[3]=t[4]||t[3],t[3]&&(t[3]=t[3].trim(),t[3]==="e"||t[3].substr(0,1)==="*"?r.push({type_:"cdot"}):r.push({type_:"times"}))),t[3]&&r.push("10^{"+t[5]+"}"),r},"number^":function(e,t){var r=[];return t[0]==="+-"||t[0]==="+/-"?r.push("\\pm "):t[0]&&r.push(t[0]),T.concatArray(r,T.go(t[1],"pu-9,9")),r.push("^{"+t[2]+"}"),r},operator:function(e,t,r){return{type_:"operator",kind_:r||t}},space:function(){return{type_:"pu-space-1"}},output:function(e){var t,r=T.patterns.match_("{(...)}",e.d||"");r&&r.remainder===""&&(e.d=r.match_);var s=T.patterns.match_("{(...)}",e.q||"");if(s&&s.remainder===""&&(e.q=s.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var o={d:T.go(e.d,"pu"),q:T.go(e.q,"pu")};e.o==="//"?t={type_:"pu-frac",p1:o.d,p2:o.q}:(t=o.d,o.d.length>1||o.q.length>1?t.push({type_:" / "}):t.push({type_:"/"}),T.concatArray(t,o.q))}else t=T.go(e.d,"pu-2");for(var i in e)delete e[i];return t}}},"pu-2":{transitions:T.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,t){e.rm+="^{"+t+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var t=[];if(e.rm){var r=T.patterns.match_("{(...)}",e.rm||"");r&&r.remainder===""?t=T.go(r.match_,"pu"):t={type_:"rm",p1:e.rm}}for(var s in e)delete e[s];return t}}},"pu-9,9":{transitions:T.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){var r=e.text_.length%3;r===0&&(r=3);for(var s=e.text_.length-3;s>0;s-=3)t.push(e.text_.substr(s,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(0,r)),t.reverse()}else t.push(e.text_);for(var o in e)delete e[o];return t},"output-o":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){for(var r=e.text_.length-3,s=0;s<r;s+=3)t.push(e.text_.substr(s,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(s))}else t.push(e.text_);for(var o in e)delete e[o];return t}}}};var Z={go:function(e,t){if(!e)return"";for(var r="",s=!1,o=0;o<e.length;o++){var i=e[o];typeof i=="string"?r+=i:(r+=Z._go2(i),i.type_==="1st-level escape"&&(s=!0))}return!t&&!s&&r&&(r="{"+r+"}"),r},_goInner:function(e){return e&&Z.go(e,!0)},_go2:function(e){var t;switch(e.type_){case"chemfive":t="";var r={a:Z._goInner(e.a),b:Z._goInner(e.b),p:Z._goInner(e.p),o:Z._goInner(e.o),q:Z._goInner(e.q),d:Z._goInner(e.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),t+=r.a+"\\,"),(r.b||r.p)&&(t+="{\\vphantom{X}}",t+="^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{"+(r.p||"")+"}}",t+="{\\vphantom{X}}",t+="^{\\vphantom{2}\\mathllap{"+(r.b||"")+"}}",t+="_{\\vphantom{2}\\mathllap{"+(r.p||"")+"}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),t+=r.o),e.dType==="kv"?((r.d||r.q)&&(t+="{\\vphantom{X}}"),r.d&&(t+="^{"+r.d+"}"),r.q&&(t+="_{"+r.q+"}")):e.dType==="oxidation"?(r.d&&(t+="{\\vphantom{X}}",t+="^{"+r.d+"}"),r.q&&(t+="{{}}",t+="_{"+r.q+"}")):(r.q&&(t+="{{}}",t+="_{"+r.q+"}"),r.d&&(t+="{{}}",t+="^{"+r.d+"}"));break;case"rm":t="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),t="\\mathrm{"+e.p1+"}"):t="\\text{"+e.p1+"}";break;case"roman numeral":t="\\mathrm{"+e.p1+"}";break;case"state of aggregation":t="\\mskip2mu "+Z._goInner(e.p1);break;case"state of aggregation subscript":t="\\mskip1mu "+Z._goInner(e.p1);break;case"bond":if(t=Z._getBond(e.kind_),!t)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var s="\\frac{"+e.p1+"}{"+e.p2+"}";t="\\mathchoice{\\textstyle"+s+"}{"+s+"}{"+s+"}{"+s+"}";break;case"pu-frac":var o="\\frac{"+Z._goInner(e.p1)+"}{"+Z._goInner(e.p2)+"}";t="\\mathchoice{\\textstyle"+o+"}{"+o+"}{"+o+"}{"+o+"}";break;case"tex-math":t=e.p1+" ";break;case"frac-ce":t="\\frac{"+Z._goInner(e.p1)+"}{"+Z._goInner(e.p2)+"}";break;case"overset":t="\\overset{"+Z._goInner(e.p1)+"}{"+Z._goInner(e.p2)+"}";break;case"underset":t="\\underset{"+Z._goInner(e.p1)+"}{"+Z._goInner(e.p2)+"}";break;case"underbrace":t="\\underbrace{"+Z._goInner(e.p1)+"}_{"+Z._goInner(e.p2)+"}";break;case"color":t="{\\color{"+e.color1+"}{"+Z._goInner(e.color2)+"}}";break;case"color0":t="\\color{"+e.color+"}";break;case"arrow":var i={rd:Z._goInner(e.rd),rq:Z._goInner(e.rq)},l=Z._getArrow(e.r);i.rq&&(l+="[{\\rm "+i.rq+"}]"),i.rd?l+="{\\rm "+i.rd+"}":l+="{}",t=l;break;case"operator":t=Z._getOperator(e.kind_);break;case"1st-level escape":t=e.p1+" ";break;case"space":t=" ";break;case"entitySkip":t="~";break;case"pu-space-1":t="~";break;case"pu-space-2":t="\\mkern3mu ";break;case"1000 separator":t="\\mkern2mu ";break;case"commaDecimal":t="{,}";break;case"comma enumeration L":t="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":t="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":t="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":t="\\text{-}";break;case"addition compound":t="\\,{\\cdot}\\,";break;case"electron dot":t="\\mkern1mu \\text{\\textbullet}\\mkern1mu ";break;case"KV x":t="{\\times}";break;case"prime":t="\\prime ";break;case"cdot":t="\\cdot ";break;case"tight cdot":t="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":t="\\times ";break;case"circa":t="{\\sim}";break;case"^":t="uparrow";break;case"v":t="downarrow";break;case"ellipsis":t="\\ldots ";break;case"/":t="/";break;case" / ":t="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return t},_getArrow:function(e){switch(e){case"->":return"\\yields";case"â†’":return"\\yields";case"âŸ¶":return"\\yields";case"<-":return"\\yieldsLeft";case"<->":return"\\mesomerism";case"<-->":return"\\yieldsLeftRight";case"<=>":return"\\chemequilibrium";case"â‡Œ":return"\\chemequilibrium";case"<=>>":return"\\equilibriumRight";case"<<=>":return"\\equilibriumLeft";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripleDash}";case"~-":return"{\\tripleDashOverLine}";case"~=":return"{\\tripleDashOverDoubleLine}";case"~--":return"{\\tripleDashOverDoubleLine}";case"-~-":return"{\\tripleDashBetweenDoubleLine}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};c("\\darr","\\downarrow");c("\\dArr","\\Downarrow");c("\\Darr","\\Downarrow");c("\\lang","\\langle");c("\\rang","\\rangle");c("\\uarr","\\uparrow");c("\\uArr","\\Uparrow");c("\\Uarr","\\Uparrow");c("\\N","\\mathbb{N}");c("\\R","\\mathbb{R}");c("\\Z","\\mathbb{Z}");c("\\alef","\\aleph");c("\\alefsym","\\aleph");c("\\bull","\\bullet");c("\\clubs","\\clubsuit");c("\\cnums","\\mathbb{C}");c("\\Complex","\\mathbb{C}");c("\\Dagger","\\ddagger");c("\\diamonds","\\diamondsuit");c("\\empty","\\emptyset");c("\\exist","\\exists");c("\\harr","\\leftrightarrow");c("\\hArr","\\Leftrightarrow");c("\\Harr","\\Leftrightarrow");c("\\hearts","\\heartsuit");c("\\image","\\Im");c("\\infin","\\infty");c("\\isin","\\in");c("\\larr","\\leftarrow");c("\\lArr","\\Leftarrow");c("\\Larr","\\Leftarrow");c("\\lrarr","\\leftrightarrow");c("\\lrArr","\\Leftrightarrow");c("\\Lrarr","\\Leftrightarrow");c("\\natnums","\\mathbb{N}");c("\\plusmn","\\pm");c("\\rarr","\\rightarrow");c("\\rArr","\\Rightarrow");c("\\Rarr","\\Rightarrow");c("\\real","\\Re");c("\\reals","\\mathbb{R}");c("\\Reals","\\mathbb{R}");c("\\sdot","\\cdot");c("\\sect","\\S");c("\\spades","\\spadesuit");c("\\sub","\\subset");c("\\sube","\\subseteq");c("\\supe","\\supseteq");c("\\thetasym","\\vartheta");c("\\weierp","\\wp");c("\\quantity","{\\left\\{ #1 \\right\\}}");c("\\qty","{\\left\\{ #1 \\right\\}}");c("\\pqty","{\\left( #1 \\right)}");c("\\bqty","{\\left[ #1 \\right]}");c("\\vqty","{\\left\\vert #1 \\right\\vert}");c("\\Bqty","{\\left\\{ #1 \\right\\}}");c("\\absolutevalue","{\\left\\vert #1 \\right\\vert}");c("\\abs","{\\left\\vert #1 \\right\\vert}");c("\\norm","{\\left\\Vert #1 \\right\\Vert}");c("\\evaluated","{\\left.#1 \\right\\vert}");c("\\eval","{\\left.#1 \\right\\vert}");c("\\order","{\\mathcal{O} \\left( #1 \\right)}");c("\\commutator","{\\left[ #1 , #2 \\right]}");c("\\comm","{\\left[ #1 , #2 \\right]}");c("\\anticommutator","{\\left\\{ #1 , #2 \\right\\}}");c("\\acomm","{\\left\\{ #1 , #2 \\right\\}}");c("\\poissonbracket","{\\left\\{ #1 , #2 \\right\\}}");c("\\pb","{\\left\\{ #1 , #2 \\right\\}}");c("\\vectorbold","{\\boldsymbol{ #1 }}");c("\\vb","{\\boldsymbol{ #1 }}");c("\\vectorarrow","{\\vec{\\boldsymbol{ #1 }}}");c("\\va","{\\vec{\\boldsymbol{ #1 }}}");c("\\vectorunit","{{\\boldsymbol{\\hat{ #1 }}}}");c("\\vu","{{\\boldsymbol{\\hat{ #1 }}}}");c("\\dotproduct","\\mathbin{\\boldsymbol\\cdot}");c("\\vdot","{\\boldsymbol\\cdot}");c("\\crossproduct","\\mathbin{\\boldsymbol\\times}");c("\\cross","\\mathbin{\\boldsymbol\\times}");c("\\cp","\\mathbin{\\boldsymbol\\times}");c("\\gradient","{\\boldsymbol\\nabla}");c("\\grad","{\\boldsymbol\\nabla}");c("\\divergence","{\\grad\\vdot}");c("\\curl","{\\grad\\cross}");c("\\laplacian","\\nabla^2");c("\\tr","{\\operatorname{tr}}");c("\\Tr","{\\operatorname{Tr}}");c("\\rank","{\\operatorname{rank}}");c("\\erf","{\\operatorname{erf}}");c("\\Res","{\\operatorname{Res}}");c("\\principalvalue","{\\mathcal{P}}");c("\\pv","{\\mathcal{P}}");c("\\PV","{\\operatorname{P.V.}}");c("\\qqtext","{\\quad\\text{ #1 }\\quad}");c("\\qq","{\\quad\\text{ #1 }\\quad}");c("\\qcomma","{\\text{,}\\quad}");c("\\qc","{\\text{,}\\quad}");c("\\qcc","{\\quad\\text{c.c.}\\quad}");c("\\qif","{\\quad\\text{if}\\quad}");c("\\qthen","{\\quad\\text{then}\\quad}");c("\\qelse","{\\quad\\text{else}\\quad}");c("\\qotherwise","{\\quad\\text{otherwise}\\quad}");c("\\qunless","{\\quad\\text{unless}\\quad}");c("\\qgiven","{\\quad\\text{given}\\quad}");c("\\qusing","{\\quad\\text{using}\\quad}");c("\\qassume","{\\quad\\text{assume}\\quad}");c("\\qsince","{\\quad\\text{since}\\quad}");c("\\qlet","{\\quad\\text{let}\\quad}");c("\\qfor","{\\quad\\text{for}\\quad}");c("\\qall","{\\quad\\text{all}\\quad}");c("\\qeven","{\\quad\\text{even}\\quad}");c("\\qodd","{\\quad\\text{odd}\\quad}");c("\\qinteger","{\\quad\\text{integer}\\quad}");c("\\qand","{\\quad\\text{and}\\quad}");c("\\qor","{\\quad\\text{or}\\quad}");c("\\qas","{\\quad\\text{as}\\quad}");c("\\qin","{\\quad\\text{in}\\quad}");c("\\differential","{\\text{d}}");c("\\dd","{\\text{d}}");c("\\derivative","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}");c("\\dv","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}");c("\\partialderivative","{\\frac{\\partial{ #1 }}{\\partial{ #2 }}}");c("\\variation","{\\delta}");c("\\var","{\\delta}");c("\\functionalderivative","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}");c("\\fdv","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}");c("\\innerproduct","{\\left\\langle {#1} \\mid { #2} \\right\\rangle}");c("\\outerproduct","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");c("\\dyad","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");c("\\ketbra","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");c("\\op","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}");c("\\expectationvalue","{\\left\\langle {#1 } \\right\\rangle}");c("\\expval","{\\left\\langle {#1 } \\right\\rangle}");c("\\ev","{\\left\\langle {#1 } \\right\\rangle}");c("\\matrixelement","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");c("\\matrixel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");c("\\mel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");function ns(e){const t=[];e.consumeSpaces();let r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}const Ie=e=>{if(!e.parser.settings.displayMode)throw new D(`{${e.envName}} can be used only in display mode.`)},Mi=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/,Gs=e=>{let t=e.get("\\arraystretch");typeof t!="string"&&(t=mr(t.tokens)),t=isNaN(t)?null:Number(t);let r=e.get("\\arraycolsep");typeof r!="string"&&(r=mr(r.tokens));const s=Mi.exec(r),o=s?{number:+(s[1]+s[2]),unit:s[3]}:null;return[t,o]},ss=e=>{let t="";for(let r=0;r<e.length;r++)if(e[r].type==="label"){if(t)throw new D("Multiple \\labels in one row");t=e[r].string}return t};function Or(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function fe(e,{cols:t,envClasses:r,autoTag:s,singleRow:o,emptySingleRow:i,maxNumCols:l,leqno:u,arraystretch:h,arraycolsep:b},_){const $=r&&r.includes("bordermatrix")?"}":"\\end";e.gullet.beginGroup(),o||e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();let M=[];const N=[M],G=[],j=[],z=[],L=s!=null?[]:void 0;function U(){s&&e.gullet.macros.set("\\@eqnsw","1",!0)}function oe(){L&&(e.gullet.macros.get("\\df@tag")?(L.push(e.subparse([new he("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):L.push(!!s&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(U(),z.push(ns(e));;){let ne=e.parseExpression(!1,o?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),ne={type:"ordgroup",mode:e.mode,body:ne,semisimple:!0},M.push(ne);const ge=e.fetch().text;if(ge==="&"){if(l&&M.length===l)if(r.includes("array")){if(e.settings.strict)throw new D("Too few columns specified in the {array} column argument.",e.nextToken)}else throw l===2?new D("The split environment accepts no more than two columns",e.nextToken):new D("The equation environment accepts only one column",e.nextToken);e.consume()}else if(ge===$){oe(),M.length===1&&ne.body.length===0&&(N.length>1||!i)&&N.pop(),j.push(ss(ne.body)),z.length<N.length+1&&z.push([]);break}else if(ge==="\\\\"){e.consume();let ye;e.gullet.future().text!==" "&&(ye=e.parseSizeGroup(!0)),G.push(ye?ye.value:null),oe(),j.push(ss(ne.body)),z.push(ns(e)),M=[],N.push(M),U()}else throw new D("Expected & or \\\\ or \\cr or "+$,e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,body:N,cols:t,rowGaps:G,hLinesBeforeRow:z,envClasses:r,autoTag:s,scriptLevel:_,tags:L,labels:j,leqno:u,arraystretch:h,arraycolsep:b}}function js(e){return e.slice(0,1)==="d"?"display":"text"}const Di={c:"center ",l:"left ",r:"right "},os=e=>{const t=new g.MathNode("mtd",[]);return t.style={padding:"0",width:"50%"},e.envClasses.includes("multline")&&(t.style.width="7.5%"),t},ce=function(e,t){const r=[],s=e.body.length,o=e.hLinesBeforeRow;for(let h=0;h<s;h++){const b=e.body[h],_=[],$=e.scriptLevel==="text"?Y.TEXT:e.scriptLevel==="script"?Y.SCRIPT:Y.DISPLAY;for(let z=0;z<b.length;z++){const L=new g.MathNode("mtd",[W(b[z],t.withLevel($))]);if(e.envClasses.includes("multline")){const U=h===0?"left":h===s-1?"right":"center";U!=="center"&&L.classes.push("tml-"+U)}_.push(L)}const M=e.body[0].length;for(let z=0;z<M-b.length;z++)_.push(new g.MathNode("mtd",[],[],t));if(e.autoTag){const z=e.tags[h];let L;z===!0?L=new g.MathNode("mtext",[new Ds(["tml-eqn"])]):z===!1?L=new g.MathNode("mtext",[],[]):(L=ve(z[0].body,t.withLevel($),!0),L=tt(L),L.classes=["tml-tag"]),L&&(_.unshift(os(e)),_.push(os(e)),e.leqno?_[0].children.push(L):_[_.length-1].children.push(L))}const N=new g.MathNode("mtr",_,[]),G=e.labels.shift();G&&e.tags&&e.tags[h]&&(N.setAttribute("id",G),Array.isArray(e.tags[h])&&N.classes.push("tml-tageqn")),h===0&&o[0].length>0&&(o[0].length===2?N.children.forEach(z=>{z.style.borderTop="0.15em double"}):N.children.forEach(z=>{z.style.borderTop=o[0][0]?"0.06em dashed":"0.06em solid"})),o[h+1].length>0&&(o[h+1].length===2?N.children.forEach(z=>{z.style.borderBottom="0.15em double"}):N.children.forEach(z=>{z.style.borderBottom=o[h+1][0]?"0.06em dashed":"0.06em solid"}));let j=!0;for(let z=0;z<N.children.length;z++){const L=N.children[z].children[0];if(!(L&&L.type==="mpadded"&&L.attributes.height==="0px")){j=!1;break}}if(j)for(let z=0;z<N.children.length;z++)N.children[z].style.display="block",N.children[z].style.height="0",N.children[z].style.paddingTop="0",N.children[z].style.paddingBottom="0";r.push(N)}if(e.arraystretch&&e.arraystretch!==1){const h=String(1.4*e.arraystretch-.8)+"ex";for(let b=0;b<r.length;b++)for(let _=0;_<r[b].children.length;_++)r[b].children[_].style.paddingTop=h,r[b].children[_].style.paddingBottom=h}let i,l;if(e.envClasses.length>0&&(i=e.envClasses.includes("abut")||e.envClasses.includes("cases")?"0":e.envClasses.includes("small")?"0.1389":e.envClasses.includes("cd")?"0.25":"0.4",l="em"),e.arraycolsep){const h=me(e.arraycolsep,t);i=h.number.toFixed(4),l=h.unit}if(i){const h=r.length===0?0:r[0].children.length,b=(_,$)=>_===0&&$===0||_===h-1&&$===1?"0":e.envClasses[0]!=="align"?i:$===1?"0":e.autoTag?_%2?"1":"0":_%2?"0":"1";for(let _=0;_<r.length;_++)for(let $=0;$<r[_].children.length;$++)r[_].children[$].style.paddingLeft=`${b($,0)}${l}`,r[_].children[$].style.paddingRight=`${b($,1)}${l}`}if(e.envClasses.length===0)for(let h=0;h<r.length;h++)r[h].children[0].style.paddingLeft="0em",r[h].children.length===r[0].children.length&&(r[h].children[r[h].children.length-1].style.paddingRight="0em");if(e.envClasses.length>0){const h=e.envClasses.includes("align")||e.envClasses.includes("alignat");for(let b=0;b<r.length;b++){const _=r[b];if(h){for(let $=0;$<_.children.length;$++)_.children[$].classes=["tml-"+($%2?"left":"right")];if(e.autoTag){const $=e.leqno?0:_.children.length-1;_.children[$].classes=[]}}if(_.children.length>1&&e.envClasses.includes("cases")&&(_.children[1].style.paddingLeft="1em"),e.envClasses.includes("cases")||e.envClasses.includes("subarray"))for(const $ of _.children)$.classes.push("tml-left")}}let u=new g.MathNode("mtable",r);if(e.envClasses.length>0&&(e.envClasses.includes("jot")?u.classes.push("tml-jot"):e.envClasses.includes("small")&&u.classes.push("tml-small")),e.scriptLevel==="display"&&u.setAttribute("displaystyle","true"),(e.autoTag||e.envClasses.includes("multline"))&&(u.style.width="100%"),e.cols&&e.cols.length>0){const h=e.cols;let b=!1,_=0,$=h.length;for(;h[_].type==="separator";)_+=1;for(;h[$-1].type==="separator";)$-=1;if(h[0].type==="separator"){const N=h[1].type==="separator"?"0.15em double":h[0].separator==="|"?"0.06em solid ":"0.06em dashed ";for(const G of u.children)G.children[0].style.borderLeft=N}let M=e.autoTag?0:-1;for(let N=_;N<$;N++)if(h[N].type==="align"){const G=Di[h[N].align];M+=1;for(const j of u.children)G.trim()!=="center"&&M<j.children.length&&(j.children[M].classes=["tml-"+G.trim()]);b=!0}else if(h[N].type==="separator"){if(b){const G=h[N+1].type==="separator"?"0.15em double":h[N].separator==="|"?"0.06em solid":"0.06em dashed";for(const j of u.children)M<j.children.length&&(j.children[M].style.borderRight=G)}b=!1}if(h[h.length-1].type==="separator"){const N=h[h.length-2].type==="separator"?"0.15em double":h[h.length-1].separator==="|"?"0.06em solid":"0.06em dashed";for(const G of u.children)G.children[G.children.length-1].style.borderRight=N,G.children[G.children.length-1].style.paddingRight="0.4em"}}return e.envClasses.includes("small")&&(u=new g.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},Vs=function(e,t){e.envName.indexOf("ed")===-1&&Ie(e);const r=e.envName==="split",s=[],o=fe(e.parser,{cols:s,emptySingleRow:!0,autoTag:r?void 0:Or(e.envName),envClasses:["abut","jot"],maxNumCols:e.envName==="split"?2:void 0,leqno:e.parser.settings.leqno},"display");let i,l=0;const u=e.envName.indexOf("at")>-1;if(t[0]&&u){let h="";for(let b=0;b<t[0].body.length;b++){const _=I(t[0].body[b],"textord");h+=_.text}if(isNaN(h))throw new D("The alignat enviroment requires a numeric first argument.");i=Number(h),l=i*2}o.body.forEach(function(h){if(u){const b=h.length/2;if(i<b)throw new D(`Too many math in a row: expected ${i}, but got ${b}`,h[0])}else l<h.length&&(l=h.length)});for(let h=0;h<l;++h){let b="r";h%2===1&&(b="l"),s[h]={type:"align",align:b}}return e.envName==="split"||(u?o.envClasses.push("alignat"):o.envClasses[0]="align"),o};ue({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){const o=(rt(t[0])?[t[0]]:I(t[0],"ordgroup").body).map(function(h){const _=qr(h).text;if("lcr".indexOf(_)!==-1)return{type:"align",align:_};if(_==="|")return{type:"separator",separator:"|"};if(_===":")return{type:"separator",separator:":"};throw new D("Unknown column alignment: "+_,h)}),[i,l]=Gs(e.parser.gullet.macros),u={cols:o,envClasses:["array"],maxNumCols:o.length,arraystretch:i,arraycolsep:l};return fe(e.parser,u,js(e.envName))},mathmlBuilder:ce});ue({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){const t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")];let r="c";const s={envClasses:[],cols:[]};if(e.envName.charAt(e.envName.length-1)==="*"){const u=e.parser;if(u.consumeSpaces(),u.fetch().text==="["){if(u.consume(),u.consumeSpaces(),r=u.fetch().text,"lcr".indexOf(r)===-1)throw new D("Expected l or c or r",u.nextToken);u.consume(),u.consumeSpaces(),u.expect("]"),u.consume(),s.cols=[]}}const o=fe(e.parser,s,"text");o.cols=o.body.length>0?new Array(o.body[0].length).fill({type:"align",align:r}):[];const[i,l]=Gs(e.parser.gullet.macros);return o.arraystretch=i,l&&!(l===6&&l==="pt")&&(o.arraycolsep=l),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},mathmlBuilder:ce});ue({type:"array",names:["bordermatrix"],props:{numArgs:0},handler(e){const t={cols:[],envClasses:["bordermatrix"]},r=fe(e.parser,t,"text");return r.cols=r.body.length>0?new Array(r.body[0].length).fill({type:"align",align:"c"}):[],r.envClasses=[],r.arraystretch=1,e.envName==="matrix"?r:qi(r,e.delimiters)},mathmlBuilder:ce});ue({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){const t={},r=fe(e.parser,t,"script");return r.envClasses=["small"],r},mathmlBuilder:ce});ue({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){const o=(rt(t[0])?[t[0]]:I(t[0],"ordgroup").body).map(function(l){const h=qr(l).text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new D("Unknown column alignment: "+h,l)});if(o.length>1)throw new D("{subarray} can contain only one column");let i={cols:o,envClasses:["small"]};if(i=fe(e.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new D("{subarray} can contain only one column");return i},mathmlBuilder:ce});ue({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){const t={cols:[],envClasses:["cases"]},r=fe(e.parser,t,js(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},mathmlBuilder:ce});ue({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Vs,mathmlBuilder:ce});ue({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Vs,mathmlBuilder:ce});ue({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){e.envName!=="gathered"&&Ie(e);const t={cols:[],envClasses:["abut","jot"],autoTag:Or(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return fe(e.parser,t,"display")},mathmlBuilder:ce});ue({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Ie(e);const t={autoTag:Or(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,envClasses:["align"],leqno:e.parser.settings.leqno};return fe(e.parser,t,"display")},mathmlBuilder:ce});ue({type:"array",names:["multline","multline*"],props:{numArgs:0},handler(e){Ie(e);const t={autoTag:e.envName==="multline",maxNumCols:1,envClasses:["jot","multline"],leqno:e.parser.settings.leqno};return fe(e.parser,t,"display")},mathmlBuilder:ce});ue({type:"array",names:["CD"],props:{numArgs:0},handler(e){return Ie(e),Si(e.parser)},mathmlBuilder:ce});C({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new D(`${e.funcName} valid only within array environment`)}});const fr=Bs;C({type:"bordermatrix",names:["\\bordermatrix","\\matrix"],props:{numArgs:0,numOptionalArgs:1},handler:({parser:e,funcName:t},r,s)=>{let o=["(",")"];if(t==="\\bordermatrix"&&s[0]&&s[0].body){const h=s[0].body;h.length===2&&h[0].type==="atom"&&h[1].type==="atom"&&h[0].family==="open"&&h[1].family==="close"&&(o=[h[0].text,h[1].text])}e.consumeSpaces(),e.consume();const i=fr.bordermatrix,l={mode:e.mode,envName:t.slice(1),delimiters:o,parser:e},u=i.handler(l);return e.expect("}",!0),u}});C({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler({parser:e,token:t},r){const o=I(r[0],"ordgroup").body;let i="";for(let u=0;u<o.length;u++){const h=I(o[u],"textord");i+=h.text}const l=parseInt(i);if(isNaN(l))throw new D(`\\@char has non-numeric argument ${i}`,t);return{type:"textord",mode:e.mode,text:String.fromCodePoint(l)}}});const Oi=/^(#[a-f0-9]{3}|#?[a-f0-9]{6})$/i,Ni=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i,Ci=/^ *\d{1,3} *(?:, *\d{1,3} *){2}$/,Ei=/^ *[10](?:\.\d*)? *(?:, *[10](?:\.\d*)? *){2}$/,Pi=/^[a-f0-9]{6}$/i,as=e=>{let t=e.toString(16);return t.length===1&&(t="0"+t),t},is=JSON.parse(`{
  "Apricot": "#ffb484",
  "Aquamarine": "#08b4bc",
  "Bittersweet": "#c84c14",
  "blue": "#0000FF",
  "Blue": "#303494",
  "BlueGreen": "#08b4bc",
  "BlueViolet": "#503c94",
  "BrickRed": "#b8341c",
  "brown": "#BF8040",
  "Brown": "#802404",
  "BurntOrange": "#f8941c",
  "CadetBlue": "#78749c",
  "CarnationPink": "#f884b4",
  "Cerulean": "#08a4e4",
  "CornflowerBlue": "#40ace4",
  "cyan": "#00FFFF",
  "Cyan": "#08acec",
  "Dandelion": "#ffbc44",
  "darkgray": "#404040",
  "DarkOrchid": "#a8548c",
  "Emerald": "#08ac9c",
  "ForestGreen": "#089c54",
  "Fuchsia": "#90348c",
  "Goldenrod": "#ffdc44",
  "gray": "#808080",
  "Gray": "#98949c",
  "green": "#00FF00",
  "Green": "#08a44c",
  "GreenYellow": "#e0e474",
  "JungleGreen": "#08ac9c",
  "Lavender": "#f89cc4",
  "lightgray": "#c0c0c0",
  "lime": "#BFFF00",
  "LimeGreen": "#90c43c",
  "magenta": "#FF00FF",
  "Magenta": "#f0048c",
  "Mahogany": "#b0341c",
  "Maroon": "#b03434",
  "Melon": "#f89c7c",
  "MidnightBlue": "#086494",
  "Mulberry": "#b03c94",
  "NavyBlue": "#086cbc",
  "olive": "#7F7F00",
  "OliveGreen": "#407c34",
  "orange": "#FF8000",
  "Orange": "#f8843c",
  "OrangeRed": "#f0145c",
  "Orchid": "#b074ac",
  "Peach": "#f8945c",
  "Periwinkle": "#8074bc",
  "PineGreen": "#088c74",
  "pink": "#ff7f7f",
  "Plum": "#98248c",
  "ProcessBlue": "#08b4ec",
  "purple": "#BF0040",
  "Purple": "#a0449c",
  "RawSienna": "#983c04",
  "red": "#ff0000",
  "Red": "#f01c24",
  "RedOrange": "#f86434",
  "RedViolet": "#a0246c",
  "Rhodamine": "#f0549c",
  "Royallue": "#0874bc",
  "RoyalPurple": "#683c9c",
  "RubineRed": "#f0047c",
  "Salmon": "#f8948c",
  "SeaGreen": "#30bc9c",
  "Sepia": "#701404",
  "SkyBlue": "#48c4dc",
  "SpringGreen": "#c8dc64",
  "Tan": "#e09c74",
  "teal": "#007F7F",
  "TealBlue": "#08acb4",
  "Thistle": "#d884b4",
  "Turquoise": "#08b4cc",
  "violet": "#800080",
  "Violet": "#60449c",
  "VioletRed": "#f054a4",
  "WildStrawberry": "#f0246c",
  "yellow": "#FFFF00",
  "Yellow": "#fff404",
  "YellowGreen": "#98cc6c",
  "YellowOrange": "#ffa41c"
}`),Me=(e,t)=>{let r="";if(e==="HTML"){if(!Oi.test(t))throw new D("Invalid HTML input.");r=t}else if(e==="RGB"){if(!Ci.test(t))throw new D("Invalid RGB input.");t.split(",").map(s=>{r+=as(Number(s.trim()))})}else{if(!Ei.test(t))throw new D("Invalid rbg input.");t.split(",").map(s=>{const o=Number(s.trim());if(o>1)throw new D("Color rgb input must be < 1.");r+=as(Number((o*255).toFixed(0)))})}return r.charAt(0)!=="#"&&(r="#"+r),r},Fe=(e,t,r)=>{const s=`\\\\color@${e}`;if(!Ni.exec(e))throw new D("Invalid color: '"+e+"'",r);return Pi.test(e)?"#"+e:(e.charAt(0)==="#"||(t.has(s)?e=t.get(s).tokens[0].text:is[e]&&(e=is[e])),e)},Us=(e,t)=>{let r=re(e.body,t.withColor(e.color));return r.length===0&&r.push(new g.MathNode("mrow")),r=r.map(s=>(s.style.color=e.color,s)),g.newDocumentFragment(r)};C({type:"color",names:["\\textcolor"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","original"]},handler({parser:e,token:t},r,s){const o=s[0]&&I(s[0],"raw").string;let i="";if(o){const u=I(r[0],"raw").string;i=Me(o,u)}else i=Fe(I(r[0],"raw").string,e.gullet.macros,t);const l=r[1];return{type:"color",mode:e.mode,color:i,isTextColor:!0,body:te(l)}},mathmlBuilder:Us});C({type:"color",names:["\\color"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw"]},handler({parser:e,breakOnTokenText:t,token:r},s,o){const i=o[0]&&I(o[0],"raw").string;let l="";if(i){const h=I(s[0],"raw").string;l=Me(i,h)}else l=Fe(I(s[0],"raw").string,e.gullet.macros,r);const u=e.parseExpression(!0,t,!0);return{type:"color",mode:e.mode,color:l,isTextColor:!1,body:u}},mathmlBuilder:Us});C({type:"color",names:["\\definecolor"],props:{numArgs:3,allowedInText:!0,argTypes:["raw","raw","raw"]},handler({parser:e,funcName:t,token:r},s){const o=I(s[0],"raw").string;if(!/^[A-Za-z]+$/.test(o))throw new D("Color name must be latin letters.",r);const i=I(s[1],"raw").string;if(!["HTML","RGB","rgb"].includes(i))throw new D("Color model must be HTML, RGB, or rgb.",r);const l=I(s[2],"raw").string,u=Me(i,l);return e.gullet.macros.set(`\\\\color@${o}`,{tokens:[{text:u}],numArgs:0}),{type:"internal",mode:e.mode}}});C({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler({parser:e},t,r){const s=e.gullet.future().text==="["?e.parseSizeGroup(!0):null,o=!e.settings.displayMode;return{type:"cr",mode:e.mode,newLine:o,size:s&&I(s,"size").value}},mathmlBuilder(e,t){const r=new g.MathNode("mo");if(e.newLine&&(r.setAttribute("linebreak","newline"),e.size)){const s=me(e.size,t);r.setAttribute("height",s.number+s.unit)}return r}});const gr={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Qe=e=>{const t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new D("Expected a control sequence",e);return t},Bi=e=>{let t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},Hs=(e,t,r,s)=>{let o=e.gullet.macros.get(r.text);o==null&&(r.noexpand=!0,o={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,o,s)};C({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler({parser:e,funcName:t}){e.consumeSpaces();const r=e.fetch();if(gr[r.text])return(t==="\\global"||t==="\\\\globallong")&&(r.text=gr[r.text]),I(e.parseFunction(),"internal");throw new D("Invalid token after macro prefix",r)}});C({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r=e.gullet.popToken();const s=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new D("Expected a control sequence",r);let o=0,i;const l=[[]];for(;e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){i=e.gullet.future(),l[o].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new D(`Invalid argument number "${r.text}"`);if(parseInt(r.text)!==o+1)throw new D(`Argument number "${r.text}" out of order`);o++,l.push([])}else{if(r.text==="EOF")throw new D("Expected a macro definition");l[o].push(r.text)}let{tokens:u}=e.gullet.consumeArg();if(i&&u.unshift(i),t==="\\edef"||t==="\\xdef"){if(u=e.gullet.expandTokens(u),u.length>e.gullet.settings.maxExpand)throw new D("Too many expansions in an "+t);u.reverse()}return e.gullet.macros.set(s,{tokens:u,numArgs:o,delimiters:l},t===gr[t]),{type:"internal",mode:e.mode}}});C({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=Qe(e.gullet.popToken());e.gullet.consumeSpaces();const s=Bi(e);return Hs(e,r,s,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});C({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=Qe(e.gullet.popToken()),s=e.gullet.popToken(),o=e.gullet.popToken();return Hs(e,r,o,t==="\\\\globalfuture"),e.gullet.pushToken(o),e.gullet.pushToken(s),{type:"internal",mode:e.mode}}});C({type:"internal",names:["\\newcommand","\\renewcommand","\\providecommand"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){let r="";const s=e.gullet.popToken();s.text==="{"?(r=Qe(e.gullet.popToken()),e.gullet.popToken()):r=Qe(s);const o=e.gullet.isDefined(r);if(o&&t==="\\newcommand")throw new D(`\\newcommand{${r}} attempting to redefine ${r}; use \\renewcommand`);if(!o&&t==="\\renewcommand")throw new D(`\\renewcommand{${r}} when command ${r} does not yet exist; use \\newcommand`);let i=0;if(e.gullet.future().text==="["){let u=e.gullet.popToken();if(u=e.gullet.popToken(),!/^[0-9]$/.test(u.text))throw new D(`Invalid number of arguments: "${u.text}"`);if(i=parseInt(u.text),u=e.gullet.popToken(),u.text!=="]")throw new D(`Invalid argument "${u.text}"`)}const{tokens:l}=e.gullet.consumeArg();return t==="\\providecommand"&&e.gullet.macros.has(r)||e.gullet.macros.set(r,{tokens:l,numArgs:i}),{type:"internal",mode:e.mode}}});const br={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ws=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","â¦‡","\\llparenthesis","â¦ˆ","\\rrparenthesis","\\lfloor","\\rfloor","âŒŠ","âŒ‹","\\lceil","\\rceil","âŒˆ","âŒ‰","<",">","\\langle","âŸ¨","\\rangle","âŸ©","\\lAngle","âŸª","\\rAngle","âŸ«","\\llangle","â¦‰","\\rrangle","â¦Š","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","âŸ®","âŸ¯","\\lmoustache","\\rmoustache","âŽ°","âŽ±","\\llbracket","\\rrbracket","âŸ¦","âŸ¦","\\lBrace","\\rBrace","â¦ƒ","â¦„","/","\\backslash","|","\\vert","\\|","\\Vert","â€–","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],Fi=["}","\\left","\\middle","\\right"],nt=e=>e.length>0&&(Ws.includes(e)||br[e]||Fi.includes(e)),ls=[0,1.2,1.8,2.4,3];function ze(e,t){e.type==="ordgroup"&&e.body.length===1&&(e=e.body[0]);const r=rt(e);if(r&&Ws.includes(r.text))return["<","\\lt"].includes(r.text)&&(r.text="âŸ¨"),[">","\\gt"].includes(r.text)&&(r.text="âŸ©"),r;throw r?new D(`Invalid delimiter '${r.text}' after '${t.funcName}'`,e):new D(`Invalid delimiter type '${e.type}'`,e)}const zi=["/","\\","\\backslash","\\vert","|"];C({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=ze(t[0],e),s={type:"delimsizing",mode:e.parser.mode,size:br[e.funcName].size,mclass:br[e.funcName].mclass,delim:r.text},o=e.parser.fetch().text;return o!=="^"&&o!=="_"?s:{type:"ordgroup",mode:"math",body:[s,{type:"ordgroup",mode:"math",body:[]}]}},mathmlBuilder:e=>{const t=[];e.delim==="."&&(e.delim=""),t.push(ie(e.delim,e.mode));const r=new g.MathNode("mo",t);return e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),(zi.includes(e.delim)||e.delim.indexOf("arrow")>-1)&&r.setAttribute("stretchy","true"),r.setAttribute("symmetric","true"),r.setAttribute("minsize",ls[e.size]+"em"),r.setAttribute("maxsize",ls[e.size]+"em"),r}});function Li(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}C({type:"leftright-right",names:["\\right"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>({type:"leftright-right",mode:e.parser.mode,delim:ze(t[0],e).text})});C({type:"leftright",names:["\\left"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=ze(t[0],e),s=e.parser;++s.leftrightDepth;let o=s.parseExpression(!1,null,!0),i=s.fetch();for(;i.text==="\\middle";){s.consume();const u=s.fetch().text;if(!Q.math[u])throw new D(`Invalid delimiter '${u}' after '\\middle'`);ze({type:"atom",mode:"math",text:u},{funcName:"\\middle"}),o.push({type:"middle",mode:"math",delim:u}),s.consume(),o=o.concat(s.parseExpression(!1,null,!0)),i=s.fetch()}--s.leftrightDepth,s.expect("\\right",!1);const l=I(s.parseFunction(),"leftright-right");return{type:"leftright",mode:s.mode,body:o,left:r.text,right:l.delim}},mathmlBuilder:(e,t)=>{Li(e);const r=re(e.body,t);e.left==="."&&(e.left="");const s=new g.MathNode("mo",[ie(e.left,e.mode)]);s.setAttribute("fence","true"),s.setAttribute("form","prefix"),(e.left==="/"||e.left==="\\"||e.left.indexOf("arrow")>-1)&&s.setAttribute("stretchy","true"),r.unshift(s),e.right==="."&&(e.right="");const o=new g.MathNode("mo",[ie(e.right,e.mode)]);if(o.setAttribute("fence","true"),o.setAttribute("form","postfix"),(e.right==="âˆ–"||e.right.indexOf("arrow")>-1)&&o.setAttribute("stretchy","true"),e.body.length>0){const i=e.body[e.body.length-1];i.type==="color"&&!i.isTextColor&&o.setAttribute("mathcolor",i.color)}return r.push(o),Sr(r)}});C({type:"middle",names:["\\middle"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=ze(t[0],e);if(!e.parser.leftrightDepth)throw new D("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},mathmlBuilder:(e,t)=>{const r=ie(e.delim,e.mode),s=new g.MathNode("mo",[r]);return s.setAttribute("fence","true"),e.delim.indexOf("arrow")>-1&&s.setAttribute("stretchy","true"),s.setAttribute("form","prefix"),s.setAttribute("lspace","0.05em"),s.setAttribute("rspace","0.05em"),s}});const Re=(e,t)=>{const r=new g.MathNode("menclose",[W(e.body,t)]);switch(e.label){case"\\overline":r.setAttribute("notation","top"),r.classes.push("tml-overline");break;case"\\underline":r.setAttribute("notation","bottom"),r.classes.push("tml-underline");break;case"\\cancel":r.setAttribute("notation","updiagonalstrike"),r.children.push(new g.MathNode("mrow",[],["tml-cancel","upstrike"]));break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike"),r.children.push(new g.MathNode("mrow",[],["tml-cancel","downstrike"]));break;case"\\sout":r.setAttribute("notation","horizontalstrike"),r.children.push(new g.MathNode("mrow",[],["tml-cancel","sout"]));break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike"),r.classes.push("tml-xcancel");break;case"\\longdiv":r.setAttribute("notation","longdiv"),r.classes.push("longdiv-top"),r.children.push(new g.MathNode("mrow",[],["longdiv-arc"]));break;case"\\phase":r.setAttribute("notation","phasorangle"),r.classes.push("phasor-bottom"),r.children.push(new g.MathNode("mrow",[],["phasor-angle"]));break;case"\\textcircled":r.setAttribute("notation","circle"),r.classes.push("circle-pad"),r.children.push(new g.MathNode("mrow",[],["textcircle"]));break;case"\\angl":r.setAttribute("notation","actuarial"),r.classes.push("actuarial");break;case"\\boxed":r.setAttribute("notation","box"),r.style.padding="3pt",r.style.border="1px solid",r.setAttribute("scriptlevel","0"),r.setAttribute("displaystyle","true");break;case"\\fbox":r.setAttribute("notation","box"),r.classes.push("tml-fbox");break;case"\\fcolorbox":case"\\colorbox":{r.style.padding="3pt",e.label==="\\fcolorbox"&&(r.style.border="0.0667em solid "+String(e.borderColor));break}}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};C({type:"enclose",names:["\\colorbox"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","text"]},handler({parser:e,funcName:t},r,s){const o=s[0]&&I(s[0],"raw").string;let i="";if(o){const u=I(r[0],"raw").string;i=Me(o,u)}else i=Fe(I(r[0],"raw").string,e.gullet.macros);const l=r[1];return{type:"enclose",mode:e.mode,label:t,backgroundColor:i,body:l}},mathmlBuilder:Re});C({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","raw","text"]},handler({parser:e,funcName:t},r,s){const o=s[0]&&I(s[0],"raw").string;let i="",l;if(o){const h=I(r[0],"raw").string,b=I(r[0],"raw").string;i=Me(o,h),l=Me(o,b)}else i=Fe(I(r[0],"raw").string,e.gullet.macros),l=Fe(I(r[1],"raw").string,e.gullet.macros);const u=r[2];return{type:"enclose",mode:e.mode,label:t,backgroundColor:l,borderColor:i,body:u}},mathmlBuilder:Re});C({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler({parser:e},t){return{type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]}}});C({type:"enclose",names:["\\angl","\\cancel","\\bcancel","\\xcancel","\\sout","\\overline","\\boxed","\\longdiv","\\phase"],props:{numArgs:1},handler({parser:e,funcName:t},r){const s=r[0];return{type:"enclose",mode:e.mode,label:t,body:s}},mathmlBuilder:Re});C({type:"enclose",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler({parser:e,funcName:t},r){const s=r[0];return{type:"enclose",mode:e.mode,label:t,body:s}},mathmlBuilder:Re});C({type:"enclose",names:["\\textcircled"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const s=r[0];return{type:"enclose",mode:e.mode,label:t,body:s}},mathmlBuilder:Re});C({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler({parser:e,funcName:t},r){const s=r[0];if(s.type!=="ordgroup")throw new D("Invalid environment name",s);let o="";for(let i=0;i<s.body.length;++i)o+=I(s.body[i],"textord").text;if(t==="\\begin"){if(!Object.prototype.hasOwnProperty.call(fr,o))throw new D("No such environment: "+o,s);const i=fr[o],{args:l,optArgs:u}=e.parseArguments("\\begin{"+o+"}",i),h={mode:e.mode,envName:o,parser:e},b=i.handler(h,l,u);e.expect("\\end",!1);const _=e.nextToken,$=I(e.parseFunction(),"environment");if($.name!==o)throw new D(`Mismatch: \\begin{${o}} matched by \\end{${$.name}}`,_);return b}return{type:"environment",mode:e.mode,name:o,nameGroup:s}}});C({type:"envTag",names:["\\env@tag"],props:{numArgs:1,argTypes:["math"]},handler({parser:e},t){return{type:"envTag",mode:e.mode,body:t[0]}},mathmlBuilder(e,t){return new g.MathNode("mrow")}});C({type:"noTag",names:["\\env@notag"],props:{numArgs:0},handler({parser:e}){return{type:"noTag",mode:e.mode}},mathmlBuilder(e,t){return new g.MathNode("mrow")}});const Ii=(e,t)=>{if(t!=="mathrm"||e.body.type!=="ordgroup"||e.body.body.length===1||e.body.body[0].type!=="mathord")return!1;for(let r=1;r<e.body.body.length;r++){const s=e.body.body[r].type;if(!(s==="mathord"||s==="textord"&&!isNaN(e.body.body[r].text)))return!1}return!0},Zs=(e,t)=>{const r=e.font,s=t.withFont(r),o=W(e.body,s);if(o.children.length===0)return o;if(r==="boldsymbol"&&["mo","mpadded","mrow"].includes(o.type))return o.style.fontWeight="bold",o;if(Ii(e,r)){const u=o.children[0].children[0].children?o.children[0].children[0]:o.children[0];delete u.attributes.mathvariant;for(let b=1;b<o.children.length;b++)u.children[0].text+=o.children[b].children[0].children?o.children[b].children[0].children[0].text:o.children[b].children[0].text;const h=new g.MathNode("mpadded",[u]);return h.setAttribute("lspace","0"),h}let i=o.children[0].type==="mo";for(let u=1;u<o.children.length;u++)o.children[u].type==="mo"&&r==="boldsymbol"&&(o.children[u].style.fontWeight="bold"),o.children[u].type!=="mi"&&(i=!1),(o.children[u].attributes&&o.children[u].attributes.mathvariant||"")!=="normal"&&(i=!1);if(!i)return o;const l=o.children[0];for(let u=1;u<o.children.length;u++)l.children.push(o.children[u].children[0]);if(l.attributes.mathvariant&&l.attributes.mathvariant==="normal"){const u=new g.MathNode("mtext",new g.TextNode("â€‹"));return new g.MathNode("mrow",[u,l])}return l},us={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};C({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\up@greek","\\boldsymbol","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathsfit","\\mathtt","\\Bbb","\\bm","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const s=Be(r[0]);let o=t;return o in us&&(o=us[o]),{type:"font",mode:e.mode,font:o.slice(1),body:s}},mathmlBuilder:Zs});C({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:({parser:e,funcName:t,breakOnTokenText:r},s)=>{const{mode:o}=e,i=e.parseExpression(!0,r,!0),l=`math${t.slice(1)}`;return{type:"font",mode:o,font:l,body:{type:"ordgroup",mode:e.mode,body:i}}},mathmlBuilder:Zs});const cs=["display","text","script","scriptscript"],Ri={auto:-1,display:0,text:0,script:1,scriptscript:2},Nr=(e,t)=>{const r=e.scriptLevel==="auto"?t.incrementLevel():e.scriptLevel==="display"?t.withLevel(Y.TEXT):e.scriptLevel==="text"?t.withLevel(Y.SCRIPT):t.withLevel(Y.SCRIPTSCRIPT),s=W(e.numer,r),o=W(e.denom,r);t.level===3&&(s.style.mathDepth="2",s.setAttribute("scriptlevel","2"),o.style.mathDepth="2",o.setAttribute("scriptlevel","2"));let i=new g.MathNode("mfrac",[s,o]);if(!e.hasBarLine)i.setAttribute("linethickness","0px");else if(e.barSize){const l=me(e.barSize,t);i.setAttribute("linethickness",l.number+l.unit)}if(e.leftDelim!=null||e.rightDelim!=null){const l=[];if(e.leftDelim!=null){const u=new g.MathNode("mo",[new g.TextNode(e.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),l.push(u)}if(l.push(i),e.rightDelim!=null){const u=new g.MathNode("mo",[new g.TextNode(e.rightDelim.replace("\\",""))]);u.setAttribute("fence","true"),l.push(u)}i=Sr(l)}return e.scriptLevel!=="auto"&&(i=new g.MathNode("mstyle",[i]),i.setAttribute("displaystyle",String(e.scriptLevel==="display")),i.setAttribute("scriptlevel",Ri[e.scriptLevel])),i};C({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const s=r[0],o=r[1];let i=!1,l=null,u=null,h="auto";switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":l="(",u=")";break;case"\\\\bracefrac":l="\\{",u="\\}";break;case"\\\\brackfrac":l="[",u="]";break;default:throw new Error("Unrecognized genfrac command")}switch(t){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:e.mode,continued:!1,numer:s,denom:o,hasBarLine:i,leftDelim:l,rightDelim:u,scriptLevel:h,barSize:null}},mathmlBuilder:Nr});C({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:({parser:e,funcName:t},r)=>{const s=r[0],o=r[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:s,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,scriptLevel:"display",barSize:null}}});C({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler({parser:e,funcName:t,token:r}){let s;switch(t){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:s,token:r}}});const ds=function(e){let t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};C({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler({parser:e},t){const r=t[4],s=t[5],o=Be(t[0]),i=o.type==="atom"&&o.family==="open"?ds(o.text):null,l=Be(t[1]),u=l.type==="atom"&&l.family==="close"?ds(l.text):null,h=I(t[2],"size");let b,_=null;h.isBlank?b=!0:(_=h.value,b=_.number>0);let $="auto",M=t[3];if(M.type==="ordgroup"){if(M.body.length>0){const N=I(M.body[0],"textord");$=cs[Number(N.text)]}}else M=I(M,"textord"),$=cs[Number(M.text)];return{type:"genfrac",mode:e.mode,numer:r,denom:s,continued:!1,hasBarLine:b,barSize:_,leftDelim:i,rightDelim:u,scriptLevel:$}},mathmlBuilder:Nr});C({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler({parser:e,funcName:t,token:r},s){return{type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",barSize:I(s[0],"size").value,token:r}}});C({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:({parser:e,funcName:t},r)=>{const s=r[0],o=Za(I(r[1],"infix").barSize),i=r[2],l=o.number>0;return{type:"genfrac",mode:e.mode,numer:s,denom:i,continued:!1,hasBarLine:l,barSize:o,leftDelim:null,rightDelim:null,scriptLevel:"auto"}},mathmlBuilder:Nr});C({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["hbox"],allowedInArgument:!0,allowedInText:!1},handler({parser:e},t){return{type:"hbox",mode:e.mode,body:te(t[0])}},mathmlBuilder(e,t){const r=t.withLevel(Y.TEXT),s=ve(e.body,r);return tt(s)}});const Gi=(e,t)=>{const r=et.mathMLnode(e.label);return r.style["math-depth"]=0,new g.MathNode(e.isOver?"mover":"munder",[W(e.base,t),r])};C({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler({parser:e,funcName:t},r){return{type:"horizBrace",mode:e.mode,label:t,isOver:/^\\over/.test(t),base:r[0]}},mathmlBuilder:Gi});C({type:"html",names:["\\class","\\id","\\style","\\data"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:({parser:e,funcName:t,token:r},s)=>{const o=I(s[0],"raw").string,i=s[1];if(e.settings.strict)throw new D(`Function "${t}" is disabled in strict mode`,r);let l;const u={};switch(t){case"\\class":u.class=o,l={command:"\\class",class:o};break;case"\\id":u.id=o,l={command:"\\id",id:o};break;case"\\style":u.style=o,l={command:"\\style",style:o};break;case"\\data":{const h=o.split(",");for(let b=0;b<h.length;b++){const _=h[b].split("=");if(_.length!==2)throw new D("Error parsing key-value for \\data");u["data-"+_[0].trim()]=_[1].trim()}l={command:"\\data",attributes:u};break}default:throw new Error("Unrecognized html command")}if(!e.settings.isTrusted(l))throw new D(`Function "${t}" is not trusted`,r);return{type:"html",mode:e.mode,attributes:u,body:te(i)}},mathmlBuilder:(e,t)=>{const r=ve(e.body,t),s=[];e.attributes.class&&s.push(...e.attributes.class.trim().split(/\s+/)),r.classes=s;for(const o in e.attributes)o!=="class"&&Object.prototype.hasOwnProperty.call(e.attributes,o)&&r.setAttribute(o,e.attributes[o]);return r}});const or=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};{const t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new D("Invalid size: '"+e+"' in \\includegraphics");const r={number:+(t[1]+t[2]),unit:t[3]};if(!Es(r))throw new D("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r}};C({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:({parser:e,token:t},r,s)=>{let o={number:0,unit:"em"},i={number:.9,unit:"em"},l={number:0,unit:"em"},u="";if(s[0]){const _=I(s[0],"raw").string.split(",");for(let $=0;$<_.length;$++){const M=_[$].split("=");if(M.length===2){const N=M[1].trim();switch(M[0].trim()){case"alt":u=N;break;case"width":o=or(N);break;case"height":i=or(N);break;case"totalheight":l=or(N);break;default:throw new D("Invalid key: '"+M[0]+"' in \\includegraphics.")}}}}const h=I(r[0],"url").url;if(u===""&&(u=h,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),!e.settings.isTrusted({command:"\\includegraphics",url:h}))throw new D('Function "\\includegraphics" is not trusted',t);return{type:"includegraphics",mode:e.mode,alt:u,width:o,height:i,totalheight:l,src:h}},mathmlBuilder:(e,t)=>{const r=me(e.height,t),s={number:0,unit:"em"};e.totalheight.number>0&&e.totalheight.unit===r.unit&&e.totalheight.number>r.number&&(s.number=e.totalheight.number-r.number,s.unit=r.unit);let o=0;e.width.number>0&&(o=me(e.width,t));const i={height:r.number+s.number+"em"};o.number>0&&(i.width=o.number+o.unit),s.number>0&&(i.verticalAlign=-s.number+s.unit);const l=new ti(e.src,e.alt,i);return l.height=r,l.depth=s,new g.MathNode("mtext",[l])}});C({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler({parser:e,funcName:t,token:r},s){const o=I(s[0],"size");if(e.settings.strict){const i=t[1]==="m",l=o.value.unit==="mu";if(i){if(!l)throw new D(`LaTeX's ${t} supports only mu units, not ${o.value.unit} units`,r);if(e.mode!=="math")throw new D(`LaTeX's ${t} works only in math mode`,r)}else if(l)throw new D(`LaTeX's ${t} doesn't support mu units`,r)}return{type:"kern",mode:e.mode,dimension:o.value}},mathmlBuilder(e,t){const r=me(e.dimension,t),s=r.number>0&&r.unit==="em"?Xs(r.number):"";if(e.mode==="text"&&s.length>0){const o=new g.TextNode(s);return new g.MathNode("mtext",[o])}else if(r.number>=0){const o=new g.MathNode("mspace");return o.setAttribute("width",r.number+r.unit),o}else{const o=new g.MathNode("mrow");return o.style.marginLeft=r.number+r.unit,o}}});const Xs=function(e){return e>=.05555&&e<=.05556?"â€Š":e>=.1666&&e<=.1667?"â€‰":e>=.2222&&e<=.2223?"â€…":e>=.2777&&e<=.2778?"â€…â€Š":""},Js=/[^A-Za-z_0-9-]/g;C({type:"label",names:["\\label"],props:{numArgs:1,argTypes:["raw"]},handler({parser:e},t){return{type:"label",mode:e.mode,string:t[0].string.replace(Js,"")}},mathmlBuilder(e,t){const r=new g.MathNode("mrow",[],["tml-label"]);return e.string.length>0&&r.setLabel(e.string),r}});const ji=["\\clap","\\llap","\\rlap"];C({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap","\\clap","\\llap","\\rlap"],props:{numArgs:1,allowedInText:!0},handler:({parser:e,funcName:t,token:r},s)=>{if(ji.includes(t)){if(e.settings.strict&&e.mode!=="text")throw new D(`{${t}} can be used only in text mode.
 Try \\math${t.slice(1)}`,r);t=t.slice(1)}else t=t.slice(5);const o=s[0];return{type:"lap",mode:e.mode,alignment:t,body:o}},mathmlBuilder:(e,t)=>{let r;if(e.alignment==="llap"){const i=re(te(e.body),t),l=new g.MathNode("mphantom",i);r=new g.MathNode("mpadded",[l]),r.setAttribute("width","0.1px")}const s=W(e.body,t);let o;if(e.alignment==="llap"?(s.style.position="absolute",s.style.right="0",s.style.bottom="0",o=new g.MathNode("mpadded",[r,s])):o=new g.MathNode("mpadded",[s]),e.alignment==="rlap")e.body.body.length>0&&e.body.body[0].type==="genfrac"&&o.setAttribute("lspace","0.16667em");else{const i=e.alignment==="llap"?"-1":"-0.5";o.setAttribute("lspace",i+"width"),e.alignment==="llap"?o.style.position="relative":(o.style.display="flex",o.style.justifyContent="center")}return o.setAttribute("width","0.1px"),o}});C({type:"ordgroup",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler({funcName:e,parser:t},r){const s=t.mode;t.switchMode("math");const o=e==="\\("?"\\)":"$",i=t.parseExpression(!1,o);return t.expect(o),t.switchMode(s),{type:"ordgroup",mode:t.mode,body:i}}});C({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new D(`Mismatched ${e.funcName}`,t)}});const Vi=(e,t)=>{switch(t.level){case Y.DISPLAY:return e.display;case Y.TEXT:return e.text;case Y.SCRIPT:return e.script;case Y.SCRIPTSCRIPT:return e.scriptscript;default:return e.text}};C({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:({parser:e},t)=>({type:"mathchoice",mode:e.mode,display:te(t[0]),text:te(t[1]),script:te(t[2]),scriptscript:te(t[3])}),mathmlBuilder:(e,t)=>{const r=Vi(e,t);return ve(r,t)}});const Ui=["text","textord","mathord","atom"];function Ks(e,t){let r;const s=re(e.body,t);if(e.mclass==="minner")r=new g.MathNode("mpadded",s);else if(e.mclass==="mord")e.isCharacterBox||s[0].type==="mathord"?(r=s[0],r.type="mi",r.children.length===1&&r.children[0].text&&r.children[0].text==="âˆ‡"&&r.setAttribute("mathvariant","normal")):r=new g.MathNode("mi",s);else{r=new g.MathNode("mrow",s),e.mustPromote?(r=s[0],r.type="mo",e.isCharacterBox&&e.body[0].text&&/[A-Za-z]/.test(e.body[0].text)&&r.setAttribute("mathvariant","italic")):r=new g.MathNode("mrow",s);const o=t.level<2;r.type==="mrow"?o&&(e.mclass==="mbin"?(r.children.unshift(K(.2222)),r.children.push(K(.2222))):e.mclass==="mrel"?(r.children.unshift(K(.2778)),r.children.push(K(.2778))):e.mclass==="mpunct"?r.children.push(K(.1667)):e.mclass==="minner"&&(r.children.unshift(K(.0556)),r.children.push(K(.0556)))):e.mclass==="mbin"?(r.attributes.lspace=o?"0.2222em":"0",r.attributes.rspace=o?"0.2222em":"0"):e.mclass==="mrel"?(r.attributes.lspace=o?"0.2778em":"0",r.attributes.rspace=o?"0.2778em":"0"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace=o?"0.1667em":"0"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&o&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em"),e.mclass==="mopen"||e.mclass==="mclose"||(delete r.attributes.stretchy,delete r.attributes.form)}return r}C({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler({parser:e,funcName:t},r){const s=r[0],o=H.isCharacterBox(s);let i=!0;const l={type:"mathord",text:"",mode:e.mode},u=s.body?s.body:[s];for(const h of u)if(Ui.includes(h.type))Q[e.mode][h.text]?l.text+=Q[e.mode][h.text].replace:h.text?l.text+=h.text:h.body&&h.body.map(b=>{l.text+=b.text});else{i=!1;break}return i&&t==="\\mathord"&&l.type==="mathord"&&l.text.length>1?l:{type:"mclass",mode:e.mode,mclass:"m"+t.slice(5),body:te(i?l:s),isCharacterBox:o,mustPromote:i}},mathmlBuilder:Ks});const Ys=e=>{const t=e.type==="ordgroup"&&e.body.length&&e.body.length===1?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};C({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler({parser:e},t){return{type:"mclass",mode:e.mode,mclass:Ys(t[0]),body:te(t[1]),isCharacterBox:H.isCharacterBox(t[1])}}});C({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler({parser:e,funcName:t},r){const s=r[1],o=r[0];let i;t!=="\\stackrel"?i=Ys(s):i="mrel";const u={type:i==="mrel"||i==="mbin"?"op":"ordgroup",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:t!=="\\stackrel",body:te(s)};return{type:"supsub",mode:o.mode,stack:!0,base:u,sup:t==="\\underset"?null:o,sub:t==="\\underset"?o:null}},mathmlBuilder:Ks});const He=(e,t,r)=>{if(!e)return r;const s=W(e,t);return s.type==="mrow"&&s.children.length===0?r:s};C({type:"multiscript",names:["\\sideset","\\pres@cript"],props:{numArgs:3},handler({parser:e,funcName:t,token:r},s){if(s[2].body.length===0)throw new D(t+"cannot parse an empty base.");const o=s[2].body[0];if(e.settings.strict&&t==="\\sideset"&&!o.symbol)throw new D("The base of \\sideset must be a big operator. Try \\prescript.");if(s[0].body.length>0&&s[0].body[0].type!=="supsub"||s[1].body.length>0&&s[1].body[0].type!=="supsub")throw new D("\\sideset can parse only subscripts and superscripts in its first two arguments",r);const i=s[0].body.length>0?s[0].body[0]:null,l=s[1].body.length>0?s[1].body[0]:null;return!i&&!l?o:i?{type:"multiscript",mode:e.mode,isSideset:t==="\\sideset",prescripts:i,postscripts:l,base:o}:{type:"styling",mode:e.mode,scriptLevel:"text",body:[{type:"supsub",mode:e.mode,base:o,sup:l.sup,sub:l.sub}]}},mathmlBuilder(e,t){const r=W(e.base,t),s=new g.MathNode("mprescripts"),o=new g.MathNode("none");let i=[];const l=He(e.prescripts.sub,t,o),u=He(e.prescripts.sup,t,o);if(e.isSideset&&(l.setAttribute("style","text-align: left;"),u.setAttribute("style","text-align: left;")),e.postscripts){const h=He(e.postscripts.sub,t,o),b=He(e.postscripts.sup,t,o);i=[r,h,b,s,l,u]}else i=[r,s,l,u];return new g.MathNode("mmultiscripts",i)}});C({type:"not",names:["\\not"],props:{numArgs:1,primitive:!0,allowedInText:!1},handler({parser:e},t){const r=H.isCharacterBox(t[0]);let s;return r?(s=te(t[0]),s[0].text.charAt(0)==="\\"&&(s[0].text=Q.math[s[0].text].replace),s[0].text=s[0].text.slice(0,1)+"Ì¸"+s[0].text.slice(1)):s=[{type:"textord",mode:"math",text:"Ì¸"},{type:"kern",mode:"math",dimension:{number:-.6,unit:"em"}},t[0]],{type:"not",mode:e.mode,body:s,isCharacterBox:r}},mathmlBuilder(e,t){return e.isCharacterBox?re(e.body,t,!0)[0]:ve(e.body,t)}});const Hi=["textord","mathord","atom"],Wi=["\\smallint"],Cr=["textord","mathord","ordgroup","close","leftright","font"],hs=e=>{e.attributes.lspace="0.1667em",e.attributes.rspace="0.1667em"},Ge=(e,t)=>{let r;if(e.symbol)r=new se("mo",[ie(e.name,e.mode)]),Wi.includes(e.name)?r.setAttribute("largeop","false"):r.setAttribute("movablelimits","false"),e.fromMathOp&&hs(r);else if(e.body)r=new se("mo",re(e.body,t)),e.fromMathOp&&hs(r);else if(r=new se("mi",[new Ne(e.name.slice(1))]),!e.parentIsSupSub){const s=new se("mo",[ie("â¡","text")]),o=[r,s];if(e.needsLeadingSpace){const i=new se("mspace");i.setAttribute("width","0.1667em"),o.unshift(i)}if(!e.isFollowedByDelimiter){const i=new se("mspace");i.setAttribute("width","0.1667em"),o.push(i)}r=new se("mrow",o)}return r},Zi={"âˆ":"\\prod","âˆ":"\\coprod","âˆ‘":"\\sum","â‹€":"\\bigwedge","â‹":"\\bigvee","â‹‚":"\\bigcap","â‹ƒ":"\\bigcup","â¨€":"\\bigodot","â¨":"\\bigoplus","â¨‚":"\\bigotimes","â¨„":"\\biguplus","â¨…":"\\bigsqcap","â¨†":"\\bigsqcup","â¨ƒ":"\\bigcupdot","â¨‡":"\\bigdoublevee","â¨ˆ":"\\bigdoublewedge","â¨‰":"\\bigtimes"};C({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcupplus","\\bigcupdot","\\bigcap","\\bigcup","\\bigdoublevee","\\bigdoublewedge","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcap","\\bigsqcup","\\bigtimes","\\smallint","âˆ","âˆ","âˆ‘","â‹€","â‹","â‹‚","â‹ƒ","â¨€","â¨","â¨‚","â¨ƒ","â¨„","â¨…","â¨†","â¨‡","â¨ˆ","â¨‰"],props:{numArgs:0},handler:({parser:e,funcName:t},r)=>{let s=t;return s.length===1&&(s=Zi[s]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,stack:!1,name:s}},mathmlBuilder:Ge});C({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:({parser:e},t)=>{const r=t[0],s=r.body?r.body:[r],o=s.length===1&&Hi.includes(s[0].type);return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:o,fromMathOp:!0,stack:!1,name:o?s[0].text:null,body:o?null:te(r)}},mathmlBuilder:Ge});const Xi={"âˆ«":"\\int","âˆ¬":"\\iint","âˆ­":"\\iiint","âˆ®":"\\oint","âˆ¯":"\\oiint","âˆ°":"\\oiiint","âˆ±":"\\intclockwise","âˆ²":"\\varointclockwise","â¨Œ":"\\iiiint","â¨":"\\intbar","â¨Ž":"\\intBar","â¨":"\\fint","â¨’":"\\rppolint","â¨“":"\\scpolint","â¨•":"\\pointint","â¨–":"\\sqint","â¨—":"\\intlarhk","â¨˜":"\\intx","â¨™":"\\intcap","â¨š":"\\intcup"};C({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\sgn","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,s=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:nt(s),needsLeadingSpace:r.length>0&&Cr.includes(r),name:t}},mathmlBuilder:Ge});C({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,s=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:nt(s),needsLeadingSpace:r.length>0&&Cr.includes(r),name:t}},mathmlBuilder:Ge});C({type:"op",names:["\\int","\\iint","\\iiint","\\iiiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\intbar","\\intBar","\\fint","\\rppolint","\\scpolint","\\pointint","\\sqint","\\intlarhk","\\intx","\\intcap","\\intcup","âˆ«","âˆ¬","âˆ­","âˆ®","âˆ¯","âˆ°","âˆ±","âˆ²","â¨Œ","â¨","â¨Ž","â¨","â¨’","â¨“","â¨•","â¨–","â¨—","â¨˜","â¨™","â¨š"],props:{numArgs:0},handler({parser:e,funcName:t}){let r=t;return r.length===1&&(r=Xi[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,stack:!1,name:r}},mathmlBuilder:Ge});const Ji=(e,t)=>{let r=re(e.body,t.withFont("mathrm")),s=!0;for(let i=0;i<r.length;i++){let l=r[i];if(l instanceof g.MathNode)switch((l.type==="mrow"||l.type==="mpadded")&&l.children.length===1&&l.children[0]instanceof g.MathNode&&(l=l.children[0]),l.type){case"mi":case"mn":case"ms":case"mtext":break;case"mspace":if(l.attributes.width){const u=l.attributes.width.replace("em",""),h=Xs(Number(u));h===""?s=!1:r[i]=new g.MathNode("mtext",[new g.TextNode(h)])}break;case"mo":{const u=l.children[0];l.children.length===1&&u instanceof g.TextNode?u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):s=!1;break}default:s=!1}else s=!1}if(s){const i=r.map(l=>l.toText()).join("");r=[new g.TextNode(i)]}else if(r.length===1&&["mover","munder"].includes(r[0].type)&&(r[0].children[0].type==="mi"||r[0].children[0].type==="mtext")){if(r[0].children[0].type="mi",e.parentIsSupSub)return new g.MathNode("mrow",r);{const i=new g.MathNode("mo",[ie("â¡","text")]);return g.newDocumentFragment([r[0],i])}}let o;if(s?(o=new g.MathNode("mi",r),r[0].text.length===1&&o.setAttribute("mathvariant","normal")):o=new g.MathNode("mrow",r),!e.parentIsSupSub){const i=new g.MathNode("mo",[ie("â¡","text")]),l=[o,i];if(e.needsLeadingSpace){const u=new g.MathNode("mspace");u.setAttribute("width","0.1667em"),l.unshift(u)}if(!e.isFollowedByDelimiter){const u=new g.MathNode("mspace");u.setAttribute("width","0.1667em"),l.push(u)}return g.newDocumentFragment(l)}return o};C({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const s=r[0],o=e.prevAtomType,i=e.gullet.future().text;return{type:"operatorname",mode:e.mode,body:te(s),alwaysHandleSupSub:t==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1,isFollowedByDelimiter:nt(i),needsLeadingSpace:o.length>0&&Cr.includes(o)}},mathmlBuilder:Ji});c("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");$e({type:"ordgroup",mathmlBuilder(e,t){return ve(e.body,t,e.semisimple)}});C({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"phantom",mode:e.mode,body:te(r)}},mathmlBuilder:(e,t)=>{const r=re(e.body,t);return new g.MathNode("mphantom",r)}});C({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"hphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=re(te(e.body),t),s=new g.MathNode("mphantom",r),o=new g.MathNode("mpadded",[s]);return o.setAttribute("height","0px"),o.setAttribute("depth","0px"),o}});C({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"vphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=re(te(e.body),t),s=new g.MathNode("mphantom",r),o=new g.MathNode("mpadded",[s]);return o.setAttribute("width","0px"),o}});C({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler({parser:e},t){return{type:"pmb",mode:e.mode,body:te(t[0])}},mathmlBuilder(e,t){const r=re(e.body,t),s=Ar(r);return s.setAttribute("style","font-weight:bold"),s}});const Qs=(e,t)=>{const r=t.withLevel(Y.TEXT),s=new g.MathNode("mpadded",[W(e.body,r)]),o=me(e.dy,t);return s.setAttribute("voffset",o.number+o.unit),o.number>0?s.style.padding=o.number+o.unit+" 0 0 0":s.style.padding="0 0 "+Math.abs(o.number)+o.unit+" 0",s};C({type:"raise",names:["\\raise","\\lower"],props:{numArgs:2,argTypes:["size","primitive"],primitive:!0},handler({parser:e,funcName:t},r){const s=I(r[0],"size").value;t==="\\lower"&&(s.number*=-1);const o=r[1];return{type:"raise",mode:e.mode,dy:s,body:o}},mathmlBuilder:Qs});C({type:"raise",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler({parser:e,funcName:t},r){const s=I(r[0],"size").value,o=r[1];return{type:"raise",mode:e.mode,dy:s,body:o}},mathmlBuilder:Qs});C({type:"ref",names:["\\ref","\\eqref"],props:{numArgs:1,argTypes:["raw"]},handler({parser:e,funcName:t},r){return{type:"ref",mode:e.mode,funcName:t,string:r[0].string.replace(Js,"")}},mathmlBuilder(e,t){const r=e.funcName==="\\ref"?["tml-ref"]:["tml-ref","tml-eqref"];return new Os("#"+e.string,r,null)}});C({type:"reflect",names:["\\reflectbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler({parser:e},t){return{type:"reflect",mode:e.mode,body:t[0]}},mathmlBuilder(e,t){const r=W(e.body,t);return r.style.transform="scaleX(-1)",r}});C({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler({parser:e}){return{type:"internal",mode:e.mode}}});C({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler({parser:e},t,r){const s=r[0],o=I(t[0],"size"),i=I(t[1],"size");return{type:"rule",mode:e.mode,shift:s&&I(s,"size").value,width:o.value,height:i.value}},mathmlBuilder(e,t){const r=me(e.width,t),s=me(e.height,t),o=e.shift?me(e.shift,t):{number:0,unit:"em"},i=t.color&&t.getColor()||"black",l=new g.MathNode("mspace");if(r.number>0&&s.number>0&&l.setAttribute("mathbackground",i),l.setAttribute("width",r.number+r.unit),l.setAttribute("height",s.number+s.unit),o.number===0)return l;const u=new g.MathNode("mpadded",[l]);return o.number>=0?u.setAttribute("height","+"+o.number+o.unit):(u.setAttribute("height",o.number+o.unit),u.setAttribute("depth","+"+-o.number+o.unit)),u.setAttribute("voffset",o.number+o.unit),u}});const ps=/^[0-9]$/,Ki={0:"â‚€",1:"â‚",2:"â‚‚",3:"â‚ƒ",4:"â‚„",5:"â‚…",6:"â‚†",7:"â‚‡",8:"â‚ˆ",9:"â‚‰"},Yi={0:"â°",1:"Â¹",2:"Â²",3:"Â³",4:"â´",5:"âµ",6:"â¶",7:"â·",8:"â¸",9:"â¹"};C({type:"sfrac",names:["\\sfrac"],props:{numArgs:2,allowedInText:!0,allowedInMath:!0},handler({parser:e},t){let r="";for(const o of t[0].body){if(o.type!=="textord"||!ps.test(o.text))throw new D("Numerator must be an integer.",o);r+=o.text}let s="";for(const o of t[1].body){if(o.type!=="textord"||!ps.test(o.text))throw new D("Denominator must be an integer.",o);s+=o.text}return{type:"sfrac",mode:e.mode,numerator:r,denominator:s}},mathmlBuilder(e,t){const r=e.numerator.split("").map(i=>Yi[i]).join(""),s=e.denominator.split("").map(i=>Ki[i]).join(""),o=new g.TextNode(r+"â„"+s,e.mode,t);return new g.MathNode("mn",[o],["special-fraction"])}});const ms={"\\tiny":.5,"\\sixptsize":.6,"\\Tiny":.6,"\\scriptsize":.7,"\\footnotesize":.8,"\\small":.9,"\\normalsize":1,"\\large":1.2,"\\Large":1.44,"\\LARGE":1.728,"\\huge":2.074,"\\Huge":2.488};C({type:"sizing",names:["\\tiny","\\sixptsize","\\Tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],props:{numArgs:0,allowedInText:!0},handler:({breakOnTokenText:e,funcName:t,parser:r},s)=>{r.settings.strict&&r.mode==="math"&&console.log(`Temml strict-mode warning: Command ${t} is invalid in math mode.`);const o=r.parseExpression(!1,e,!0);return{type:"sizing",mode:r.mode,funcName:t,body:o}},mathmlBuilder:(e,t)=>{const r=t.withFontSize(ms[e.funcName]),s=re(e.body,r),o=Ar(s),i=(ms[e.funcName]/t.fontSize).toFixed(4);return o.setAttribute("mathsize",i+"em"),o}});C({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:({parser:e},t,r)=>{let s=!1,o=!1;const i=r[0]&&I(r[0],"ordgroup");if(i){let u="";for(let h=0;h<i.body.length;++h)if(u=i.body[h].text,u==="t")s=!0;else if(u==="b")o=!0;else{s=!1,o=!1;break}}else s=!0,o=!0;const l=t[0];return{type:"smash",mode:e.mode,body:l,smashHeight:s,smashDepth:o}},mathmlBuilder:(e,t)=>{const r=new g.MathNode("mpadded",[W(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});const Qi=["a","c","e","Ä±","m","n","o","r","s","u","v","w","x","z","Î±","Îµ","Î¹","Îº","Î½","Î¿","Ï€","Ïƒ","Ï„","Ï…","Ï‰","\\alpha","\\epsilon","\\iota","\\kappa","\\nu","\\omega","\\pi","\\tau","\\omega"];C({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e},t,r){const s=r[0],o=t[0];return o.body&&o.body.length===1&&o.body[0].text&&Qi.includes(o.body[0].text)&&o.body.push({type:"rule",mode:"math",shift:null,width:{number:0,unit:"pt"},height:{number:.5,unit:"em"}}),{type:"sqrt",mode:e.mode,body:o,index:s}},mathmlBuilder(e,t){const{body:r,index:s}=e;return s?new g.MathNode("mroot",[W(r,t),W(s,t.incrementLevel())]):new g.MathNode("msqrt",[W(r,t)])}});const el={display:0,text:1,script:2,scriptscript:3},tl={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]};C({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({breakOnTokenText:e,funcName:t,parser:r},s){const o=r.parseExpression(!0,e,!0),i=t.slice(1,t.length-5);return{type:"styling",mode:r.mode,scriptLevel:i,body:o}},mathmlBuilder(e,t){const r=t.withLevel(el[e.scriptLevel]),s=re(e.body,r),o=Ar(s),i=tl[e.scriptLevel];return o.setAttribute("scriptlevel",i[0]),o.setAttribute("displaystyle",i[1]),o}});const rl=/^m(over|under|underover)$/,nl="DHKLUcegorsuvxyzÎ Î¥Î¨Î±Î´Î·Î¹Î¼Î½Î¿Ï„Ï…Ï‡Ïµ",sl="BCEFGIMNOPQRSTXZlpqtwÎ“Î˜ÎžÎ£Î¦Î©Î²ÎµÎ¶Î¸Î¾ÏÏ‚Ï†ÏˆÏ‘Ï•Ï±",ol="AJdfÎ”Î›";$e({type:"supsub",mathmlBuilder(e,t){let r=!1,s,o,i=!1,l=!1,u=!1;e.base&&e.base.type==="horizBrace"&&(o=!!e.sup,o===e.base.isOver&&(r=!0,s=e.base.isOver)),e.base&&!e.stack&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0,i=!e.base.symbol,l=i&&!e.isFollowedByDelimiter,u=e.base.needsLeadingSpace);const h=e.stack&&e.base.body.length===1?[W(e.base.body[0],t)]:[W(e.base,t)],b=t.inSubOrSup();if(e.sub){const M=W(e.sub,b);t.level===3&&M.setAttribute("scriptlevel","2"),h.push(M)}if(e.sup){const M=W(e.sup,b);if(t.level===3&&M.setAttribute("scriptlevel","2"),e.base&&e.base.text&&e.base.text.length===1){const N=e.base.text;nl.indexOf(N)>-1?M.classes.push("tml-sml-pad"):sl.indexOf(N)>-1?M.classes.push("tml-med-pad"):ol.indexOf(N)>-1&&M.classes.push("tml-lrg-pad")}h.push(M)}let _;if(r)_=s?"mover":"munder";else if(e.sub)if(e.sup){const M=e.base;M&&(M.type==="op"&&M.limits||M.type==="multiscript")&&(t.level===Y.DISPLAY||M.alwaysHandleSupSub)||M&&M.type==="operatorname"&&M.alwaysHandleSupSub&&(t.level===Y.DISPLAY||M.limits)?_="munderover":_="msubsup"}else{const M=e.base;e.stack||M&&M.type==="op"&&M.limits&&(t.level===Y.DISPLAY||M.alwaysHandleSupSub)||M&&M.type==="operatorname"&&M.alwaysHandleSupSub&&(M.limits||t.level===Y.DISPLAY)?_="munder":_="msub"}else{const M=e.base;M&&M.type==="op"&&M.limits&&(t.level===Y.DISPLAY||M.alwaysHandleSupSub)||M&&M.type==="operatorname"&&M.alwaysHandleSupSub&&(M.limits||t.level===Y.DISPLAY)?_="mover":_="msup"}let $=new g.MathNode(_,h);if(i){const M=new g.MathNode("mo",[ie("â¡","text")]);if(u){const N=new g.MathNode("mspace");N.setAttribute("width","0.1667em"),$=g.newDocumentFragment([N,$,M])}else $=g.newDocumentFragment([$,M]);if(l){const N=new g.MathNode("mspace");N.setAttribute("width","0.1667em"),$.children.push(N)}}else rl.test(_)&&($=new g.MathNode("mrow",[$]));return $}});const al=["\\shortmid","\\nshortmid","\\shortparallel","\\nshortparallel","\\smallsetminus"],il=["\\Rsh","\\Lsh","\\restriction"],ll=e=>{if(e.length===1){const t=e.codePointAt(0);return 8591<t&&t<8704}return e.indexOf("arrow")>-1||e.indexOf("harpoon")>-1||il.includes(e)};$e({type:"atom",mathmlBuilder(e,t){const r=new g.MathNode("mo",[ie(e.text,e.mode)]);if(e.family==="punct")r.setAttribute("separator","true");else if(e.family==="open"||e.family==="close")e.family==="open"?(r.setAttribute("form","prefix"),r.setAttribute("stretchy","false")):e.family==="close"&&(r.setAttribute("form","postfix"),r.setAttribute("stretchy","false"));else if(e.text==="\\mid")r.setAttribute("lspace","0.22em"),r.setAttribute("rspace","0.22em"),r.setAttribute("stretchy","false");else if(e.family==="rel"&&ll(e.text))r.setAttribute("stretchy","false");else if(al.includes(e.text))r.setAttribute("mathsize","70%");else if(e.text===":")r.attributes.lspace="0.2222em",r.attributes.rspace="0.2222em";else if(e.needsSpacing)return e.family==="bin"?new g.MathNode("mrow",[K(.222),r,K(.222)]):new g.MathNode("mrow",[K(.2778),r,K(.2778)]);return r}});const fs={mathbf:"bold",mathrm:"normal",textit:"italic",mathit:"italic",mathnormal:"italic",mathbb:"double-struck",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"},eo=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsc")return"normal";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"sans-serif-bold":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";const r=t.font;if(!r||r==="mathnormal")return null;const s=e.mode;switch(r){case"mathit":return"italic";case"mathrm":{const i=e.text.codePointAt(0);return 939<i&&i<975?"italic":"normal"}case"greekItalic":return"italic";case"up@greek":return"normal";case"boldsymbol":case"mathboldsymbol":return"bold-italic";case"mathbf":return"bold";case"mathbb":return"double-struck";case"mathfrak":return"fraktur";case"mathscr":case"mathcal":return"script";case"mathsf":return"sans-serif";case"mathsfit":return"sans-serif-italic";case"mathtt":return"monospace"}let o=e.text;return Q[s][o]&&Q[s][o].replace&&(o=Q[s][o].replace),Object.prototype.hasOwnProperty.call(fs,r)?fs[r]:null},gs=Object.freeze({B:8426,E:8427,F:8427,H:8387,I:8391,L:8390,M:8422,R:8393,e:8394,g:8355,o:8389}),ul=Object.freeze({C:8426,H:8388,I:8392,R:8394,Z:8398}),cl=Object.freeze({C:8383,H:8389,N:8391,P:8393,Q:8393,R:8395,Z:8394}),to=Object.freeze({"Ïµ":119527,Ï‘:119564,Ï°:119534,Ï†:119577,Ï±:119535,Ï–:119563}),dl=Object.freeze({"Ïµ":119643,Ï‘:119680,Ï°:119650,Ï†:119693,Ï±:119651,Ï–:119679}),bs=Object.freeze({"Ïµ":119701,Ï‘:119738,Ï°:119708,Ï†:119751,Ï±:119709,Ï–:119737}),hl=Object.freeze({"Ïµ":119759,Ï‘:119796,Ï°:119766,Ï†:119809,Ï±:119767,Ï–:119795}),pl=Object.freeze({upperCaseLatin:{normal:e=>0,bold:e=>119743,italic:e=>119795,"bold-italic":e=>119847,script:e=>gs[e]||119899,"script-bold":e=>119951,fraktur:e=>ul[e]||120003,"fraktur-bold":e=>120107,"double-struck":e=>cl[e]||120055,"sans-serif":e=>120159,"sans-serif-bold":e=>120211,"sans-serif-italic":e=>120263,"sans-serif-bold-italic":e=>120380,monospace:e=>120367},lowerCaseLatin:{normal:e=>0,bold:e=>119737,italic:e=>e==="h"?8358:119789,"bold-italic":e=>119841,script:e=>gs[e]||119893,"script-bold":e=>119945,fraktur:e=>119997,"fraktur-bold":e=>120101,"double-struck":e=>120049,"sans-serif":e=>120153,"sans-serif-bold":e=>120205,"sans-serif-italic":e=>120257,"sans-serif-bold-italic":e=>120309,monospace:e=>120361},upperCaseGreek:{normal:e=>0,bold:e=>119575,italic:e=>119633,"bold-italic":e=>119575,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119749,"sans-serif-bold":e=>119749,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119807,monospace:e=>0},lowerCaseGreek:{normal:e=>0,bold:e=>119569,italic:e=>119627,"bold-italic":e=>e==="Ï•"?119678:119685,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119743,"sans-serif-bold":e=>119743,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119801,monospace:e=>0},varGreek:{normal:e=>0,bold:e=>to[e]||-51,italic:e=>0,"bold-italic":e=>dl[e]||58,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>bs[e]||116,"sans-serif-bold":e=>bs[e]||116,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>hl[e]||174,monospace:e=>0},numeral:{normal:e=>0,bold:e=>120734,italic:e=>0,"bold-italic":e=>0,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>120744,"sans-serif":e=>120754,"sans-serif-bold":e=>120764,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>0,monospace:e=>120774}}),Ce=(e,t)=>{const r=e.codePointAt(0),s=64<r&&r<91?"upperCaseLatin":96<r&&r<123?"lowerCaseLatin":912<r&&r<938?"upperCaseGreek":944<r&&r<970||e==="Ï•"?"lowerCaseGreek":120545<r&&r<120572||to[e]?"varGreek":47<r&&r<58?"numeral":"other";return s==="other"?e:String.fromCodePoint(r+pl[s][t](e))},ml=Object.freeze({a:"á´€",b:"Ê™",c:"á´„",d:"á´…",e:"á´‡",f:"êœ°",g:"É¢",h:"Êœ",i:"Éª",j:"á´Š",k:"á´‹",l:"ÊŸ",m:"á´",n:"É´",o:"á´",p:"á´˜",q:"Ç«",r:"Ê€",s:"s",t:"á´›",u:"á´œ",v:"á´ ",w:"á´¡",x:"x",y:"Ê",z:"á´¢"}),fl=/^\d(?:[\d,.]*\d)?$/,gl=/[A-Ba-z]/,bl=new Set(["\\prime","\\dprime","\\trprime","\\qprime","\\backprime","\\backdprime","\\backtrprime"]),xl=(e,t,r)=>{const s=new g.MathNode(r,[e]),o=new g.MathNode("mstyle",[s]);return o.style["font-style"]="italic",o.style["font-family"]="Cambria, 'Times New Roman', serif",t==="bold-italic"&&(o.style["font-weight"]="bold"),o};$e({type:"mathord",mathmlBuilder(e,t){const r=ie(e.text,e.mode,t),s=r.text.codePointAt(0),o=912<s&&s<938?"normal":"italic",i=eo(e,t)||o;if(i==="script")return r.text=Ce(r.text,i),new g.MathNode("mi",[r],[t.font]);i!=="italic"&&(r.text=Ce(r.text,i));let l=new g.MathNode("mi",[r]);return i==="normal"&&(l.setAttribute("mathvariant","normal"),r.text.length===1&&(l=new g.MathNode("mpadded",[l]),l.setAttribute("lspace","0"))),l}});$e({type:"textord",mathmlBuilder(e,t){let r=e.text;const s=r.codePointAt(0);t.fontFamily==="textsc"&&96<s&&s<123&&(r=ml[r]);const o=ie(r,e.mode,t),i=eo(e,t)||"normal";let l;if(fl.test(e.text)){const u=e.mode==="text"?"mtext":"mn";if(i==="italic"||i==="bold-italic")return xl(o,i,u);i!=="normal"&&(o.text=o.text.split("").map(h=>Ce(h,i)).join("")),l=new g.MathNode(u,[o])}else if(e.mode==="text")i!=="normal"&&(o.text=Ce(o.text,i)),l=new g.MathNode("mtext",[o]);else if(bl.has(e.text))l=new g.MathNode("mo",[o]),l.classes.push("tml-prime");else{const u=o.text;i!=="italic"&&(o.text=Ce(o.text,i)),l=new g.MathNode("mi",[o]),o.text===u&&gl.test(u)&&l.setAttribute("mathvariant","italic")}return l}});const yl={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},wl={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};$e({type:"spacing",mathmlBuilder(e,t){let r;if(Object.prototype.hasOwnProperty.call(wl,e.text))r=new g.MathNode("mtext",[new g.TextNode("Â ")]);else if(Object.prototype.hasOwnProperty.call(yl,e.text))r=new g.MathNode("mo"),e.text==="\\nobreak"&&r.setAttribute("linebreak","nobreak");else throw new D(`Unknown type of space "${e.text}"`);return r}});$e({type:"tag"});const xs={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm","\\textsc":"textsc"},ys={"\\textbf":"textbf","\\textmd":"textmd"},vl={"\\textit":"textit","\\textup":"textup"},_l=(e,t)=>{const r=e.font;if(r){if(xs[r])return t.withTextFontFamily(xs[r]);if(ys[r])return t.withTextFontWeight(ys[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(vl[r])};C({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textsc","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const s=r[0];return{type:"text",mode:e.mode,body:te(s),font:t}},mathmlBuilder(e,t){const r=_l(e,t),s=ve(e.body,r);return tt(s)}});C({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler({parser:e},t){return{type:"vcenter",mode:e.mode,body:t[0]}},mathmlBuilder(e,t){const r=new g.MathNode("mtd",[W(e.body,t)]);r.style.padding="0";const s=new g.MathNode("mtr",[r]);return new g.MathNode("mtable",[s])}});C({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new D("\\verb ended by end of line instead of matching delimiter")},mathmlBuilder(e,t){const r=new g.TextNode($l(e)),s=new g.MathNode("mtext",[r]);return s.setAttribute("mathvariant","monospace"),s}});const $l=e=>e.body.replace(/ /g,e.star?"â£":"Â "),_e=Ms,ro=`[ \r
	]`,kl="\\\\[a-zA-Z@]+",Al="\\\\[^\uD800-\uDFFF]",Sl=`(${kl})${ro}*`,ql=`\\\\(
|[ \r	]+
?)[ \r	]*`,xr="[Ì€-Í¯]",ws=new RegExp(`${xr}+$`),Tl=`(${ro}+)|${ql}|([!-\\[\\]-â€§â€ª-íŸ¿ï¤€-ï¿¿]${xr}*|[\uD800-\uDBFF][\uDC00-\uDFFF]${xr}*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|${Sl}|${Al})`;class vs{constructor(t,r){this.input=t,this.settings=r,this.tokenRegex=new RegExp(Tl,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){const t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new he("EOF",new ae(this,r,r));const s=this.tokenRegex.exec(t);if(s===null||s.index!==r)throw new D(`Unexpected character: '${t[r]}'`,new he(t[r],new ae(this,r,r+1)));const o=s[6]||s[3]||(s[2]?"\\ ":" ");if(this.catcodes[o]===14){const i=t.indexOf(`
`,this.tokenRegex.lastIndex);if(i===-1){if(this.tokenRegex.lastIndex=t.length,this.settings.strict)throw new D("% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode")}else this.tokenRegex.lastIndex=i+1;return this.lex()}return new he(o,new ae(this,r,this.tokenRegex.lastIndex))}}class Ml{constructor(t={},r={}){this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new D("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const t=this.undefStack.pop();for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]===void 0?delete this.current[r]:this.current[r]=t[r])}has(t){return Object.prototype.hasOwnProperty.call(this.current,t)||Object.prototype.hasOwnProperty.call(this.builtins,t)}get(t){return Object.prototype.hasOwnProperty.call(this.current,t)?this.current[t]:this.builtins[t]}set(t,r,s=!1){if(s){for(let o=0;o<this.undefStack.length;o++)delete this.undefStack[o][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{const o=this.undefStack[this.undefStack.length-1];o&&!Object.prototype.hasOwnProperty.call(o,t)&&(o[t]=this.current[t])}this.current[t]=r}}const no={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Dl{constructor(t,r,s){this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new Ml(Ti,r.macros),this.mode=s,this.stack=[]}feed(t){this.lexer=new vs(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){let r,s,o;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:o,end:s}=this.consumeArg(["]"])}else({tokens:o,start:r,end:s}=this.consumeArg());return this.pushToken(new he("EOF",s.loc)),this.pushTokens(o),r.range(s,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(t){const r=[],s=t&&t.length>0;s||this.consumeSpaces();const o=this.future();let i,l=0,u=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++l;else if(i.text==="}"){if(--l,l===-1)throw new D("Extra }",i)}else if(i.text==="EOF")throw new D("Unexpected end of input in a macro argument, expected '"+(t&&s?t[u]:"}")+"'",i);if(t&&s)if((l===0||l===1&&t[u]==="{")&&i.text===t[u]){if(++u,u===t.length){r.splice(-u,u);break}}else u=0}while(l!==0||s);return o.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:o,end:i}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new D("The length of delimiters doesn't match the number of args!");const o=r[0];for(let i=0;i<o.length;i++){const l=this.popToken();if(o[i]!==l.text)throw new D("Use of the macro doesn't match its definition",l)}}const s=[];for(let o=0;o<t;o++)s.push(this.consumeArg(r&&r[o+1]).tokens);return s}expandOnce(t){const r=this.popToken(),s=r.text,o=r.noexpand?null:this._getExpansion(s);if(o==null||t&&o.unexpandable){if(t&&o==null&&s[0]==="\\"&&!this.isDefined(s))throw new D("Undefined control sequence: "+s);return this.pushToken(r),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new D("Too many expansions: infinite loop or need to increase maxExpand setting");let i=o.tokens;const l=this.consumeArgs(o.numArgs,o.delimiters);if(o.numArgs){i=i.slice();for(let u=i.length-1;u>=0;--u){let h=i[u];if(h.text==="#"){if(u===0)throw new D("Incomplete placeholder at end of macro body",h);if(h=i[--u],h.text==="#")i.splice(u+1,1);else if(/^[1-9]$/.test(h.text))i.splice(u,2,...l[+h.text-1]);else throw new D("Not a valid argument number",h)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new he(t)]):void 0}expandTokens(t){const r=[],s=this.stack.length;for(this.pushTokens(t);this.stack.length>s;)if(this.expandOnce(!0)===!1){const o=this.stack.pop();o.treatAsRelax&&(o.noexpand=!1,o.treatAsRelax=!1),r.push(o)}return r}expandMacroAsText(t){const r=this.expandMacro(t);return r&&r.map(s=>s.text).join("")}_getExpansion(t){const r=this.macros.get(t);if(r==null)return r;if(t.length===1){const o=this.lexer.catcodes[t];if(o!=null&&o!==13)return}const s=typeof r=="function"?r(this):r;if(typeof s=="string"){let o=0;if(s.indexOf("#")!==-1){const b=s.replace(/##/g,"");for(;b.indexOf("#"+(o+1))!==-1;)++o}const i=new vs(s,this.settings),l=[];let u=i.lex();for(;u.text!=="EOF";)l.push(u),u=i.lex();return l.reverse(),{tokens:l,numArgs:o}}return s}isDefined(t){return this.macros.has(t)||Object.prototype.hasOwnProperty.call(_e,t)||Object.prototype.hasOwnProperty.call(Q.math,t)||Object.prototype.hasOwnProperty.call(Q.text,t)||Object.prototype.hasOwnProperty.call(no,t)}isExpandable(t){const r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Object.prototype.hasOwnProperty.call(_e,t)&&!_e[t].primitive}}const _s=/^[â‚Šâ‚‹â‚Œâ‚â‚Žâ‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰â‚â‚‘â‚•áµ¢â±¼â‚–â‚—â‚˜â‚™â‚’â‚šáµ£â‚›â‚œáµ¤áµ¥â‚“áµ¦áµ§áµ¨áµ©áµª]/,We=Object.freeze({"â‚Š":"+","â‚‹":"-","â‚Œ":"=","â‚":"(","â‚Ž":")","â‚€":"0","â‚":"1","â‚‚":"2","â‚ƒ":"3","â‚„":"4","â‚…":"5","â‚†":"6","â‚‡":"7","â‚ˆ":"8","â‚‰":"9","â‚":"a","â‚‘":"e","â‚•":"h","áµ¢":"i","â±¼":"j","â‚–":"k","â‚—":"l","â‚˜":"m","â‚™":"n","â‚’":"o","â‚š":"p","áµ£":"r","â‚›":"s","â‚œ":"t","áµ¤":"u","áµ¥":"v","â‚“":"x","áµ¦":"Î²","áµ§":"Î³","áµ¨":"Ï","áµ©":"Ï•","áµª":"Ï‡","âº":"+","â»":"-","â¼":"=","â½":"(","â¾":")","â°":"0","Â¹":"1","Â²":"2","Â³":"3","â´":"4","âµ":"5","â¶":"6","â·":"7","â¸":"8","â¹":"9","á´¬":"A","á´®":"B","á´°":"D","á´±":"E","á´³":"G","á´´":"H","á´µ":"I","á´¶":"J","á´·":"K","á´¸":"L","á´¹":"M","á´º":"N","á´¼":"O","á´¾":"P","á´¿":"R","áµ€":"T","áµ":"U","â±½":"V","áµ‚":"W","áµƒ":"a","áµ‡":"b","á¶œ":"c","áµˆ":"d","áµ‰":"e","á¶ ":"f","áµ":"g",Ê°:"h","â±":"i",Ê²:"j","áµ":"k",Ë¡:"l","áµ":"m",â¿:"n","áµ’":"o","áµ–":"p",Ê³:"r",Ë¢:"s","áµ—":"t","áµ˜":"u","áµ›":"v",Ê·:"w",Ë£:"x",Ê¸:"y","á¶»":"z","áµ":"Î²","áµž":"Î³","áµŸ":"Î´","áµ ":"Ï•","áµ¡":"Ï‡","á¶¿":"Î¸"}),$s=Object.freeze({"ð’œ":"A",â„¬:"B","ð’ž":"C","ð’Ÿ":"D",â„°:"E",â„±:"F","ð’¢":"G",â„‹:"H",â„:"I","ð’¥":"J","ð’¦":"K",â„’:"L",â„³:"M","ð’©":"N","ð’ª":"O","ð’«":"P","ð’¬":"Q",â„›:"R","ð’®":"S","ð’¯":"T","ð’°":"U","ð’±":"V","ð’²":"W","ð’³":"X","ð’´":"Y","ð’µ":"Z"});var ar={"Ì":{text:"\\'",math:"\\acute"},"Ì€":{text:"\\`",math:"\\grave"},"Ìˆ":{text:'\\"',math:"\\ddot"},"Ìƒ":{text:"\\~",math:"\\tilde"},"Ì„":{text:"\\=",math:"\\bar"},"Ì†":{text:"\\u",math:"\\breve"},"ÌŒ":{text:"\\v",math:"\\check"},"Ì‚":{text:"\\^",math:"\\hat"},"Ì‡":{text:"\\.",math:"\\dot"},"ÌŠ":{text:"\\r",math:"\\mathring"},"Ì‹":{text:"\\H"},"Ì§":{text:"\\c"}},ks={Ã¡:"aÌ",Ã :"aÌ€",Ã¤:"aÌˆ",ÇŸ:"aÌˆÌ„",Ã£:"aÌƒ",Ä:"aÌ„",Äƒ:"aÌ†",áº¯:"aÌ†Ì",áº±:"aÌ†Ì€",áºµ:"aÌ†Ìƒ",ÇŽ:"aÌŒ",Ã¢:"aÌ‚",áº¥:"aÌ‚Ì",áº§:"aÌ‚Ì€",áº«:"aÌ‚Ìƒ",È§:"aÌ‡",Ç¡:"aÌ‡Ì„",Ã¥:"aÌŠ",Ç»:"aÌŠÌ",á¸ƒ:"bÌ‡",Ä‡:"cÌ",Ä:"cÌŒ",Ä‰:"cÌ‚",Ä‹:"cÌ‡",Ä:"dÌŒ",á¸‹:"dÌ‡",Ã©:"eÌ",Ã¨:"eÌ€",Ã«:"eÌˆ",áº½:"eÌƒ",Ä“:"eÌ„",á¸—:"eÌ„Ì",á¸•:"eÌ„Ì€",Ä•:"eÌ†",Ä›:"eÌŒ",Ãª:"eÌ‚",áº¿:"eÌ‚Ì",á»:"eÌ‚Ì€",á»…:"eÌ‚Ìƒ",Ä—:"eÌ‡",á¸Ÿ:"fÌ‡",Çµ:"gÌ",á¸¡:"gÌ„",ÄŸ:"gÌ†",Ç§:"gÌŒ",Ä:"gÌ‚",Ä¡:"gÌ‡",á¸§:"hÌˆ",ÈŸ:"hÌŒ",Ä¥:"hÌ‚",á¸£:"hÌ‡",Ã­:"iÌ",Ã¬:"iÌ€",Ã¯:"iÌˆ",á¸¯:"iÌˆÌ",Ä©:"iÌƒ",Ä«:"iÌ„",Ä­:"iÌ†",Ç:"iÌŒ",Ã®:"iÌ‚",Ç°:"jÌŒ",Äµ:"jÌ‚",á¸±:"kÌ",Ç©:"kÌŒ",Äº:"lÌ",Ä¾:"lÌŒ",á¸¿:"mÌ",á¹:"mÌ‡",Å„:"nÌ",Ç¹:"nÌ€",Ã±:"nÌƒ",Åˆ:"nÌŒ",á¹…:"nÌ‡",Ã³:"oÌ",Ã²:"oÌ€",Ã¶:"oÌˆ",È«:"oÌˆÌ„",Ãµ:"oÌƒ",á¹:"oÌƒÌ",á¹:"oÌƒÌˆ",È­:"oÌƒÌ„",Å:"oÌ„",á¹“:"oÌ„Ì",á¹‘:"oÌ„Ì€",Å:"oÌ†",Ç’:"oÌŒ",Ã´:"oÌ‚",á»‘:"oÌ‚Ì",á»“:"oÌ‚Ì€",á»—:"oÌ‚Ìƒ",È¯:"oÌ‡",È±:"oÌ‡Ì„",Å‘:"oÌ‹",á¹•:"pÌ",á¹—:"pÌ‡",Å•:"rÌ",Å™:"rÌŒ",á¹™:"rÌ‡",Å›:"sÌ",á¹¥:"sÌÌ‡",Å¡:"sÌŒ",á¹§:"sÌŒÌ‡",Å:"sÌ‚",á¹¡:"sÌ‡",áº—:"tÌˆ",Å¥:"tÌŒ",á¹«:"tÌ‡",Ãº:"uÌ",Ã¹:"uÌ€",Ã¼:"uÌˆ",Ç˜:"uÌˆÌ",Çœ:"uÌˆÌ€",Ç–:"uÌˆÌ„",Çš:"uÌˆÌŒ",Å©:"uÌƒ",á¹¹:"uÌƒÌ",Å«:"uÌ„",á¹»:"uÌ„Ìˆ",Å­:"uÌ†",Ç”:"uÌŒ",Ã»:"uÌ‚",Å¯:"uÌŠ",Å±:"uÌ‹",á¹½:"vÌƒ",áºƒ:"wÌ",áº:"wÌ€",áº…:"wÌˆ",Åµ:"wÌ‚",áº‡:"wÌ‡",áº˜:"wÌŠ",áº:"xÌˆ",áº‹:"xÌ‡",Ã½:"yÌ",á»³:"yÌ€",Ã¿:"yÌˆ",á»¹:"yÌƒ",È³:"yÌ„",Å·:"yÌ‚",áº:"yÌ‡",áº™:"yÌŠ",Åº:"zÌ",Å¾:"zÌŒ",áº‘:"zÌ‚",Å¼:"zÌ‡",Ã:"AÌ",Ã€:"AÌ€",Ã„:"AÌˆ",Çž:"AÌˆÌ„",Ãƒ:"AÌƒ",Ä€:"AÌ„",Ä‚:"AÌ†",áº®:"AÌ†Ì",áº°:"AÌ†Ì€",áº´:"AÌ†Ìƒ",Ç:"AÌŒ",Ã‚:"AÌ‚",áº¤:"AÌ‚Ì",áº¦:"AÌ‚Ì€",áºª:"AÌ‚Ìƒ",È¦:"AÌ‡",Ç :"AÌ‡Ì„",Ã…:"AÌŠ",Çº:"AÌŠÌ",á¸‚:"BÌ‡",Ä†:"CÌ",ÄŒ:"CÌŒ",Äˆ:"CÌ‚",ÄŠ:"CÌ‡",ÄŽ:"DÌŒ",á¸Š:"DÌ‡",Ã‰:"EÌ",Ãˆ:"EÌ€",Ã‹:"EÌˆ",áº¼:"EÌƒ",Ä’:"EÌ„",á¸–:"EÌ„Ì",á¸”:"EÌ„Ì€",Ä”:"EÌ†",Äš:"EÌŒ",ÃŠ:"EÌ‚",áº¾:"EÌ‚Ì",á»€:"EÌ‚Ì€",á»„:"EÌ‚Ìƒ",Ä–:"EÌ‡",á¸ž:"FÌ‡",Ç´:"GÌ",á¸ :"GÌ„",Äž:"GÌ†",Ç¦:"GÌŒ",Äœ:"GÌ‚",Ä :"GÌ‡",á¸¦:"HÌˆ",Èž:"HÌŒ",Ä¤:"HÌ‚",á¸¢:"HÌ‡",Ã:"IÌ",ÃŒ:"IÌ€",Ã:"IÌˆ",á¸®:"IÌˆÌ",Ä¨:"IÌƒ",Äª:"IÌ„",Ä¬:"IÌ†",Ç:"IÌŒ",ÃŽ:"IÌ‚",Ä°:"IÌ‡",Ä´:"JÌ‚",á¸°:"KÌ",Ç¨:"KÌŒ",Ä¹:"LÌ",Ä½:"LÌŒ",á¸¾:"MÌ",á¹€:"MÌ‡",Åƒ:"NÌ",Ç¸:"NÌ€",Ã‘:"NÌƒ",Å‡:"NÌŒ",á¹„:"NÌ‡",Ã“:"OÌ",Ã’:"OÌ€",Ã–:"OÌˆ",Èª:"OÌˆÌ„",Ã•:"OÌƒ",á¹Œ:"OÌƒÌ",á¹Ž:"OÌƒÌˆ",È¬:"OÌƒÌ„",ÅŒ:"OÌ„",á¹’:"OÌ„Ì",á¹:"OÌ„Ì€",ÅŽ:"OÌ†",Ç‘:"OÌŒ",Ã”:"OÌ‚",á»:"OÌ‚Ì",á»’:"OÌ‚Ì€",á»–:"OÌ‚Ìƒ",È®:"OÌ‡",È°:"OÌ‡Ì„",Å:"OÌ‹",á¹”:"PÌ",á¹–:"PÌ‡",Å”:"RÌ",Å˜:"RÌŒ",á¹˜:"RÌ‡",Åš:"SÌ",á¹¤:"SÌÌ‡",Å :"SÌŒ",á¹¦:"SÌŒÌ‡",Åœ:"SÌ‚",á¹ :"SÌ‡",Å¤:"TÌŒ",á¹ª:"TÌ‡",Ãš:"UÌ",Ã™:"UÌ€",Ãœ:"UÌˆ",Ç—:"UÌˆÌ",Ç›:"UÌˆÌ€",Ç•:"UÌˆÌ„",Ç™:"UÌˆÌŒ",Å¨:"UÌƒ",á¹¸:"UÌƒÌ",Åª:"UÌ„",á¹º:"UÌ„Ìˆ",Å¬:"UÌ†",Ç“:"UÌŒ",Ã›:"UÌ‚",Å®:"UÌŠ",Å°:"UÌ‹",á¹¼:"VÌƒ",áº‚:"WÌ",áº€:"WÌ€",áº„:"WÌˆ",Å´:"WÌ‚",áº†:"WÌ‡",áºŒ:"XÌˆ",áºŠ:"XÌ‡",Ã:"YÌ",á»²:"YÌ€",Å¸:"YÌˆ",á»¸:"YÌƒ",È²:"YÌ„",Å¶:"YÌ‚",áºŽ:"YÌ‡",Å¹:"ZÌ",Å½:"ZÌŒ",áº:"ZÌ‚",Å»:"ZÌ‡",Î¬:"Î±Ì",á½°:"Î±Ì€",á¾±:"Î±Ì„",á¾°:"Î±Ì†",Î­:"ÎµÌ",á½²:"ÎµÌ€",Î®:"Î·Ì",á½´:"Î·Ì€",Î¯:"Î¹Ì",á½¶:"Î¹Ì€",ÏŠ:"Î¹Ìˆ",Î:"Î¹ÌˆÌ",á¿’:"Î¹ÌˆÌ€",á¿‘:"Î¹Ì„",á¿:"Î¹Ì†",ÏŒ:"Î¿Ì",á½¸:"Î¿Ì€",Ï:"Ï…Ì",á½º:"Ï…Ì€",Ï‹:"Ï…Ìˆ",Î°:"Ï…ÌˆÌ",á¿¢:"Ï…ÌˆÌ€",á¿¡:"Ï…Ì„",á¿ :"Ï…Ì†",ÏŽ:"Ï‰Ì",á½¼:"Ï‰Ì€",ÎŽ:"Î¥Ì",á¿ª:"Î¥Ì€",Î«:"Î¥Ìˆ",á¿©:"Î¥Ì„",á¿¨:"Î¥Ì†",Î:"Î©Ì",á¿º:"Î©Ì€"};const Ol=["bin","op","open","punct","rel"],Nl=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/,Cl=/^ *\\text/;class st{constructor(t,r,s=!1){this.mode="math",this.gullet=new Dl(t,r,this.mode),this.settings=r,this.isPreamble=s,this.leftrightDepth=0,this.prevAtomType=""}expect(t,r=!0){if(this.fetch().text!==t)throw new D(`Expected '${t}', got '${this.fetch().text}'`,this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");const t=this.parseExpression(!1);if(this.expect("EOF"),this.isPreamble){const s=Object.create(null);return Object.entries(this.gullet.macros.current).forEach(([o,i])=>{s[o]=i}),this.gullet.endGroup(),s}const r=this.gullet.macros.get("\\df@tag");return this.gullet.endGroup(),r&&(this.gullet.macros.current["\\df@tag"]=r),t}static get endOfExpression(){return["}","\\endgroup","\\end","\\right","\\endtoggle","&"]}subparse(t){const r=this.nextToken;this.consume(),this.gullet.pushToken(new he("}")),this.gullet.pushTokens(t);const s=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,s}parseExpression(t,r,s){const o=[];for(this.prevAtomType="";;){this.mode==="math"&&this.consumeSpaces();const i=this.fetch();if(st.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||s&&i.text==="\\middle"||t&&_e[i.text]&&_e[i.text].infix)break;const l=this.parseAtom(r);if(l){if(l.type==="internal")continue}else break;o.push(l),this.prevAtomType=l.type==="atom"?l.family:l.type}return this.mode==="text"&&this.formLigatures(o),this.handleInfixNodes(o)}handleInfixNodes(t){let r=-1,s;for(let o=0;o<t.length;o++)if(t[o].type==="infix"){if(r!==-1)throw new D("only one infix operator per group",t[o].token);r=o,s=t[o].replaceWith}if(r!==-1&&s){let o,i;const l=t.slice(0,r),u=t.slice(r+1);l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l},u.length===1&&u[0].type==="ordgroup"?i=u[0]:i={type:"ordgroup",mode:this.mode,body:u};let h;return s==="\\\\abovefrac"?h=this.callFunction(s,[o,t[r],i],[]):h=this.callFunction(s,[o,i],[]),[h]}else return t}handleSupSubscript(t){const r=this.fetch(),s=r.text;this.consume(),this.consumeSpaces();let o;do o=this.parseGroup(t);while(o.type&&o.type==="internal");if(!o)throw new D("Expected group after '"+s+"'",r);return o}formatUnsupportedCmd(t){const r=[];for(let i=0;i<t.length;i++)r.push({type:"textord",mode:"text",text:t[i]});const s={type:"text",mode:this.mode,body:r};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]}}parseAtom(t){const r=this.parseGroup("atom",t);if(r&&r.type==="internal"||this.mode==="text")return r;let s,o;for(;;){this.consumeSpaces();const i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){const l=i.text==="\\limits";r.limits=l,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new D("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(s)throw new D("Double superscript",i);s=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(o)throw new D("Double subscript",i);o=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(s)throw new D("Double superscript",i);const l={type:"textord",mode:this.mode,text:"\\prime"},u=[l];for(this.consume();this.fetch().text==="'";)u.push(l),this.consume();this.fetch().text==="^"&&u.push(this.handleSupSubscript("superscript")),s={type:"ordgroup",mode:this.mode,body:u}}else if(We[i.text]){const l=_s.test(i.text),u=[];for(u.push(new he(We[i.text])),this.consume();;){const b=this.fetch().text;if(!We[b]||_s.test(b)!==l)break;u.unshift(new he(We[b])),this.consume()}const h=this.subparse(u);l?o={type:"ordgroup",mode:"math",body:h}:s={type:"ordgroup",mode:"math",body:h}}else break}if(s||o){if(r&&r.type==="multiscript"&&!r.postscripts)return r.postscripts={sup:s,sub:o},r;{const i=!r||r.type!=="op"&&r.type!=="operatorname"?void 0:nt(this.nextToken.text);return{type:"supsub",mode:this.mode,base:r,sup:s,sub:o,isFollowedByDelimiter:i}}}else return r}parseFunction(t,r){const s=this.fetch(),o=s.text,i=_e[o];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new D("Got function '"+o+"' with no arguments"+(r?" as "+r:""),s);if(this.mode==="text"&&!i.allowedInText)throw new D("Can't use function '"+o+"' in text mode",s);if(this.mode==="math"&&i.allowedInMath===!1)throw new D("Can't use function '"+o+"' in math mode",s);const l=this.prevAtomType,{args:u,optArgs:h}=this.parseArguments(o,i);return this.prevAtomType=l,this.callFunction(o,u,h,s,t)}callFunction(t,r,s,o,i){const l={funcName:t,parser:this,token:o,breakOnTokenText:i},u=_e[t];if(u&&u.handler)return u.handler(l,r,s);throw new D(`No function handler for ${t}`)}parseArguments(t,r){const s=r.numArgs+r.numOptionalArgs;if(s===0)return{args:[],optArgs:[]};const o=[],i=[];for(let l=0;l<s;l++){let u=r.argTypes&&r.argTypes[l];const h=l<r.numOptionalArgs;(r.primitive&&u==null||r.type==="sqrt"&&l===1&&i[0]==null)&&(u="primitive");const b=this.parseGroupOfType(`argument to '${t}'`,u,h);if(h)i.push(b);else if(b!=null)o.push(b);else throw new D("Null argument, please report this as a bug")}return{args:o,optArgs:i}}parseGroupOfType(t,r,s){switch(r){case"size":return this.parseSizeGroup(s);case"url":return this.parseUrlGroup(s);case"math":case"text":return this.parseArgumentGroup(s,r);case"hbox":{const o=this.parseArgumentGroup(s,"text");return o!=null?{type:"styling",mode:o.mode,body:[o],scriptLevel:"text"}:null}case"raw":{const o=this.parseStringGroup("raw",s);return o!=null?{type:"raw",mode:"text",string:o.text}:null}case"primitive":{if(s)throw new D("A primitive argument cannot be optional");const o=this.parseGroup(t);if(o==null)throw new D("Expected group as "+t,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(s);default:throw new D("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;;){const t=this.fetch().text;if(t===" "||t==="Â "||t==="ï¸Ž")this.consume();else break}}parseStringGroup(t,r){const s=this.gullet.scanArgument(r);if(s==null)return null;let o="",i;for(;(i=this.fetch()).text!=="EOF";)o+=i.text,this.consume();return this.consume(),s.text=o,s}parseRegexGroup(t,r){const s=this.fetch();let o=s,i="",l;for(;(l=this.fetch()).text!=="EOF"&&t.test(i+l.text);)o=l,i+=o.text,this.consume();if(i==="")throw new D("Invalid "+r+": '"+s.text+"'",s);return s.range(o,i)}parseSizeGroup(t){let r,s=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",s=!0);const o=Nl.exec(r.text);if(!o)throw new D("Invalid size: '"+r.text+"'",r);const i={number:+(o[1]+o[2]),unit:o[3]};if(!Es(i))throw new D("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:s}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;let s=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return s=r.text.replace(/{\u2044}/g,"/"),{type:"url",mode:this.mode,url:s}}parseArgumentGroup(t,r){const s=this.gullet.scanArgument(t);if(s==null)return null;const o=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();const i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const l={type:"ordgroup",mode:this.mode,loc:s.loc,body:i};return r&&this.switchMode(o),l}parseGroup(t,r){const s=this.fetch(),o=s.text;let i;if(o==="{"||o==="\\begingroup"||o==="\\toggle"){this.consume();const l=o==="{"?"}":o==="\\begingroup"?"\\endgroup":"\\endtoggle";this.gullet.beginGroup();const u=this.parseExpression(!1,l),h=this.fetch();this.expect(l),this.gullet.endGroup(),i={type:h.text==="\\endtoggle"?"toggle":"ordgroup",mode:this.mode,loc:ae.range(s,h),body:u,semisimple:o==="\\begingroup"||void 0}}else i=this.parseFunction(r,t)||this.parseSymbol(),i==null&&o[0]==="\\"&&!Object.prototype.hasOwnProperty.call(no,o)&&(i=this.formatUnsupportedCmd(o),this.consume());return i}formLigatures(t){let r=t.length-1;for(let s=0;s<r;++s){const o=t[s],i=o.text;i==="-"&&t[s+1].text==="-"&&(s+1<r&&t[s+2].text==="-"?(t.splice(s,3,{type:"textord",mode:"text",loc:ae.range(o,t[s+2]),text:"---"}),r-=2):(t.splice(s,2,{type:"textord",mode:"text",loc:ae.range(o,t[s+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&t[s+1].text===i&&(t.splice(s,2,{type:"textord",mode:"text",loc:ae.range(o,t[s+1]),text:i+i}),r-=1)}}parseSymbol(){const t=this.fetch();let r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();let i=r.slice(5);const l=i.charAt(0)==="*";if(l&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new D(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:l}}if(Object.prototype.hasOwnProperty.call(ks,r[0])&&this.mode==="math"&&!Q[this.mode][r[0]]){if(this.settings.strict&&this.mode==="math")throw new D(`Accented Unicode text character "${r[0]}" used in math mode`,t);r=ks[r[0]]+r.slice(1)}const s=this.mode==="math"?ws.exec(r):null;s&&(r=r.substring(0,s.index),r==="i"?r="Ä±":r==="j"&&(r="È·"));let o;if(Q[this.mode][r]){let i=Q[this.mode][r].group;i==="bin"&&Ol.includes(this.prevAtomType)&&(i="open");const l=ae.range(t);let u;if(Object.prototype.hasOwnProperty.call(ai,i)){const h=i;u={type:"atom",mode:this.mode,family:h,loc:l,text:r},(h==="rel"||h==="bin")&&this.prevAtomType==="text"&&Cl.test(l.lexer.input.slice(l.end))&&(u.needsSpacing=!0)}else{if($s[r]){this.consume();const h=this.fetch().text.charCodeAt(0),b=h===65025?"mathscr":"mathcal";return(h===65024||h===65025)&&this.consume(),{type:"font",mode:"math",font:b,body:{type:"mathord",mode:"math",loc:l,text:$s[r]}}}u={type:i,mode:this.mode,loc:l,text:r}}o=u}else if(r.charCodeAt(0)>=128||ws.exec(r)){if(this.settings.strict&&this.mode==="math")throw new D(`Unicode text character "${r[0]}" used in math mode`,t);o={type:"textord",mode:"text",loc:ae.range(t),text:r}}else return null;if(this.consume(),s)for(let i=0;i<s[0].length;i++){const l=s[0][i];if(!ar[l])throw new D(`Unknown accent ' ${l}'`,t);const u=ar[l][this.mode]||ar[l].text;if(!u)throw new D(`Accent ${l} unsupported in ${this.mode} mode`,t);o={type:"accent",mode:this.mode,loc:ae.range(t),label:u,isStretchy:!1,base:o}}return o}}const so=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("Temml can only parse string typed expression");const r=new st(e,t);delete r.gullet.macros.current["\\df@tag"];let s=r.parse();if(!(s.length>0&&s[0].type&&s[0].type==="array"&&s[0].addEqnNum)&&r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new D("\\tag works only in display mode");r.gullet.feed("\\df@tag"),s=[{type:"tag",mode:"text",body:s,tag:r.parse()}]}return s},El=[2,2,3,3];class Er{constructor(t){this.level=t.level,this.color=t.color,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontSize=t.fontSize||1,this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.maxSize=t.maxSize}extend(t){const r={level:this.level,color:this.color,font:this.font,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s]);return new Er(r)}withLevel(t){return this.extend({level:t})}incrementLevel(){return this.extend({level:Math.min(this.level+1,3)})}inSubOrSup(){return this.extend({level:El[this.level]})}withColor(t){return this.extend({color:t})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withFontSize(t){return this.extend({fontSize:t})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}getColor(){return this.color}}const Pl="0.11.11";function oo(e){const t={};let r=0;const s=document.getElementsByClassName("tml-eqn");for(let l of s)for(r+=1,l.setAttribute("id","tml-eqn-"+String(r));l.tagName!=="mtable";)if(l.getElementsByClassName("tml-label").length>0){const h=l.attributes.id.value;t[h]=String(r);break}else l=l.parentElement;const o=document.getElementsByClassName("tml-tageqn");for(const l of o)if(l.getElementsByClassName("tml-label").length>0){const h=l.getElementsByClassName("tml-tag");if(h.length>0){const b=l.attributes.id.value;t[b]=h[0].textContent}}[...e.getElementsByClassName("tml-ref")].forEach(l=>{const u=l.getAttribute("href");let h=t[u.slice(1)];l.className.indexOf("tml-eqref")===-1?(h=h.replace(/^\(/,""),h=h.replace(/\)$/,"")):(h.charAt(0)!=="("&&(h="("+h),h.slice(-1)!==")"&&(h=h+")"));const b=document.createElementNS("http://www.w3.org/1998/Math/MathML","mtext");b.appendChild(document.createTextNode(h));const _=document.createElementNS("http://www.w3.org/1998/Math/MathML","math");_.appendChild(b),l.textContent="",l.appendChild(_)})}const Bl=function(e,t,r){let s=r,o=0;const i=e.length;for(;s<t.length;){const l=t[s];if(o<=0&&t.slice(s,s+i)===e)return s;l==="\\"?s++:l==="{"?o++:l==="}"&&o--,s++}return-1},Fl=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},zl=/^\\(?:begin|(?:eq)?ref){/,Ll=function(e,t){let r;const s=[],o=new RegExp("("+t.map(i=>Fl(i.left)).join("|")+")");for(;r=e.search(o),r!==-1;){r>0&&(s.push({type:"text",data:e.slice(0,r)}),e=e.slice(r));const i=t.findIndex(h=>e.startsWith(h.left));if(r=Bl(t[i].right,e,t[i].left.length),r===-1)break;const l=e.slice(0,r+t[i].right.length),u=zl.test(l)?l:e.slice(t[i].left.length,r);s.push({type:"math",data:u,rawData:l,display:t[i].display}),e=e.slice(r+t[i].right.length)}return e!==""&&s.push({type:"text",data:e}),s},ao=[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{equation*}",right:"\\end{equation*}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{align*}",right:"\\end{align*}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{alignat*}",right:"\\end{alignat*}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{gather*}",right:"\\end{gather*}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\ref{",right:"}",display:!1},{left:"\\eqref{",right:"}",display:!1},{left:"\\[",right:"\\]",display:!0}],Ze={$:[{left:"$$",right:"$$",display:!0},{left:"$`",right:"`$",display:!1},{left:"$",right:"$",display:!1}],"(":[{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]},ir=[{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{equation*}",right:"\\end{equation*}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{align*}",right:"\\end{align*}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{alignat*}",right:"\\end{alignat*}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{gather*}",right:"\\end{gather*}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\ref{",right:"}",display:!1},{left:"\\eqref{",right:"}",display:!1}],Il=e=>e==="$"||e==="("?Ze[e]:e==="$+"||e==="(+"?Ze[e.slice(0,1)].concat(ir):e==="ams"?ir:e==="all"?Ze["("].concat(Ze.$).concat(ir):ao,Rl=function(e,t){const r=Ll(e,t.delimiters);if(r.length===1&&r[0].type==="text")return null;const s=document.createDocumentFragment();for(let o=0;o<r.length;o++)if(r[o].type==="text")s.appendChild(document.createTextNode(r[o].data));else{const i=document.createElement("span");let l=r[o].data;t.displayMode=r[o].display;try{t.preProcess&&(l=t.preProcess(l)),temml.render(l,i,t)}catch(u){if(!(u instanceof D))throw u;t.errorCallback("Temml auto-render: Failed to parse `"+r[o].data+"` with ",u),s.appendChild(document.createTextNode(r[o].rawData));continue}s.appendChild(i)}return s},io=function(e,t){for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];if(s.nodeType===3){const o=Rl(s.textContent,t);o&&(r+=o.childNodes.length-1,e.replaceChild(o,s))}else if(s.nodeType===1){const o=" "+s.className+" ";t.ignoredTags.indexOf(s.nodeName.toLowerCase())===-1&&t.ignoredClasses.every(l=>o.indexOf(" "+l+" ")===-1)&&io(s,t)}}},Gl=function(e,t){if(!e)throw new Error("No element provided to render");const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.fences?r.delimiters=Il(r.fences):r.delimiters=r.delimiters||ao,r.ignoredTags=r.ignoredTags||["script","noscript","style","textarea","pre","code","option"],r.ignoredClasses=r.ignoredClasses||[],r.errorCallback=r.errorCallback||console.error,r.macros=r.macros||{},io(e,r),oo(e)};let lo=function(e,t,r={}){t.textContent="";const s=t.tagName.toLowerCase()==="math";s&&(r.wrap="none");const o=Pr(e,r);s?(t.textContent="",o.children.forEach(i=>{t.appendChild(i.toNode())})):o.children.length>1?(t.textContent="",o.children.forEach(i=>{t.appendChild(i.toNode())})):t.appendChild(o.toNode())};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: Temml doesn't work in quirks mode. Make sure your website has a suitable doctype."),lo=function(){throw new D("Temml doesn't work in quirks mode.")});const jl=function(e,t){return Pr(e,t).toMarkup()},Vl=function(e,t){const r=new $r(t);return so(e,r)},Ul=function(e,t){const r=new $r(t);if(r.macros={},!(typeof e=="string"||e instanceof String))throw new TypeError("Temml can only parse string typed expression");const s=new st(e,r,!0);return delete s.gullet.macros.current["\\df@tag"],s.parse()},Hl=function(e,t,r){if(r.throwOnError||!(e instanceof D))throw e;const s=new Ds(["temml-error"],[new ei(t+`

`+e.toString())]);return s.style.color=r.errorColor,s.style.whiteSpace="pre-line",s},Pr=function(e,t){const r=new $r(t);try{const s=so(e,r),o=new Er({level:r.displayMode?Y.DISPLAY:Y.TEXT,maxSize:r.maxSize});return fi(s,e,o,r)}catch(s){return Hl(s,e,r)}};var Wl={version:Pl,render:lo,renderToString:jl,renderMathInElement:Gl,postProcess:oo,ParseError:D,definePreamble:Ul,__parse:Vl,__renderToMathMLTree:Pr,__defineSymbol:n,__defineMacro:c},Zl=yr('<span class="svelte-math-slot" style="display:none"><!></span>'),Xl=yr("<!> <!>",1);function S(e,t){As(t,!0);let r=pe(void 0),s=pe("");ga(()=>{le(s,X(r)?.innerText??"",!0)});const o=Gn(()=>t.latex??X(s)??""),i=Gn(()=>Wl.renderToString(X(o),{displayMode:t.displayMode,...t.options}));var l=Xl(),u=cr(l);qa(u,()=>X(i));var h=y(u,2);{var b=_=>{var $=Zl(),M=P($);ba(M,()=>t.children),B($),$a($,N=>le(r,N),()=>X(r)),k(_,$)};_a(h,_=>{t.children&&_(b)})}k(e,l),Ss()}var Jl=yr(`<div class="container mt-4 mb-4"><h1>TrigFlow <a href="https://arxiv.org/html/2410.11081v2" target="_blank">arxiv.org/html/2410.11081v2</a></h1> <hr class="my-4"/> <section class="mb-4"><h2 class="mt-4 mb-3">Basic Setup</h2> <p>TrigFlow is a theoretical framework that unifies EDM (Elucidating the Design Space of Diffusion-Based Generative Models), 
            Flow Matching, and Velocity Prediction through a simplified parameterization. The key insight is to use trigonometric 
            functions to parameterize the diffusion process, which significantly simplifies the formulation of diffusion models, 
            the associated probability flow ODE, and consistency models. This unification eliminates the need for complex noise 
            schedules and provides a more elegant mathematical foundation for training generative models.</p></section> <section class="mb-4"><h2 class="mt-4 mb-3">Diffusion Process</h2> <p>In TrigFlow, the diffusion process is parameterized using trigonometric functions. Given a data sample <!> from the target distribution and noise <!> from a standard normal distribution, 
            the noisy sample at time <!> is defined as:</p> <p class="fs-3"><!></p> <p>where <!>. This parameterization ensures that at <!>, 
            we have <!> (pure data), and at <!>, 
            we have <!> (pure noise).</p></section> <section class="mb-4"><h2 class="mt-4 mb-3">PF-ODE</h2> <p>The probability flow ODE (PF-ODE) describes the evolution of the diffusion process. The velocity is defined as the time derivative of the position: <!></p> <p>Taking the derivative of <!> with respect to time <!>, we obtain:</p> <p class="fs-3"><!></p></section> <section class="mb-4"><h2 class="mt-4 mb-3">Deriving the Consistency Property</h2> <p>Starting from the diffusion process and velocity definitions:</p> <p class="fs-5"><!><br/> <!></p> <p>Solving this linear system for <!> and <!>. 
            We can write it in matrix form:</p> <p class="fs-7"><!></p> <p>The coefficient matrix is a rotation matrix with determinant <!>, so its inverse is its transpose:</p> <p class="fs-7"><!></p> <p>Expanding this, we obtain:</p> <p class="fs-5"><!><br/> <!></p> <p>Now, consider a state at a different time <!>, where <!> and <!> can be any time point (not necessarily related to <!>). 
            By the same diffusion process definition:</p> <p class="fs-4"><!></p> <p>Substituting the expressions for <!> and <!>:</p> <p class="fs-7"><!><br/> <!><br/> <!></p> <p>This leads to the <strong>consistency property</strong>:</p> <p class="fs-3"><!></p> <p>The consistency property states that if we start from the same noise <!> and follow the diffusion trajectory toward the data <!>, 
            then <strong>any point on this trajectory should lead to the same destination</strong> <!>. 
            In other words, whether we are at time <!> (state <!>) or at time <!> (state <!>), 
            both points are on the same path from <!> to <!>, and we can jump directly from one point to another without following the entire ODE trajectory.</p></section> <section class="mb-4"><h2 class="mt-4 mb-3">From Consistency Property to Training Objective</h2> <p>Now we derive the training objective for consistency models. The key idea is to define a <strong>consistency function</strong> <!> that maps any point on the trajectory to the data <!>.</p> <p>From the consistency property, we know that <!>. 
            We define the consistency function as:</p> <p class="fs-3"><!></p> <p>where <!> is the neural network that predicts the velocity <!>. 
            If the network is perfect, <!>, then <!>.</p> <h5 class="mt-3 mb-2">Consistency Constraint</h5> <p>The consistency property requires that for any two points <!> and <!> on the same trajectory, they should map to the same <!>:</p> <p class="fs-5"><!></p> <p>This means the consistency function should be constant along the trajectory. Therefore, its total derivative along the trajectory should be zero:</p> <p class="fs-5"><!></p> <h5 class="mt-3 mb-2">Compute the Total Derivative</h5> <p>Using the chain rule, the total derivative of <!> with respect to time is:</p> <p class="fs-5"><!></p> <p>Expanding <!>, we compute the partial derivatives:</p> <p class="fs-7"><!><br/> <!></p> <p>Applying the chain rule:</p> <p class="fs-7"><!><br/> <!><br/> <!><br/> <!><br/></p> <p class="fs-5"><!></p> <p>where <!> is the total derivative of <!>.</p> <p>We know that <!> and <!>. 
            Substituting these into the expression:</p> <p class="fs-7"><!><br/> <!></p> <p class="fs-7"><!><br/> <!><br/> <!></p> <p>Using trigonometric identities and rearranging terms:</p> <p class="fs-5"><!></p> <p>Now, we express this in terms of <!> and <!>. 
            From the earlier derivation, we have:</p> <p class="fs-5"><!><br/> <!></p> <p>Substituting into <!>:</p> <p class="fs-7"><!><br/> <!><br/> <!></p> <p>Using trigonometric identities <!> and <!>:</p> <p class="fs-7"><!><br/> <!><br/> <!><br/> <!><br/> <!></p> <p>Therefore, the complete expression becomes:</p> <p class="fs-5"><!><br/> <!></p> <p>For the consistency function to remain constant along the trajectory, TrigFlow uses the cosine-scaled consistency condition:</p> <p class="fs-5"><!></p> <p>Substituting the expression for <!>:</p> <p class="fs-5"><!></p> <p>The reason for multiplying by <!> will be explained below. 
            For now, we define the <strong>tangent</strong> <!> using the stop-gradient version <!>:</p> <p class="fs-3"><!></p> <p>where <!> denotes the stop-gradient version (frozen parameters) used during training for stability.</p> <p><strong>Why multiply by <!>?</strong> This scaling is a design choice that serves three important purposes:</p> <ul><li><strong>Numerical stability:</strong> When <!> (high noise regime), <!>, causing the tangent to naturally decay to zero. 
                Without scaling, the second term <!> remains <!>, 
                leading to exploding loss in high-noise regions.</li> <li><strong>Velocity error dominance:</strong> The scaled form makes the velocity error term <!> the dominant component in low-to-medium noise regions, aligning with TrigFlow's goal of unifying EDM and Flow Matching.</li> <li><strong>Loss scale alignment:</strong> The <!> factor acts as a noise-dependent weighting, 
                similar to the <!> weighting in EDM formulations, ensuring consistent loss scales across different noise levels.</li></ul> <p>Note that <!> is mathematically equivalent to <!> (since <!> for <!>), 
            but the scaled version provides better training dynamics and numerical stability.</p> <h5 class="mt-3 mb-2">Training Objective</h5> <p>The training objective is to minimize the difference between the current network prediction and the target (frozen network + tangent):</p> <p class="fs-3"><!></p> <p>This ensures that the network learns to predict velocities such that the consistency function remains constant along trajectories, 
            enabling fast one-step or few-step generation from any point on the trajectory.</p></section></div>`);function Kl(e){var t=Jl(),r=y(P(t),6),s=y(P(r),2),o=y(P(s));S(o,{displayMode:!1,children:(f,q)=>{w();var d=A("x");k(f,d)},$$slots:{default:!0}});var i=y(o,2);S(i,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="z \\sim \\mathcal{N}(0, I)",k(f,d)},$$slots:{default:!0}});var l=y(i,2);S(l,{displayMode:!1,children:(f,q)=>{w();var d=A("t");k(f,d)},$$slots:{default:!0}}),w(),B(s);var u=y(s,2),h=P(u);S(h,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_t = \\cos(t) \\cdot x + \\sin(t) \\cdot z",k(f,d)},$$slots:{default:!0}}),B(u);var b=y(u,2),_=y(P(b));S(_,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="t \\in [0, \\pi/2]",k(f,d)},$$slots:{default:!0}});var $=y(_,2);S($,{displayMode:!1,children:(f,q)=>{w();var d=A("t = 0");k(f,d)},$$slots:{default:!0}});var M=y($,2);S(M,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0 = x");k(f,d)},$$slots:{default:!0}});var N=y(M,2);S(N,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="t = \\pi/2",k(f,d)},$$slots:{default:!0}});var G=y(N,2);S(G,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="x_{\\pi/2} = z",k(f,d)},$$slots:{default:!0}}),w(),B(b),B(r);var j=y(r,2),z=y(P(j),2),L=y(P(z));S(L,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="v_t = \\frac{dx_t}{dt}",k(f,d)},$$slots:{default:!0}}),B(z);var U=y(z,2),oe=y(P(U));S(oe,{displayMode:!1,children:(f,q)=>{w();var d=A("x_t = \\cos(t) \\cdot x + \\sin(t) \\cdot z");k(f,d)},$$slots:{default:!0}});var ne=y(oe,2);S(ne,{displayMode:!1,children:(f,q)=>{w();var d=A("t");k(f,d)},$$slots:{default:!0}}),w(),B(U);var ge=y(U,2),ye=P(ge);S(ye,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="v_t = \\frac{dx_t}{dt} = -\\sin(t) \\cdot x + \\cos(t) \\cdot z",k(f,d)},$$slots:{default:!0}}),B(ge),B(j);var ot=y(j,2),at=y(P(ot),4),Br=P(at);S(Br,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_t = \\cos(t) \\cdot x_0 + \\sin(t) \\cdot z",k(f,d)},$$slots:{default:!0}});var uo=y(Br,3);S(uo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="v_t = -\\sin(t) \\cdot x_0 + \\cos(t) \\cdot z",k(f,d)},$$slots:{default:!0}}),B(at);var it=y(at,2),Fr=y(P(it));S(Fr,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}});var co=y(Fr,2);S(co,{displayMode:!1,children:(f,q)=>{w();var d=A("z");k(f,d)},$$slots:{default:!0}}),w(),B(it);var lt=y(it,2),ho=P(lt);S(ho,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\begin{bmatrix} x_t \\\\ v_t \\end{bmatrix} = \\begin{bmatrix} \\cos(t) & \\sin(t) \\\\ -\\sin(t) & \\cos(t) \\end{bmatrix} \\begin{bmatrix} x_0 \\\\ z \\end{bmatrix}",k(f,d)},$$slots:{default:!0}}),B(lt);var ut=y(lt,2),po=y(P(ut));S(po,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="\\cos^2(t) + \\sin^2(t) = 1",k(f,d)},$$slots:{default:!0}}),w(),B(ut);var ct=y(ut,2),mo=P(ct);S(mo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\begin{bmatrix} x_0 \\\\ z \\end{bmatrix} = \\begin{bmatrix} \\cos(t) & -\\sin(t) \\\\ \\sin(t) & \\cos(t) \\end{bmatrix} \\begin{bmatrix} x_t \\\\ v_t \\end{bmatrix}",k(f,d)},$$slots:{default:!0}}),B(ct);var dt=y(ct,4),zr=P(dt);S(zr,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_0 = \\cos(t) \\cdot x_t - \\sin(t) \\cdot v_t",k(f,d)},$$slots:{default:!0}});var fo=y(zr,3);S(fo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="z = \\sin(t) \\cdot x_t + \\cos(t) \\cdot v_t",k(f,d)},$$slots:{default:!0}}),B(dt);var ht=y(dt,2),Lr=y(P(ht));S(Lr,{displayMode:!1,children:(f,q)=>{w();var d=A("r");k(f,d)},$$slots:{default:!0}});var Ir=y(Lr,2);S(Ir,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="r \\in [0, \\pi/2]",k(f,d)},$$slots:{default:!0}});var Rr=y(Ir,2);S(Rr,{displayMode:!1,children:(f,q)=>{w();var d=A("r");k(f,d)},$$slots:{default:!0}});var go=y(Rr,2);S(go,{displayMode:!1,children:(f,q)=>{w();var d=A("t");k(f,d)},$$slots:{default:!0}}),w(),B(ht);var pt=y(ht,2),bo=P(pt);S(bo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_r = \\cos(r) \\cdot x_0 + \\sin(r) \\cdot z",k(f,d)},$$slots:{default:!0}}),B(pt);var mt=y(pt,2),Gr=y(P(mt));S(Gr,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}});var xo=y(Gr,2);S(xo,{displayMode:!1,children:(f,q)=>{w();var d=A("z");k(f,d)},$$slots:{default:!0}}),w(),B(mt);var ft=y(mt,2),jr=P(ft);S(jr,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_r = \\cos(r) \\cdot [\\cos(t) \\cdot x_t - \\sin(t) \\cdot v_t] + \\sin(r) \\cdot [\\sin(t) \\cdot x_t + \\cos(t) \\cdot v_t]",k(f,d)},$$slots:{default:!0}});var Vr=y(jr,3);S(Vr,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_r = [\\cos(r)\\cos(t) + \\sin(r)\\sin(t)] \\cdot x_t + [-\\cos(r)\\sin(t) + \\sin(r)\\cos(t)] \\cdot v_t",k(f,d)},$$slots:{default:!0}});var yo=y(Vr,3);S(yo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_r = \\cos(t-r) \\cdot x_t - \\sin(t-r) \\cdot v_t",k(f,d)},$$slots:{default:!0}}),B(ft);var gt=y(ft,4),wo=P(gt);S(wo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_r = \\cos(t-r) \\cdot x_t - \\sin(t-r) \\cdot v_t = \\cos(r) \\cdot x_0 + \\sin(r) \\cdot z",k(f,d)},$$slots:{default:!0}}),B(gt);var Ur=y(gt,2),Hr=y(P(Ur));S(Hr,{displayMode:!1,children:(f,q)=>{w();var d=A("z");k(f,d)},$$slots:{default:!0}});var Wr=y(Hr,2);S(Wr,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}});var Zr=y(Wr,4);S(Zr,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}});var Xr=y(Zr,2);S(Xr,{displayMode:!1,children:(f,q)=>{w();var d=A("t");k(f,d)},$$slots:{default:!0}});var Jr=y(Xr,2);S(Jr,{displayMode:!1,children:(f,q)=>{w();var d=A("x_t");k(f,d)},$$slots:{default:!0}});var Kr=y(Jr,2);S(Kr,{displayMode:!1,children:(f,q)=>{w();var d=A("r");k(f,d)},$$slots:{default:!0}});var Yr=y(Kr,2);S(Yr,{displayMode:!1,children:(f,q)=>{w();var d=A("x_r");k(f,d)},$$slots:{default:!0}});var Qr=y(Yr,2);S(Qr,{displayMode:!1,children:(f,q)=>{w();var d=A("z");k(f,d)},$$slots:{default:!0}});var vo=y(Qr,2);S(vo,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}}),w(),B(Ur),B(ot);var en=y(ot,2),bt=y(P(en),2),tn=y(P(bt),3);S(tn,{displayMode:!1,children:(f,q)=>{w();var d=A("g_Î¸(x_t, t)");k(f,d)},$$slots:{default:!0}});var _o=y(tn,2);S(_o,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}}),w(),B(bt);var xt=y(bt,2),$o=y(P(xt));S($o,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0 = \\cos(t) Â· x_t - \\sin(t) Â· v_t");k(f,d)},$$slots:{default:!0}}),w(),B(xt);var yt=y(xt,2),ko=P(yt);S(ko,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="g_\\theta(x_t, t) = \\cos(t) \\cdot x_t - \\sin(t) \\cdot F_\\theta(x_t, t)",k(f,d)},$$slots:{default:!0}}),B(yt);var wt=y(yt,2),rn=y(P(wt));S(rn,{displayMode:!1,children:(f,q)=>{w();var d=A("F_Î¸(x_t, t)");k(f,d)},$$slots:{default:!0}});var nn=y(rn,2);S(nn,{displayMode:!1,children:(f,q)=>{w();var d=A("v_t");k(f,d)},$$slots:{default:!0}});var sn=y(nn,2);S(sn,{displayMode:!1,children:(f,q)=>{w();var d=A("F_Î¸(x_t, t) = v_t");k(f,d)},$$slots:{default:!0}});var Ao=y(sn,2);S(Ao,{displayMode:!1,children:(f,q)=>{w();var d=A("g_Î¸(x_t, t) = x_0");k(f,d)},$$slots:{default:!0}}),w(),B(wt);var vt=y(wt,4),on=y(P(vt));S(on,{displayMode:!1,children:(f,q)=>{w();var d=A("(x_t, t)");k(f,d)},$$slots:{default:!0}});var an=y(on,2);S(an,{displayMode:!1,children:(f,q)=>{w();var d=A("(x_r, r)");k(f,d)},$$slots:{default:!0}});var So=y(an,2);S(So,{displayMode:!1,children:(f,q)=>{w();var d=A("x_0");k(f,d)},$$slots:{default:!0}}),w(),B(vt);var _t=y(vt,2),qo=P(_t);S(qo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="g_\\theta(x_t, t) = g_\\theta(x_r, r) = x_0",k(f,d)},$$slots:{default:!0}}),B(_t);var $t=y(_t,4),To=P($t);S(To,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = 0",k(f,d)},$$slots:{default:!0}}),B($t);var kt=y($t,4),Mo=y(P(kt));S(Mo,{displayMode:!1,children:(f,q)=>{w();var d=A("g_Î¸");k(f,d)},$$slots:{default:!0}}),w(),B(kt);var At=y(kt,2),Do=P(At);S(Do,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = \\frac{\\partial g_\\theta}{\\partial x_t} \\cdot \\frac{dx_t}{dt} + \\frac{\\partial g_\\theta}{\\partial t}",k(f,d)},$$slots:{default:!0}}),B(At);var St=y(At,2),Oo=y(P(St));S(Oo,{displayMode:!1,children:(f,q)=>{w();var d=A("g_Î¸ = \\cos(t) Â· x_t - \\sin(t) Â· F_Î¸(x_t, t)");k(f,d)},$$slots:{default:!0}}),w(),B(St);var qt=y(St,2),ln=P(qt);S(ln,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{\\partial g_\\theta}{\\partial x_t} = \\cos(t) - \\sin(t) \\cdot \\frac{\\partial F_\\theta}{\\partial x_t}",k(f,d)},$$slots:{default:!0}});var No=y(ln,3);S(No,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{\\partial g_\\theta}{\\partial t} = -\\sin(t) \\cdot x_t - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{\\partial F_\\theta}{\\partial t}",k(f,d)},$$slots:{default:!0}}),B(qt);var Tt=y(qt,4),un=P(Tt);S(un,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = \\frac{\\partial g_\\theta}{\\partial x_t} \\cdot \\frac{dx_t}{dt} + \\frac{\\partial g_\\theta}{\\partial t}",k(f,d)},$$slots:{default:!0}});var cn=y(un,3);S(cn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= \\left[\\cos(t) - \\sin(t) \\cdot \\frac{\\partial F_\\theta}{\\partial x_t}\\right] \\cdot \\frac{dx_t}{dt} + \\left[-\\sin(t) \\cdot x_t - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{\\partial F_\\theta}{\\partial t}\\right]",k(f,d)},$$slots:{default:!0}});var dn=y(cn,3);S(dn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= \\cos(t) \\cdot \\frac{dx_t}{dt} - \\sin(t) \\cdot \\frac{\\partial F_\\theta}{\\partial x_t} \\cdot \\frac{dx_t}{dt} - \\sin(t) \\cdot x_t - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{\\partial F_\\theta}{\\partial t}",k(f,d)},$$slots:{default:!0}});var Co=y(dn,3);S(Co,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\sin(t) \\cdot x_t + \\cos(t) \\cdot \\frac{dx_t}{dt} - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\left[\\frac{\\partial F_\\theta}{\\partial t} + \\frac{\\partial F_\\theta}{\\partial x_t} \\cdot \\frac{dx_t}{dt}\\right]",k(f,d)},$$slots:{default:!0}}),w(),B(Tt);var Mt=y(Tt,2),Eo=P(Mt);S(Eo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = -\\sin(t) \\cdot x_t + \\cos(t) \\cdot \\frac{dx_t}{dt} - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt} = 0",k(f,d)},$$slots:{default:!0}}),B(Mt);var Dt=y(Mt,2),hn=y(P(Dt));S(hn,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dF_\\theta}{dt} = \\frac{\\partial F_\\theta}{\\partial t} + \\frac{\\partial F_\\theta}{\\partial x_t} \\cdot \\frac{dx_t}{dt}",k(f,d)},$$slots:{default:!0}});var Po=y(hn,2);S(Po,{displayMode:!1,children:(f,q)=>{w();var d=A("F_Î¸");k(f,d)},$$slots:{default:!0}}),w(),B(Dt);var Ot=y(Dt,2),pn=y(P(Ot));S(pn,{displayMode:!1,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dx_t}{dt} = v_t = -\\sin(t) \\cdot x_0 + \\cos(t) \\cdot z",k(f,d)},$$slots:{default:!0}});var Bo=y(pn,2);S(Bo,{displayMode:!1,children:(f,q)=>{w();var d=A("x_t = \\cos(t) Â· x_0 + \\sin(t) Â· z");k(f,d)},$$slots:{default:!0}}),w(),B(Ot);var Nt=y(Ot,2),mn=P(Nt);S(mn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = -\\sin(t) \\cdot x_t + \\cos(t) \\cdot \\frac{dx_t}{dt} - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}});var Fo=y(mn,3);S(Fo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\sin(t) \\cdot [\\cos(t) \\cdot x_0 + \\sin(t) \\cdot z] + \\cos(t) \\cdot [-\\sin(t) \\cdot x_0 + \\cos(t) \\cdot z] - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}}),B(Nt);var Ct=y(Nt,2),fn=P(Ct);S(fn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\sin(t)\\cos(t) \\cdot x_0 - \\sin^2(t) \\cdot z - \\cos(t)\\sin(t) \\cdot x_0 + \\cos^2(t) \\cdot z - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}});var gn=y(fn,3);S(gn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= [-\\sin(t)\\cos(t) - \\cos(t)\\sin(t)] \\cdot x_0 + [-\\sin^2(t) + \\cos^2(t)] \\cdot z - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}});var zo=y(gn,3);S(zo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -2\\sin(t)\\cos(t) \\cdot x_0 + [\\cos^2(t) - \\sin^2(t)] \\cdot z - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}}),B(Ct);var Et=y(Ct,4),Lo=P(Et);S(Lo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = -\\sin(2t) \\cdot x_0 + \\cos(2t) \\cdot z - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}}),B(Et);var Pt=y(Et,2),bn=y(P(Pt));S(bn,{displayMode:!1,children:(f,q)=>{w();var d=A("x_t");k(f,d)},$$slots:{default:!0}});var Io=y(bn,2);S(Io,{displayMode:!1,children:(f,q)=>{w();var d=A("v_t");k(f,d)},$$slots:{default:!0}}),w(),B(Pt);var Bt=y(Pt,2),xn=P(Bt);S(xn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="x_0 = \\cos(t) \\cdot x_t - \\sin(t) \\cdot v_t",k(f,d)},$$slots:{default:!0}});var Ro=y(xn,3);S(Ro,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="z = \\sin(t) \\cdot x_t + \\cos(t) \\cdot v_t",k(f,d)},$$slots:{default:!0}}),B(Bt);var Ft=y(Bt,2),Go=y(P(Ft));S(Go,{displayMode:!1,children:(f,q)=>{w();var d=A("-sin(2t) Â· x_0 + cos(2t) Â· z");k(f,d)},$$slots:{default:!0}}),w(),B(Ft);var zt=y(Ft,2),yn=P(zt);S(yn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="-\\sin(2t) \\cdot x_0 + \\cos(2t) \\cdot z = -\\sin(2t) \\cdot [\\cos(t) \\cdot x_t - \\sin(t) \\cdot v_t] + \\cos(2t) \\cdot [\\sin(t) \\cdot x_t + \\cos(t) \\cdot v_t]",k(f,d)},$$slots:{default:!0}});var wn=y(yn,3);S(wn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\sin(2t)\\cos(t) \\cdot x_t + \\sin(2t)\\sin(t) \\cdot v_t + \\cos(2t)\\sin(t) \\cdot x_t + \\cos(2t)\\cos(t) \\cdot v_t",k(f,d)},$$slots:{default:!0}});var jo=y(wn,3);S(jo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= [-\\sin(2t)\\cos(t) + \\cos(2t)\\sin(t)] \\cdot x_t + [\\sin(2t)\\sin(t) + \\cos(2t)\\cos(t)] \\cdot v_t",k(f,d)},$$slots:{default:!0}}),B(zt);var Lt=y(zt,2),vn=y(P(Lt));S(vn,{displayMode:!1,children:(f,q)=>{w();var d=A("sin(2t) = 2sin(t)cos(t)");k(f,d)},$$slots:{default:!0}});var Vo=y(vn,2);S(Vo,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(2t) = cosÂ²(t) - sinÂ²(t)");k(f,d)},$$slots:{default:!0}}),w(),B(Lt);var It=y(Lt,2),_n=P(It);S(_n,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= [-2\\sin(t)\\cos^2(t) + \\sin(t)(\\cos^2(t) - \\sin^2(t))] \\cdot x_t + [2\\sin^2(t)\\cos(t) + \\cos(t)(\\cos^2(t) - \\sin^2(t))] \\cdot v_t",k(f,d)},$$slots:{default:!0}});var $n=y(_n,3);S($n,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= [-2\\sin(t)\\cos^2(t) + \\sin(t)\\cos^2(t) - \\sin^3(t)] \\cdot x_t + [2\\sin^2(t)\\cos(t) + \\cos^3(t) - \\cos(t)\\sin^2(t)] \\cdot v_t",k(f,d)},$$slots:{default:!0}});var kn=y($n,3);S(kn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= [-\\sin(t)\\cos^2(t) - \\sin^3(t)] \\cdot x_t + [\\sin^2(t)\\cos(t) + \\cos^3(t)] \\cdot v_t",k(f,d)},$$slots:{default:!0}});var An=y(kn,3);S(An,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\sin(t)[\\cos^2(t) + \\sin^2(t)] \\cdot x_t + \\cos(t)[\\sin^2(t) + \\cos^2(t)] \\cdot v_t",k(f,d)},$$slots:{default:!0}});var Uo=y(An,3);S(Uo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\sin(t) \\cdot x_t + \\cos(t) \\cdot v_t",k(f,d)},$$slots:{default:!0}}),B(It);var Rt=y(It,4),Sn=P(Rt);S(Sn,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\frac{dg_\\theta}{dt} = -\\sin(t) \\cdot x_t + \\cos(t) \\cdot v_t - \\cos(t) \\cdot F_\\theta - \\sin(t) \\cdot \\frac{dF_\\theta}{dt}",k(f,d)},$$slots:{default:!0}});var Ho=y(Sn,3);S(Ho,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="= -\\cos(t) \\cdot (F_\\theta - v_t) - \\sin(t) \\cdot (x_t + \\frac{dF_\\theta}{dt})",k(f,d)},$$slots:{default:!0}}),B(Rt);var Gt=y(Rt,4),Wo=P(Gt);S(Wo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\cos(t) \\cdot \\frac{dg_\\theta}{dt} = 0",k(f,d)},$$slots:{default:!0}}),B(Gt);var jt=y(Gt,2),Zo=y(P(jt));S(Zo,{displayMode:!1,children:(f,q)=>{w();var d=A("dg_Î¸/dt");k(f,d)},$$slots:{default:!0}}),w(),B(jt);var Vt=y(jt,2),Xo=P(Vt);S(Xo,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\cos(t) \\cdot \\frac{dg_\\theta}{dt} = -\\cos^2(t) \\cdot (F_\\theta - v_t) - \\cos(t)\\sin(t) \\cdot (x_t + \\frac{dF_\\theta}{dt}) = 0",k(f,d)},$$slots:{default:!0}}),B(Vt);var Ut=y(Vt,2),qn=y(P(Ut));S(qn,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(t)");k(f,d)},$$slots:{default:!0}});var Tn=y(qn,4);S(Tn,{displayMode:!1,children:(f,q)=>{w();var d=A("g");k(f,d)},$$slots:{default:!0}});var Jo=y(Tn,2);S(Jo,{displayMode:!1,children:(f,q)=>{w();var d=A("F_Î¸â»");k(f,d)},$$slots:{default:!0}}),w(),B(Ut);var Ht=y(Ut,2),Ko=P(Ht);S(Ko,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="g := -\\cos^2(t) \\cdot (F_\\theta^- - v_t) - \\cos(t)\\sin(t) \\cdot (x_t + \\frac{dF_\\theta^-}{dt})",k(f,d)},$$slots:{default:!0}}),B(Ht);var Wt=y(Ht,2),Yo=y(P(Wt));S(Yo,{displayMode:!1,children:(f,q)=>{w();var d=A("F_Î¸^-");k(f,d)},$$slots:{default:!0}}),w(),B(Wt);var Zt=y(Wt,2),Mn=P(Zt),Qo=y(P(Mn));S(Qo,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(t)");k(f,d)},$$slots:{default:!0}}),w(),B(Mn),w(),B(Zt);var Xt=y(Zt,2),Jt=P(Xt),Dn=y(P(Jt),2);S(Dn,{displayMode:!1,children:(f,q)=>{w();var d=A("t \\to \\pi/2");k(f,d)},$$slots:{default:!0}});var On=y(Dn,2);S(On,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(t) \\to 0");k(f,d)},$$slots:{default:!0}});var Nn=y(On,2);S(Nn,{displayMode:!1,children:(f,q)=>{w();var d=A("-sin(t)(x_t + dF_Î¸/dt)");k(f,d)},$$slots:{default:!0}});var ea=y(Nn,2);S(ea,{displayMode:!1,children:(f,q)=>{w();var d=A("O(1)");k(f,d)},$$slots:{default:!0}}),w(),B(Jt);var Kt=y(Jt,2),ta=y(P(Kt),2);S(ta,{displayMode:!1,children:(f,q)=>{w();var d=A("-cosÂ²(t)(F_Î¸ - v_t)");k(f,d)},$$slots:{default:!0}}),w(),B(Kt);var Cn=y(Kt,2),En=y(P(Cn),2);S(En,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(t)");k(f,d)},$$slots:{default:!0}});var ra=y(En,2);S(ra,{displayMode:!1,children:(f,q)=>{w();var d=A("Ïƒ(t)");k(f,d)},$$slots:{default:!0}}),w(),B(Cn),B(Xt);var Yt=y(Xt,2),Pn=y(P(Yt));S(Pn,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(t) Â· dg_Î¸/dt = 0");k(f,d)},$$slots:{default:!0}});var Bn=y(Pn,2);S(Bn,{displayMode:!1,children:(f,q)=>{w();var d=A("dg_Î¸/dt = 0");k(f,d)},$$slots:{default:!0}});var Fn=y(Bn,2);S(Fn,{displayMode:!1,children:(f,q)=>{w();var d=A("cos(t) \\neq 0");k(f,d)},$$slots:{default:!0}});var na=y(Fn,2);S(na,{displayMode:!1,children:(f,q)=>{w();var d=A("t \\in [0, \\pi/2)");k(f,d)},$$slots:{default:!0}}),w(),B(Yt);var zn=y(Yt,6),sa=P(zn);S(sa,{displayMode:!0,children:(f,q)=>{w();var d=A();d.nodeValue="\\mathcal{L} = ||F_\\theta(x_t, t) - F_\\theta^-(x_t, t) - g||^2",k(f,d)},$$slots:{default:!0}}),B(zn),w(2),B(en),B(t),k(e,t)}function iu(e){const t=[{path:"*",component:Kl}];Ia(e,{get routes(){return t}})}export{iu as component};
